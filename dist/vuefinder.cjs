"use strict";var tr=Object.defineProperty;var or=(o,t,n)=>t in o?tr(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n;var Co=(o,t,n)=>(or(o,typeof t!="symbol"?t+"":t,n),n);const e=require("vue"),nr=require("mitt"),rr=require("dragselect"),sr=require("@uppy/core"),ar=require("@uppy/xhr-upload"),lr=require("vanilla-lazyload");require("cropperjs/dist/cropper.css");const cr=require("cropperjs");require("microtip/microtip.css");var tn;const qt=(tn=document.querySelector('meta[name="csrf-token"]'))==null?void 0:tn.getAttribute("content");class ir{constructor(t){Co(this,"config");this.config=t}get config(){return this.config}transformRequestParams(t){const n=this.config,s={};qt!=null&&qt!==""&&(s[n.xsrfHeaderName]=qt);const r=Object.assign({},n.headers,s,t.headers),a=Object.assign({},n.params,t.params),c=t.body,i=n.baseUrl+t.url,l=t.method;let d;l!=="get"&&(c instanceof FormData?(d=c,n.body!=null&&Object.entries(this.config.body).forEach(([m,f])=>{d.append(m,f)})):(d={...c},n.body!=null&&Object.assign(d,this.config.body)));const u={url:i,method:l,headers:r,params:a,body:d};if(n.transformRequest!=null){const m=n.transformRequest({url:i,method:l,headers:r,params:a,body:d});m.url!=null&&(u.url=m.url),m.method!=null&&(u.method=m.method),m.params!=null&&(u.params=m.params??{}),m.headers!=null&&(u.headers=m.headers??{}),m.body!=null&&(u.body=m.body)}return u}getDownloadUrl(t,n){if(n.url!=null)return n.url;const s=this.transformRequestParams({url:"",method:"get",params:{q:"download",adapter:t,path:n.path}});return s.url+"?"+new URLSearchParams(s.params).toString()}getPreviewUrl(t,n){if(n.url!=null)return n.url;let s=window.vueFinderSessionKey;const r=window.vueFinderSessionKeyDate,a=this.config;if(!s||!r||new Date-r>54e4)try{const i=a.baseUrl+"/refreshSession.php",l=new XMLHttpRequest;if(l.open("GET",i,!1),l.withCredentials=!1,l.setRequestHeader("Authorization",a.headers.Authorization),l.send(),l.status===200){const d=JSON.parse(l.responseText);window.vueFinderSessionKey=d.sessionKey,s=window.vueFinderSessionKey,window.vueFinderSessionKeyDate=new Date}}catch(i){console.error(i)}const c=this.transformRequestParams({url:"",method:"get",params:{q:"preview",adapter:t,path:n.path,sessionKey:s}});return c.url+"?"+new URLSearchParams(c.params).toString()}async send(t){const n=this.transformRequestParams(t),s=t.responseType||"json",r={method:t.method,headers:n.headers,signal:t.abortSignal},a=n.url+"?"+new URLSearchParams(n.params);if(n.method!=="get"&&n.body!=null){let i;n.body instanceof FormData?i=t.body:(i=JSON.stringify(n.body),r.headers["Content-Type"]="application/json"),r.body=i}const c=await fetch(a,r);if(c.ok)return await c[s]();throw await c.json()}}function dr(o){const t={baseUrl:"",headers:{},params:{},body:{},xsrfHeaderName:"X-CSRF-Token"};return typeof o=="string"?Object.assign(t,{baseUrl:o}):Object.assign(t,o),new ir(t)}function ur(o){let t=localStorage.getItem(o+"_storage");const n=e.reactive(JSON.parse(t??"{}"));e.watch(n,s);function s(){Object.keys(n).length?localStorage.setItem(o+"_storage",JSON.stringify(n)):localStorage.removeItem(o+"_storage")}function r(l,d){n[l]=d}function a(l){delete n[l]}function c(){Object.keys(n).map(l=>a(l))}return{getStore:(l,d=null)=>n.hasOwnProperty(l)?n[l]:d,setStore:r,removeStore:a,clearStore:c}}async function mr(o,t){const n=t[o];return typeof n=="function"?(await n()).default:n}function fr(o,t,n,s){const{getStore:r,setStore:a}=o,c=e.ref({}),i=e.ref(r("locale",t)),l=(m,f=t)=>{mr(m,s).then(p=>{c.value=p,a("locale",m),i.value=m,a("translations",p),Object.values(s).length>1&&(n.emit("vf-toast-push",{label:"The language is set to "+m}),n.emit("vf-language-saved"))}).catch(p=>{f?(n.emit("vf-toast-push",{label:"The selected locale is not yet supported!",type:"error"}),l(f,null)):n.emit("vf-toast-push",{label:"Locale cannot be loaded!",type:"error"})})};!r("locale")&&!s.length?l(t):c.value=r("translations");const d=(m,...f)=>f.length?d(m=m.replace("%s",f.shift()),...f):m;function u(m,...f){return c.value&&c.value.hasOwnProperty(m)?d(c.value[m],...f):d(m,...f)}return{t:u,changeLocale:l,locale:i}}const le={EDIT:"edit",NEW_FILE:"newfile",NEW_FOLDER:"newfolder",PREVIEW:"preview",ARCHIVE:"archive",UNARCHIVE:"unarchive",SEARCH:"search",RENAME:"rename",UPLOAD:"upload",DELETE:"delete",FULL_SCREEN:"fullscreen",DOWNLOAD:"download",LANGUAGE:"language"},pr=Object.values(le),vr="2.4.4";function hr(o,t,n,s,r){return(t=Math,n=t.log,s=1024,r=n(o)/n(s)|0,o/t.pow(s,r)).toFixed(0)+" "+(r?"KMGTPEZY"[--r]+"iB":"B")}function gr(o,t,n,s,r){return(t=Math,n=t.log,s=1e3,r=n(o)/n(s)|0,o/t.pow(s,r)).toFixed(0)+" "+(r?"KMGTPEZY"[--r]+"B":"B")}function kr(o){const t={k:1,m:2,g:3,t:4},s=/(\d+(?:\.\d+)?)\s?(k|m|g|t)?b?/i.exec(o);return s[1]*Math.pow(1024,t[s[2].toLowerCase()])}const Oe={SYSTEM:"system",LIGHT:"light",DARK:"dark"};function yr(o,t){const n=e.ref(Oe.SYSTEM),s=e.ref(Oe.LIGHT);n.value=o.getStore("theme",t??Oe.SYSTEM);const r=window.matchMedia("(prefers-color-scheme: dark)"),a=c=>{n.value===Oe.DARK||n.value===Oe.SYSTEM&&c.matches?s.value=Oe.DARK:s.value=Oe.LIGHT};return a(r),r.addEventListener("change",a),{value:n,actualValue:s,set(c){n.value=c,c!==Oe.SYSTEM?o.setStore("theme",c):o.removeStore("theme"),a(r)}}}function br(){const o=e.shallowRef(null),t=e.ref(!1),n=e.ref();return{visible:t,type:o,data:n,open:(a,c=null)=>{t.value=!0,o.value=a,n.value=c},close:()=>{t.value=!1,o.value=null}}}/*!
 * OverlayScrollbars
 * Version: 2.8.0
 *
 * Copyright (c) Rene Haas | KingSora.
 * https://github.com/KingSora
 *
 * Released under the MIT license.
 */const ke=(o,t)=>{const{o:n,i:s,u:r}=o;let a=n,c;const i=(u,m)=>{const f=a,p=u,v=m||(s?!s(f,p):f!==p);return(v||r)&&(a=p,c=f),[a,v,c]};return[t?u=>i(t(a,c),u):i,u=>[a,!!u,c]]},on=typeof window<"u"&&typeof document<"u",ve=on?window:{},yt=Math.max,wr=Math.min,Zt=Math.round,xt=Math.abs,Do=Math.sign,nn=ve.cancelAnimationFrame,rn=ve.requestAnimationFrame,_t=ve.setTimeout,Qt=ve.clearTimeout,Ct=o=>typeof ve[o]<"u"?ve[o]:void 0,xr=Ct("MutationObserver"),Mo=Ct("IntersectionObserver"),Et=Ct("ResizeObserver"),eo=Ct("ScrollTimeline"),sn=on&&Node.ELEMENT_NODE,{toString:_r,hasOwnProperty:Gt}=Object.prototype,Er=/^\[object (.+)\]$/,it=o=>o===void 0,Dt=o=>o===null,Sr=o=>it(o)||Dt(o)?`${o}`:_r.call(o).replace(Er,"$1").toLowerCase(),Be=o=>typeof o=="number",Mt=o=>typeof o=="string",an=o=>typeof o=="boolean",xe=o=>typeof o=="function",Ce=o=>Array.isArray(o),lt=o=>typeof o=="object"&&!Ce(o)&&!Dt(o),At=o=>{const t=!!o&&o.length,n=Be(t)&&t>-1&&t%1==0;return Ce(o)||!xe(o)&&n?t>0&&lt(o)?t-1 in o:!0:!1},St=o=>{if(!o||!lt(o)||Sr(o)!=="object")return!1;let t;const n="constructor",s=o[n],r=s&&s.prototype,a=Gt.call(o,n),c=r&&Gt.call(r,"isPrototypeOf");if(s&&!a&&!c)return!1;for(t in o);return it(t)||Gt.call(o,t)},Nt=o=>{const t=HTMLElement;return o?t?o instanceof t:o.nodeType===sn:!1},Tt=o=>{const t=Element;return o?t?o instanceof t:o.nodeType===sn:!1};function J(o,t){if(At(o))for(let n=0;n<o.length&&t(o[n],n,o)!==!1;n++);else o&&J(Object.keys(o),n=>t(o[n],n,o));return o}const Lt=(o,t)=>o.indexOf(t)>=0,Me=(o,t)=>o.concat(t),se=(o,t,n)=>(!Mt(t)&&At(t)?Array.prototype.push.apply(o,t):o.push(t),o),ze=o=>Array.from(o||[]),ln=o=>Ce(o)?o:[o],to=o=>!!o&&!o.length,Ao=o=>ze(new Set(o)),_e=(o,t,n)=>{J(o,r=>r&&r.apply(void 0,t||[])),!n&&(o.length=0)},cn="paddingTop",dn="paddingRight",un="paddingLeft",mn="paddingBottom",fn="marginLeft",pn="marginRight",vn="marginBottom",Nr="overflowX",Vr="overflowY",Xe="width",Ze="height",Fe="visible",Pe="hidden",Qe="scroll",$r=o=>{const t=String(o||"");return t?t[0].toUpperCase()+t.slice(1):""},Ot=(o,t,n,s)=>{if(o&&t){let r=!0;return J(n,a=>{const c=o[a],i=t[a];c!==i&&(r=!1)}),r}return!1},hn=(o,t)=>Ot(o,t,["w","h"]),bt=(o,t)=>Ot(o,t,["x","y"]),Br=(o,t)=>Ot(o,t,["t","r","b","l"]),Re=()=>{},U=(o,...t)=>o.bind(0,...t),Ue=o=>{let t;const n=o?_t:rn,s=o?Qt:nn;return[r=>{s(t),t=n(r,xe(o)?o():o)},()=>s(t)]},gn=(o,t)=>{let n,s,r,a=Re;const{_:c,p:i,v:l}=t||{},d=function(v){a(),Qt(n),n=s=void 0,a=Re,o.apply(this,v)},u=p=>l&&s?l(s,p):p,m=()=>{a!==Re&&d(u(r)||r)},f=function(){const v=ze(arguments),g=xe(c)?c():c;if(Be(g)&&g>=0){const x=xe(i)?i():i,h=Be(x)&&x>=0,w=g>0?_t:rn,T=g>0?Qt:nn,y=u(v)||v,N=d.bind(0,y);a();const H=w(N,g);a=()=>T(H),h&&!n&&(n=_t(m,x)),s=r=y}else d(v)};return f.S=m,f},kn=(o,t)=>Object.prototype.hasOwnProperty.call(o,t),Ae=o=>o?Object.keys(o):[],Y=(o,t,n,s,r,a,c)=>{const i=[t,n,s,r,a,c];return(typeof o!="object"||Dt(o))&&!xe(o)&&(o={}),J(i,l=>{J(l,(d,u)=>{const m=l[u];if(o===m)return!0;const f=Ce(m);if(m&&St(m)){const p=o[u];let v=p;f&&!Ce(p)?v=[]:!f&&!St(p)&&(v={}),o[u]=Y(v,m)}else o[u]=f?m.slice():m})}),o},yn=(o,t)=>J(Y({},o),(n,s,r)=>{n===void 0?delete r[s]:n&&St(n)&&(r[s]=yn(n))}),vo=o=>{for(const t in o)return!1;return!0},oo=(o,t,n)=>yt(o,wr(t,n)),qe=o=>ze(new Set((Ce(o)?o:(o||"").split(" ")).filter(t=>t))),Ht=(o,t)=>o&&o.getAttribute(t),To=(o,t)=>o&&o.hasAttribute(t),Ve=(o,t,n)=>{J(qe(t),s=>{o&&o.setAttribute(s,String(n||""))})},Ee=(o,t)=>{J(qe(t),n=>o&&o.removeAttribute(n))},Ft=(o,t)=>{const n=qe(Ht(o,t)),s=U(Ve,o,t),r=(a,c)=>{const i=new Set(n);return J(qe(a),l=>{i[c](l)}),ze(i).join(" ")};return{m:a=>s(r(a,"delete")),O:a=>s(r(a,"add")),$:a=>{const c=qe(a);return c.reduce((i,l)=>i&&n.includes(l),c.length>0)}}},bn=(o,t,n)=>(Ft(o,t).m(n),U(ho,o,t,n)),ho=(o,t,n)=>(Ft(o,t).O(n),U(bn,o,t,n)),no=(o,t,n,s)=>(s?ho:bn)(o,t,n),Cr=(o,t,n)=>Ft(o,t).$(n),wn=o=>Ft(o,"class"),xn=(o,t)=>{wn(o).m(t)},go=(o,t)=>(wn(o).O(t),U(xn,o,t)),_n=(o,t)=>{const n=[],s=t?Tt(t)&&t:document;return s?se(n,s.querySelectorAll(o)):n},Dr=(o,t)=>{const n=t?Tt(t)&&t:document;return n?n.querySelector(o):null},Vt=(o,t)=>Tt(o)?o.matches(t):!1,En=o=>Vt(o,"body"),ro=o=>o?ze(o.childNodes):[],et=o=>o&&o.parentElement,We=(o,t)=>Tt(o)&&o.closest(t),so=o=>document.activeElement,Mr=(o,t,n)=>{const s=We(o,t),r=o&&Dr(n,s),a=We(r,t)===s;return s&&r?s===o||r===o||a&&We(We(o,n),t)!==s:!1},Ie=o=>{if(At(o))J(ze(o),t=>Ie(t));else if(o){const t=et(o);t&&t.removeChild(o)}},Sn=(o,t,n)=>{if(n&&o){let s=t,r;return At(n)?(r=document.createDocumentFragment(),J(n,a=>{a===s&&(s=a.previousSibling),r.appendChild(a)})):r=n,t&&(s?s!==t&&(s=s.nextSibling):s=o.firstChild),o.insertBefore(r,s||null),()=>Ie(n)}return Re},ye=(o,t)=>Sn(o,null,t),Lo=(o,t)=>Sn(et(o),o&&o.nextSibling,t),Ye=o=>{const t=document.createElement("div");return Ve(t,"class",o),t},Nn=o=>{const t=Ye();return t.innerHTML=o.trim(),J(ro(t),n=>Ie(n))},Ar=/^--/,Oo=(o,t)=>o.getPropertyValue(t)||o[t]||"",ko=o=>{const t=o||0;return isFinite(t)?t:0},ht=o=>ko(parseFloat(o||"")),Ho=o=>`${(ko(o)*100).toFixed(3)}%`,ao=o=>`${ko(o)}px`;function ct(o,t){o&&t&&J(t,(n,s)=>{try{const r=o.style,a=Be(n)?ao(n):(n||"")+"";Ar.test(s)?r.setProperty(s,a):r[s]=a}catch{}})}function Ge(o,t,n){const s=Mt(t);let r=s?"":{};if(o){const a=ve.getComputedStyle(o,n)||o.style;r=s?Oo(a,t):ze(t).reduce((c,i)=>(c[i]=Oo(a,i),c),r)}return r}const Fo=(o,t,n)=>{const s=t?`${t}-`:"",r=n?`-${n}`:"",a=`${s}top${r}`,c=`${s}right${r}`,i=`${s}bottom${r}`,l=`${s}left${r}`,d=Ge(o,[a,c,i,l]);return{t:ht(d[a]),r:ht(d[c]),b:ht(d[i]),l:ht(d[l])}},Kt=(o,t)=>`translate${lt(o)?`(${o.x},${o.y})`:`${t?"X":"Y"}(${o})`}`,Tr=o=>!!(o.offsetWidth||o.offsetHeight||o.getClientRects().length),Lr={w:0,h:0},Rt=(o,t)=>t?{w:t[`${o}Width`],h:t[`${o}Height`]}:Lr,Or=o=>Rt("inner",o||ve),st=U(Rt,"offset"),Vn=U(Rt,"client"),$t=U(Rt,"scroll"),yo=o=>{const t=parseFloat(Ge(o,Xe))||0,n=parseFloat(Ge(o,Ze))||0;return{w:t-Zt(t),h:n-Zt(n)}},at=o=>o.getBoundingClientRect(),Hr=o=>!!o&&Tr(o),lo=o=>!!(o&&(o[Ze]||o[Xe])),$n=(o,t)=>{const n=lo(o);return!lo(t)&&n},Ro=(o,t,n,s)=>{J(qe(t),r=>{o&&o.removeEventListener(r,n,s)})},ne=(o,t,n,s)=>{var r;const a=(r=s&&s.C)!=null?r:!0,c=s&&s.H||!1,i=s&&s.A||!1,l={passive:a,capture:c};return U(_e,qe(t).map(d=>{const u=i?m=>{Ro(o,d,u,c),n&&n(m)}:n;return o&&o.addEventListener(d,u,l),U(Ro,o,d,u,c)}))},bo=o=>o.stopPropagation(),co=o=>o.preventDefault(),Fr=o=>bo(o)||co(o),$e=(o,t)=>{const{x:n,y:s}=Be(t)?{x:t,y:t}:t||{};Be(n)&&(o.scrollLeft=n),Be(s)&&(o.scrollTop=s)},we=o=>({x:o.scrollLeft,y:o.scrollTop}),Bn=()=>({I:{x:0,y:0},T:{x:0,y:0}}),Rr=(o,t)=>{const{I:n,T:s}=o,{w:r,h:a}=t,c=(m,f,p)=>{let v=Do(m)*p,g=Do(f)*p;if(v===g){const k=xt(m),x=xt(f);g=k>x?0:g,v=k<x?0:v}return[v+0,g+0]},[i,l]=c(n.x,s.x,r),[d,u]=c(n.y,s.y,a);return{I:{x:i,y:d},T:{x:l,y:u}}},Io=({I:o,T:t})=>{const n=(s,r)=>s===0&&s<=r;return{x:n(o.x,t.x),y:n(o.y,t.y)}},zo=({I:o,T:t},n)=>{const s=(r,a,c)=>oo(0,1,(r-c)/(r-a)||0);return{x:s(o.x,t.x,n.x),y:s(o.y,t.y,n.y)}},jo=(o,t)=>{J(ln(t),o)},io=o=>{const t=new Map,n=(a,c)=>{if(a){const i=t.get(a);jo(l=>{i&&i[l?"delete":"clear"](l)},c)}else t.forEach(i=>{i.clear()}),t.clear()},s=(a,c)=>{if(Mt(a)){const d=t.get(a)||new Set;return t.set(a,d),jo(u=>{xe(u)&&d.add(u)},c),U(n,a,c)}an(c)&&c&&n();const i=Ae(a),l=[];return J(i,d=>{const u=a[d];u&&se(l,s(d,u))}),U(_e,l)},r=(a,c)=>{J(ze(t.get(a)),i=>{c&&!to(c)?i.apply(0,c):i()})};return s(o||{}),[s,n,r]},Po=o=>JSON.stringify(o,(t,n)=>{if(xe(n))throw 0;return n}),Uo=(o,t)=>o?`${t}`.split(".").reduce((n,s)=>n&&kn(n,s)?n[s]:void 0,o):void 0,Ir={paddingAbsolute:!1,showNativeOverlaidScrollbars:!1,update:{elementEvents:[["img","load"]],debounce:[0,33],attributes:null,ignoreMutation:null},overflow:{x:"scroll",y:"scroll"},scrollbars:{theme:"os-theme-dark",visibility:"auto",autoHide:"never",autoHideDelay:1300,autoHideSuspend:!1,dragScroll:!0,clickScroll:!1,pointers:["mouse","touch","pen"]}},Cn=(o,t)=>{const n={},s=Me(Ae(t),Ae(o));return J(s,r=>{const a=o[r],c=t[r];if(lt(a)&&lt(c))Y(n[r]={},Cn(a,c)),vo(n[r])&&delete n[r];else if(kn(t,r)&&c!==a){let i=!0;if(Ce(a)||Ce(c))try{Po(a)===Po(c)&&(i=!1)}catch{}i&&(n[r]=c)}}),n},qo=(o,t,n)=>s=>[Uo(o,s),n||Uo(t,s)!==void 0],tt="data-overlayscrollbars",wt="os-environment",gt=`${wt}-scrollbar-hidden`,Wt=`${tt}-initialize`,Go="noClipping",Ko=`${tt}-body`,Je=tt,zr="host",He=`${tt}-viewport`,jr=Nr,Pr=Vr,Ur="arrange",wo="measuring",Dn="scrollbarHidden",qr="scrollbarPressed",Gr="noContent",uo=`${tt}-padding`,Wo=`${tt}-content`,xo="os-size-observer",Kr=`${xo}-appear`,Wr=`${xo}-listener`,Yr="os-trinsic-observer",Jr="os-theme-none",be="os-scrollbar",Xr=`${be}-rtl`,Zr=`${be}-horizontal`,Qr=`${be}-vertical`,Mn=`${be}-track`,_o=`${be}-handle`,es=`${be}-visible`,ts=`${be}-cornerless`,Yo=`${be}-interaction`,Jo=`${be}-unusable`,mo=`${be}-auto-hide`,Xo=`${mo}-hidden`,Zo=`${be}-wheel`,os=`${Mn}-interactive`,ns=`${_o}-interactive`;let Yt;const rs=()=>{const o=(h,w,T)=>{ye(document.body,h),ye(document.body,h);const V=Vn(h),y=st(h),N=yo(w);return T&&Ie(h),{x:y.h-V.h+N.h,y:y.w-V.w+N.w}},t=h=>{let w=!1;const T=go(h,gt);try{w=Ge(h,"scrollbar-width")==="none"||Ge(h,"display","::-webkit-scrollbar")==="none"}catch{}return T(),w},n=`.${wt}{scroll-behavior:auto!important;position:fixed;opacity:0;visibility:hidden;overflow:scroll;height:200px;width:200px;z-index:-1}.${wt} div{width:200%;height:200%;margin:10px 0}.${gt}{scrollbar-width:none!important}.${gt}::-webkit-scrollbar,.${gt}::-webkit-scrollbar-corner{appearance:none!important;display:none!important;width:0!important;height:0!important}`,r=Nn(`<div class="${wt}"><div></div><style>${n}</style></div>`)[0],a=r.firstChild,[c,,i]=io(),[l,d]=ke({o:o(r,a),i:bt},U(o,r,a,!0)),[u]=d(),m=t(r),f={x:u.x===0,y:u.y===0},p={elements:{host:null,padding:!m,viewport:h=>m&&En(h)&&h,content:!1},scrollbars:{slot:!0},cancel:{nativeScrollbarsOverlaid:!1,body:null}},v=Y({},Ir),g=U(Y,{},v),k=U(Y,{},p),x={D:u,k:f,R:m,M:!!eo,V:U(c,"r"),L:k,P:h=>Y(p,h)&&k(),U:g,N:h=>Y(v,h)&&g(),j:Y({},p),q:Y({},v)};if(Ee(r,"style"),Ie(r),ne(ve,"resize",()=>{i("r",[])}),xe(ve.matchMedia)&&!m&&(!f.x||!f.y)){const h=w=>{const T=ve.matchMedia(`(resolution: ${ve.devicePixelRatio}dppx)`);ne(T,"change",()=>{w(),h(w)},{A:!0})};h(()=>{const[w,T]=l();Y(x.D,w),i("r",[T])})}return x},Se=()=>(Yt||(Yt=rs()),Yt),An=(o,t)=>xe(t)?t.apply(0,o):t,ss=(o,t,n,s)=>{const r=it(s)?n:s;return An(o,r)||t.apply(0,o)},Tn=(o,t,n,s)=>{const r=it(s)?n:s,a=An(o,r);return!!a&&(Nt(a)?a:t.apply(0,o))},as=(o,t)=>{const{nativeScrollbarsOverlaid:n,body:s}=t||{},{k:r,R:a,L:c}=Se(),{nativeScrollbarsOverlaid:i,body:l}=c().cancel,d=n??i,u=it(s)?l:s,m=(r.x||r.y)&&d,f=o&&(Dt(u)?!a:u);return!!m||!!f},Eo=new WeakMap,ls=(o,t)=>{Eo.set(o,t)},cs=o=>{Eo.delete(o)},Ln=o=>Eo.get(o),is=(o,t,n)=>{let s=!1;const r=n?new WeakMap:!1,a=()=>{s=!0},c=i=>{if(r&&n){const l=n.map(d=>{const[u,m]=d||[];return[m&&u?(i||_n)(u,o):[],m]});J(l,d=>J(d[0],u=>{const m=d[1],f=r.get(u)||[];if(o.contains(u)&&m){const v=ne(u,m,g=>{s?(v(),r.delete(u)):t(g)});r.set(u,se(f,v))}else _e(f),r.delete(u)}))}};return c(),[a,c]},Qo=(o,t,n,s)=>{let r=!1;const{F:a,B:c,X:i,Y:l,W:d,J:u}=s||{},m=gn(()=>r&&n(!0),{_:33,p:99}),[f,p]=is(o,m,i),v=a||[],g=c||[],k=Me(v,g),x=(w,T)=>{if(!to(T)){const V=d||Re,y=u||Re,N=[],H=[];let M=!1,L=!1;if(J(T,D=>{const{attributeName:$,target:E,type:b,oldValue:S,addedNodes:A,removedNodes:G}=D,Q=b==="attributes",X=b==="childList",B=o===E,q=Q&&$,W=q&&Ht(E,$||"")||null,F=q&&S!==W,ee=Lt(g,$)&&F;if(t&&(X||!B)){const O=Q&&F,P=O&&l&&Vt(E,l),z=(P?!V(E,$,S,W):!Q||O)&&!y(D,!!P,o,s);J(A,_=>se(N,_)),J(G,_=>se(N,_)),L=L||z}!t&&B&&F&&!V(E,$,S,W)&&(se(H,$),M=M||ee)}),p(D=>Ao(N).reduce(($,E)=>(se($,_n(D,E)),Vt(E,D)?se($,E):$),[])),t)return!w&&L&&n(!1),[!1];if(!to(H)||M){const D=[Ao(H),M];return!w&&n.apply(0,D),D}}},h=new xr(U(x,!1));return[()=>(h.observe(o,{attributes:!0,attributeOldValue:!0,attributeFilter:k,subtree:t,childList:t,characterData:t}),r=!0,()=>{r&&(f(),h.disconnect(),r=!1)}),()=>{if(r)return m.S(),x(!0,h.takeRecords())}]},On={},Hn={},ds=o=>{J(o,t=>J(t,(n,s)=>{On[s]=t[s]}))},Fn=(o,t,n)=>Ae(o).map(s=>{const{static:r,instance:a}=o[s],[c,i,l]=n||[],d=n?a:r;if(d){const u=n?d(c,i,t):d(t);return(l||Hn)[s]=u}}),dt=o=>Hn[o],us="__osOptionsValidationPlugin",ms="__osSizeObserverPlugin",fs=(o,t)=>{const{k:n}=t,[s,r]=o("showNativeOverlaidScrollbars");return[s&&n.x&&n.y,r]},Bt=o=>o.indexOf(Fe)===0,ps=(o,t)=>{const n=(r,a,c,i)=>{const l=r===Fe?Pe:r.replace(`${Fe}-`,""),d=Bt(r),u=Bt(c);return!a&&!i?Pe:d&&u?Fe:d?a&&i?l:a?Fe:Pe:a?l:u&&i?Fe:Pe},s={x:n(t.x,o.x,t.y,o.y),y:n(t.y,o.y,t.x,o.x)};return{K:s,G:{x:s.x===Qe,y:s.y===Qe}}},Rn="__osScrollbarsHidingPlugin",vs="__osClickScrollPlugin",In=(o,t,n)=>{const{dt:s}=n||{},r=dt(ms),[a]=ke({o:!1,u:!0});return()=>{const c=[],l=Nn(`<div class="${xo}"><div class="${Wr}"></div></div>`)[0],d=l.firstChild,u=m=>{const f=m instanceof ResizeObserverEntry;let p=!1,v=!1;if(f){const[g,,k]=a(m.contentRect),x=lo(g);v=$n(g,k),p=!v&&!x}else v=m===!0;p||t({_t:!0,dt:v})};if(Et){const m=new Et(f=>u(f.pop()));m.observe(d),se(c,()=>{m.disconnect()})}else if(r){const[m,f]=r(d,u,s);se(c,Me([go(l,Kr),ne(l,"animationstart",m)],f))}else return Re;return U(_e,se(c,ye(o,l)))}},hs=(o,t)=>{let n;const s=l=>l.h===0||l.isIntersecting||l.intersectionRatio>0,r=Ye(Yr),[a]=ke({o:!1}),c=(l,d)=>{if(l){const u=a(s(l)),[,m]=u;return m&&!d&&t(u)&&[u]}},i=(l,d)=>c(d.pop(),l);return[()=>{const l=[];if(Mo)n=new Mo(U(i,!1),{root:o}),n.observe(r),se(l,()=>{n.disconnect()});else{const d=()=>{const u=st(r);c(u)};se(l,In(r,d)()),d()}return U(_e,se(l,ye(o,r)))},()=>n&&i(!0,n.takeRecords())]},gs=(o,t,n,s)=>{let r,a,c,i,l,d;const{R:u}=Se(),m=`[${Je}]`,f=`[${He}]`,p=["tabindex"],v=["wrap","cols","rows"],g=["id","class","style","open"],{ft:k,vt:x,nt:h,ht:w,gt:T,bt:V,tt:y,wt:N,yt:H}=o,M=_=>Ge(_,"direction")==="rtl",L={St:!1,et:M(k)},D=Se(),$=dt(Rn),[E]=ke({i:hn,o:{w:0,h:0}},()=>{const _=$&&$.Z(o,t,L,D,n).it,C=!y&&N(Ur),j=C&&we(w),I=H(wo,!0),K=C&&_&&_()[0],oe=$t(T),ie=$t(h),de=yo(h);return K&&K(),$e(w,j),I(),{w:ie.w+oe.w+de.w,h:ie.h+oe.h+de.h}}),b=V?v:Me(g,v),S=gn(s,{_:()=>r,p:()=>a,v(_,C){const[j]=_,[I]=C;return[Me(Ae(j),Ae(I)).reduce((K,oe)=>(K[oe]=j[oe]||I[oe],K),{})]}}),A=_=>{const C=M(k);Y(_,{Ot:d!==C}),Y(L,{et:C}),d=C},G=_=>{J(_||p,C=>{if(Lt(p,C)){const j=Ht(x,C);Mt(j)?Ve(h,C,j):Ee(h,C)}})},Q=(_,C)=>{const[j,I]=_,K={$t:I};return Y(L,{St:j}),!C&&s(K),K},X=({_t:_,dt:C})=>{const I=!(_&&!C)&&u?S:s,K={_t:_||C,dt:C};A(K),I(K)},B=(_,C)=>{const[,j]=E(),I={Ct:j};return A(I),j&&!C&&(_?s:S)(I),I},q=(_,C,j)=>{const I={xt:C};return A(I),C&&!j?S(I):y||G(_),I},{V:W}=D,[F,ee]=T?hs(x,Q):[],O=!y&&In(x,X,{dt:!0}),[P,R]=Qo(x,!1,q,{B:g,F:Me(g,p)}),z=y&&Et&&new Et(_=>{const C=_[_.length-1].contentRect;X({_t:!0,dt:$n(C,l)}),l=C});return[()=>{G(),z&&z.observe(x);const _=O&&O(),C=F&&F(),j=P(),I=W(K=>{const[,oe]=E();S({Ht:K,Ct:oe})});return()=>{z&&z.disconnect(),_&&_(),C&&C(),i&&i(),j(),I()}},({Et:_,zt:C,At:j})=>{const I={},[K]=_("update.ignoreMutation"),[oe,ie]=_("update.attributes"),[de,Z]=_("update.elementEvents"),[ae,he]=_("update.debounce"),me=Z||ie,ue=C||j,fe=ce=>xe(K)&&K(ce);if(me){c&&c(),i&&i();const[ce,re]=Qo(T||h,!0,B,{F:Me(b,oe||[]),X:de,Y:m,J:(te,ge)=>{const{target:pe,attributeName:je}=te;return(!ge&&je&&!y?Mr(pe,m,f):!1)||!!We(pe,`.${be}`)||!!fe(te)}});i=ce(),c=re}if(he)if(S.S(),Ce(ae)){const ce=ae[0],re=ae[1];r=Be(ce)&&ce,a=Be(re)&&re}else Be(ae)?(r=ae,a=!1):(r=!1,a=!1);if(ue){const ce=R(),re=ee&&ee(),te=c&&c();ce&&Y(I,q(ce[0],ce[1],ue)),re&&Y(I,Q(re[0],ue)),te&&Y(I,B(te[0],ue))}return A(I),I},L]},ks=(o,t,n,s)=>{const{L:r}=Se(),{scrollbars:a}=r(),{slot:c}=a,{ft:i,vt:l,nt:d,It:u,ht:m,Tt:f,tt:p}=t,{scrollbars:v}=u?{}:o,{slot:g}=v||{},k=new Map,x=O=>eo&&new eo({source:m,axis:O}),h={x:x("x"),y:x("y")},w=Tn([i,l,d],()=>p&&f?i:l,c,g),T=(O,P)=>{if(P){const I=O?Xe:Ze,{Dt:K,kt:oe}=P,ie=at(oe)[I],de=at(K)[I];return oo(0,1,ie/de||0)}const R=O?"x":"y",{Rt:z,Mt:_}=n,C=_[R],j=z[R];return oo(0,1,C/(C+j)||0)},V=(O,P,R)=>{const z=T(R,O);return 1/z*(1-z)*P},y=O=>Y(O,{clear:["left"]}),N=O=>{k.forEach((P,R)=>{(O?Lt(ln(O),R):!0)&&(J(P||[],_=>{_&&_.cancel()}),k.delete(R))})},H=(O,P,R,z)=>{const _=k.get(O)||[],C=_.find(j=>j&&j.timeline===P);C?C.effect=new KeyframeEffect(O,R,{composite:z}):k.set(O,Me(_,[O.animate(R,{timeline:P,composite:z})]))},M=(O,P,R)=>{const z=R?go:xn;J(O,_=>{z(_.Vt,P)})},L=(O,P)=>{J(O,R=>{const[z,_]=P(R);ct(z,_)})},D=(O,P)=>{L(O,R=>{const{kt:z}=R;return[z,{[P?Xe:Ze]:Ho(T(P))}]})},$=(O,P)=>{const{Lt:R}=n,z=P?"x":"y",_=h[z],C=Io(R)[z],j=(I,K)=>Kt(Ho(V(I,C?K:1-K,P)),P);_?J(O,I=>{const{kt:K}=I;H(K,_,y({transform:[0,1].map(oe=>j(I,oe))}))}):L(O,I=>[I.kt,{transform:j(I,zo(R,we(m))[z])}])},E=O=>p&&!f&&et(O)===d,b=[],S=[],A=[],G=(O,P,R)=>{const z=an(R),_=z?R:!0,C=z?!R:!0;_&&M(S,O,P),C&&M(A,O,P)},Q=()=>{D(S,!0),D(A)},X=()=>{$(S,!0),$(A)},B=()=>{if(p){const{Rt:O,Lt:P}=n,R=Io(P),z=.5;if(h.x&&h.y)J(Me(A,S),({Vt:_})=>{if(E(_)){const C=j=>H(_,h[j],y({transform:[0,R[j]?1:-1].map(I=>Kt(ao(I*(O[j]-z)),j==="x"))}),"add");C("x"),C("y")}else N(_)});else{const _=zo(P,we(m)),C=j=>{const{Vt:I}=j,K=E(I)&&I,oe=(ie,de,Z)=>{const ae=de*ie;return ao(Z?ae:-ae)};return[K,K&&{transform:Kt({x:oe(_.x,O.x,R.x),y:oe(_.y,O.y,R.y)})}]};L(S,C),L(A,C)}}},q=O=>{const R=Ye(`${be} ${O?Zr:Qr}`),z=Ye(Mn),_=Ye(_o),C={Vt:R,Dt:z,kt:_};return se(O?S:A,C),se(b,[ye(R,z),ye(z,_),U(Ie,R),N,s(C,G,$,O)]),C},W=U(q,!0),F=U(q,!1),ee=()=>(ye(w,S[0].Vt),ye(w,A[0].Vt),U(_e,b));return W(),F(),[{Pt:Q,Ut:X,Nt:B,jt:G,qt:{M:h.x,Ft:S,Bt:W,Xt:U(L,S)},Yt:{M:h.y,Ft:A,Bt:F,Xt:U(L,A)}},ee]},ys=(o,t,n,s)=>(r,a,c,i)=>{const{vt:l,nt:d,tt:u,ht:m,Wt:f,yt:p}=t,{Vt:v,Dt:g,kt:k}=r,[x,h]=Ue(333),[w,T]=Ue(444),[V,y]=Ue(),N=U(c,[r],i),H=E=>{xe(m.scrollBy)&&m.scrollBy({behavior:"smooth",left:E.x,top:E.y})},M=i?Xe:Ze,L=()=>{const E="pointerup pointercancel lostpointercapture",b=`client${i?"X":"Y"}`,S=i?"left":"top",A=i?"w":"h",G=i?"x":"y",Q=(X,B)=>q=>{const{Rt:W}=n,F=st(g)[A]-st(k)[A],O=B*q/F*W[G];$e(m,{[G]:X+O})};return ne(g,"pointerdown",X=>{const B=We(X.target,`.${_o}`)===k,q=B?k:g,W=o.scrollbars,{button:F,isPrimary:ee,pointerType:O}=X,{pointers:P}=W;if(F===0&&ee&&W[B?"dragScroll":"clickScroll"]&&(P||[]).includes(O)){T();const z=!B&&X.shiftKey,_=U(at,k),C=U(at,g),j=(te,ge)=>(te||_())[S]-(ge||C())[S],I=Zt(at(m)[M])/st(m)[A]||1,K=Q(we(m)[G],1/I),oe=X[b],ie=_(),de=C(),Z=ie[M],ae=j(ie,de)+Z/2,he=oe-de[S],me=B?0:he-ae,ue=te=>{_e(re),q.releasePointerCapture(te.pointerId)},fe=()=>p(qr,!0),ce=fe(),re=[()=>{const te=we(m);ce();const ge=we(m),pe={x:ge.x-te.x,y:ge.y-te.y};(xt(pe.x)>3||xt(pe.y)>3)&&(fe(),$e(m,te),H(pe),w(ce))},ne(f,E,ue),ne(f,"selectstart",te=>co(te),{C:!1}),ne(g,E,ue),ne(g,"pointermove",te=>{const ge=te[b]-oe;(B||z)&&K(me+ge)})];if(q.setPointerCapture(X.pointerId),z)K(me);else if(!B){const te=dt(vs);te&&se(re,te(K,j,me,Z,he))}}})};let D=!0;const $=E=>E.propertyName.indexOf(M)>-1;return U(_e,[ne(k,"pointermove pointerleave",s),ne(v,"pointerenter",()=>{a(Yo,!0)}),ne(v,"pointerleave pointercancel",()=>{a(Yo,!1)}),!u&&ne(v,"mousedown",()=>{const E=so();(To(E,He)||To(E,Je)||E===document.body)&&_t(()=>{d.focus({preventScroll:!0})},25)}),ne(v,"wheel",E=>{const{deltaX:b,deltaY:S,deltaMode:A}=E;D&&A===0&&et(v)===l&&H({x:b,y:S}),D=!1,a(Zo,!0),x(()=>{D=!0,a(Zo)}),co(E)},{C:!1,H:!0}),ne(k,"transitionstart",E=>{if($(E)){const b=()=>{N(),V(b)};b()}}),ne(k,"transitionend transitioncancel",E=>{$(E)&&(y(),N())}),ne(v,"pointerdown",U(ne,f,"click",Fr,{A:!0,H:!0,C:!1}),{H:!0}),L(),h,T,y])},bs=(o,t,n,s,r,a)=>{let c,i,l,d,u,m=Re,f=0;const p=B=>B.pointerType==="mouse",[v,g]=Ue(),[k,x]=Ue(100),[h,w]=Ue(100),[T,V]=Ue(()=>f),[y,N]=ks(o,r,s,ys(t,r,s,B=>p(B)&&A())),{vt:H,Jt:M,Tt:L}=r,{jt:D,Pt:$,Ut:E,Nt:b}=y,S=(B,q)=>{if(V(),B)D(Xo);else{const W=U(D,Xo,!0);f>0&&!q?T(W):W()}},A=()=>{(l?!c:!d)&&(S(!0),k(()=>{S(!1)}))},G=B=>{D(mo,B,!0),D(mo,B,!1)},Q=B=>{p(B)&&(c=l,l&&S(!0))},X=[V,x,w,g,()=>m(),ne(H,"pointerover",Q,{A:!0}),ne(H,"pointerenter",Q),ne(H,"pointerleave",B=>{p(B)&&(c=!1,l&&S(!1))}),ne(H,"pointermove",B=>{p(B)&&i&&A()}),ne(M,"scroll",B=>{v(()=>{E(),A()}),a(B),b()})];return[()=>U(_e,se(X,N())),({Et:B,At:q,Kt:W,Gt:F})=>{const{Qt:ee,Zt:O,tn:P,nn:R}=F||{},{Ot:z,dt:_}=W||{},{et:C}=n,{k:j}=Se(),{K:I,sn:K}=s,[oe,ie]=B("showNativeOverlaidScrollbars"),[de,Z]=B("scrollbars.theme"),[ae,he]=B("scrollbars.visibility"),[me,ue]=B("scrollbars.autoHide"),[fe,ce]=B("scrollbars.autoHideSuspend"),[re]=B("scrollbars.autoHideDelay"),[te,ge]=B("scrollbars.dragScroll"),[pe,je]=B("scrollbars.clickScroll"),[ot,It]=B("overflow"),zt=_&&!q,jt=K.x||K.y,Ne=ee||O||R||z||q,Pt=P||he||It,ut=oe&&j.x&&j.y,mt=(Le,nt,ft)=>{const pt=Le.includes(Qe)&&(ae===Fe||ae==="auto"&&nt===Qe);return D(es,pt,ft),pt};if(f=re,zt&&(fe&&jt?(G(!1),m(),h(()=>{m=ne(M,"scroll",U(G,!0),{A:!0})})):G(!0)),ie&&D(Jr,ut),Z&&(D(u),D(de,!0),u=de),ce&&!fe&&G(!0),ue&&(i=me==="move",l=me==="leave",d=me==="never",S(d,!0)),ge&&D(ns,te),je&&D(os,pe),Pt){const Le=mt(ot.x,I.x,!0),nt=mt(ot.y,I.y,!1);D(ts,!(Le&&nt))}Ne&&($(),E(),b(),D(Jo,!K.x,!0),D(Jo,!K.y,!1),D(Xr,C&&!L))},{},y]},ws=o=>{const t=Se(),{L:n,R:s}=t,{elements:r}=n(),{host:a,padding:c,viewport:i,content:l}=r,d=Nt(o),u=d?{}:o,{elements:m}=u,{host:f,padding:p,viewport:v,content:g}=m||{},k=d?o:u.target,x=En(k),h=Vt(k,"textarea"),w=k.ownerDocument,T=w.documentElement,V=()=>w.defaultView||ve,y=Z=>{Z&&Z.focus&&Z.focus({preventScroll:!0})},N=U(ss,[k]),H=U(Tn,[k]),M=U(Ye,""),L=U(N,M,i),D=U(H,M,l),$=L(v),E=$===k,b=E&&x,S=!E&&D(g),A=!E&&$===S,G=b?T:$,Q=h?N(M,a,f):k,X=b?G:Q,B=!E&&H(M,c,p),q=!A&&S,W=[q,G,B,X].map(Z=>Nt(Z)&&!et(Z)&&Z),F=Z=>Z&&Lt(W,Z),ee=F(G)?k:G,O={ft:k,vt:X,nt:G,en:B,gt:q,ht:b?T:G,Jt:b?w:G,cn:x?T:ee,Wt:w,bt:h,Tt:x,It:d,tt:E,rn:V,wt:Z=>Cr(G,He,Z),yt:(Z,ae)=>no(G,He,Z,ae)},{ft:P,vt:R,en:z,nt:_,gt:C}=O,j=[()=>{Ee(R,[Je,Wt]),Ee(P,Wt),x&&Ee(T,[Wt,Je])}],I=h&&F(R);let K=h?P:ro([C,_,z,R,P].find(Z=>Z&&!F(Z)));const oe=b?P:C||_,ie=U(_e,j);return[O,()=>{const Z=V(),ae=so(),he=re=>{ye(et(re),ro(re)),Ie(re)},me=re=>ne(re,"focusin focusout focus blur",bo,{H:!0}),ue="tabindex",fe=Ht(_,ue),ce=me(ae);return Ve(R,Je,E?"":zr),Ve(z,uo,""),Ve(_,He,""),Ve(C,Wo,""),E||(Ve(_,ue,fe||"-1"),x&&Ve(T,Ko,"")),I&&(Lo(P,R),se(j,()=>{Lo(R,P),Ie(R)})),ye(oe,K),ye(R,z),ye(z||R,!E&&_),ye(_,C),se(j,[ce,()=>{const re=so(),te=me(re);Ee(z,uo),Ee(C,Wo),Ee(_,He),x&&Ee(T,Ko),fe?Ve(_,ue,fe):Ee(_,ue),F(C)&&he(C),F(_)&&he(_),F(z)&&he(z),y(re),te()}]),s&&!E&&(ho(_,He,Dn),se(j,U(Ee,_,He))),y(!E&&ae===k&&Z.top===Z?_:ae),ce(),K=0,ie},ie]},xs=({gt:o})=>({Kt:t,ln:n,At:s})=>{const{$t:r}=t||{},{St:a}=n;o&&(r||s)&&ct(o,{[Ze]:a&&"100%"})},_s=({vt:o,en:t,nt:n,tt:s},r)=>{const[a,c]=ke({i:Br,o:Fo()},U(Fo,o,"padding",""));return({Et:i,Kt:l,ln:d,At:u})=>{let[m,f]=c(u);const{R:p}=Se(),{_t:v,Ct:g,Ot:k}=l||{},{et:x}=d,[h,w]=i("paddingAbsolute");(v||f||(u||g))&&([m,f]=a(u));const V=!s&&(w||k||f);if(V){const y=!h||!t&&!p,N=m.r+m.l,H=m.t+m.b,M={[pn]:y&&!x?-N:0,[vn]:y?-H:0,[fn]:y&&x?-N:0,top:y?-m.t:0,right:y?x?-m.r:"auto":0,left:y?x?"auto":-m.l:0,[Xe]:y&&`calc(100% + ${N}px)`},L={[cn]:y?m.t:0,[dn]:y?m.r:0,[mn]:y?m.b:0,[un]:y?m.l:0};ct(t||n,M),ct(n,L),Y(r,{en:m,an:!y,ct:t?L:Y({},M,L)})}return{un:V}}},Es=(o,t)=>{const n=Se(),{vt:s,en:r,nt:a,tt:c,ht:i,Tt:l,yt:d,rn:u}=o,{R:m}=n,f=l&&c,p=U(yt,0),v=["display","direction","flexDirection","writingMode"],g={i:hn,o:{w:0,h:0}},k={i:bt,o:{}},x=(B,q)=>{const W=ve.devicePixelRatio%1!==0?1:0,F={w:p(B.w-q.w),h:p(B.h-q.h)};return{w:F.w>W?F.w:0,h:F.h>W?F.h:0}},h=()=>{const B=we(i),q=d(Gr,!0),W=ne(i,Qe,bo,{H:!0});$e(i,{x:0,y:0}),q();const F=we(i),ee=$t(i);$e(i,{x:ee.w,y:ee.h});const O=we(i);$e(i,{x:O.x-F.x<1&&-ee.w,y:O.y-F.y<1&&-ee.h});const P=we(i);return $e(i,B),W(),{I:F,T:P}},w=()=>Y({},Hr(a)?Ge(a,v):{}),[T,V]=ke(g,U(yo,a)),[y,N]=ke(g,U($t,a)),[H,M]=ke(g),[L]=ke(k),[D,$]=ke(g),[E]=ke(k),[b]=ke({i:(B,q)=>Ot(B,q,v),o:{}}),[S,A]=ke({i:(B,q)=>bt(B.I,q.I)&&bt(B.T,q.T),o:Bn()}),G=dt(Rn),Q=(B,q)=>`${q?jr:Pr}${$r(B)}`,X=B=>{const{K:q}=B;J(Ae(q),W=>{const F=W==="x",ee=[Fe,Pe,Qe].map(O=>Q(O,F));d(ee.join(" ")),d(Q(q[W],F),!0)})};return({Et:B,Kt:q,ln:W,At:F},{un:ee})=>{const{_t:O,Ct:P,Ot:R,dt:z,Ht:_}=q||{},C=G&&G.Z(o,t,W,n,B),{lt:j,it:I,ut:K}=C||{},[oe,ie]=fs(B,n),[de,Z]=B("overflow"),ae=Bt(de.x),he=Bt(de.y),me=O||ee||P||R||_||ie;let ue=V(F),fe=N(F),ce=M(F),re=$(F);if(ie&&m&&d(Dn,!oe),me){const[So]=I?I():[],[vt]=ue=T(F),[rt]=fe=y(F),Ut=Vn(a),No=rt,Vo=Ut;So&&So();const $o=Or(u()),er={w:p(yt(rt.w,No.w)+vt.w),h:p(yt(rt.h,No.h)+vt.h)},Bo={w:p((f?$o.w:Vo.w+p(Ut.w-rt.w))+vt.w),h:p((f?$o.h:Vo.h+p(Ut.h-rt.h))+vt.h)};re=D(Bo),ce=H(x(er,Bo),F)}const[te,ge]=re,[pe,je]=ce,[ot,It]=fe,[zt,jt]=ue,[Ne,Pt]=L({x:pe.w>0,y:pe.h>0}),ut=ae&&he&&(Ne.x||Ne.y)||ae&&Ne.x&&!Ne.y||he&&Ne.y&&!Ne.x,mt=ee||R||_||jt||It||ge||je||Z||ie||me,Le=ps(Ne,de),[nt,ft]=E(Le.K),[,pt]=b(w(),F),Xn=R||z||pt||Pt||F,[Zn,Qn]=Xn?S(h(),F):A();return mt&&(X(Le),K&&j&&ct(a,K(Le,W,j(Le,ot,zt)))),no(s,Je,Go,ut),no(r,uo,Go,ut),Y(t,{K:nt,Mt:{x:te.w,y:te.h},Rt:{x:pe.w,y:pe.h},sn:Ne,Lt:Rr(Zn,pe)}),{tn:ft,Qt:ge,Zt:je,nn:Qn||je}}},Ss=o=>{const[t,n,s]=ws(o),r={en:{t:0,r:0,b:0,l:0},an:!1,ct:{[pn]:0,[vn]:0,[fn]:0,[cn]:0,[dn]:0,[mn]:0,[un]:0},Mt:{x:0,y:0},Rt:{x:0,y:0},K:{x:Pe,y:Pe},sn:{x:!1,y:!1},Lt:Bn()},{ft:a,ht:c,tt:i,yt:l}=t,{R:d,k:u}=Se(),m=!d&&(u.x||u.y),f=[xs(t),_s(t,r),Es(t,r)];return[n,p=>{const v={},g=m,k=l(wo,!0),x=g&&we(c);return J(f,h=>{Y(v,h(p,v)||{})}),$e(c,x),!i&&$e(a,0),k(),v},r,t,s]},Ns=(o,t,n,s)=>{const r=qo(t,{}),[a,c,i,l,d]=Ss(o),[u,m,f]=gs(l,i,r,h=>{x({},h)}),[p,v,,g]=bs(o,t,f,i,l,s),k=h=>Ae(h).some(w=>!!h[w]),x=(h,w)=>{const{dn:T,At:V,zt:y,_n:N}=h,H=T||{},M=!!V,L={Et:qo(t,H,M),dn:H,At:M};if(N)return v(L),!1;const D=w||m(Y({},L,{zt:y})),$=c(Y({},L,{ln:f,Kt:D}));v(Y({},L,{Kt:D,Gt:$}));const E=k(D),b=k($),S=E||b||!vo(H)||M;return S&&n(h,{Kt:D,Gt:$}),S};return[()=>{const{cn:h,ht:w,yt:T}=l,V=T(wo,!0),y=we(h),N=[u(),a(),p()];return $e(w,y),V(),U(_e,N)},x,()=>({fn:f,pn:i}),{vn:l,hn:g},d]},Ke=(o,t,n)=>{const{U:s}=Se(),r=Nt(o),a=r?o:o.target,c=Ln(a);if(t&&!c){let i=!1;const l=[],d={},u=L=>{const D=yn(L),$=dt(us);return $?$(D,!0):D},m=Y({},s(),u(t)),[f,p,v]=io(),[g,k,x]=io(n),h=(L,D)=>{x(L,D),v(L,D)},[w,T,V,y,N]=Ns(o,m,({dn:L,At:D},{Kt:$,Gt:E})=>{const{_t:b,Ot:S,$t:A,Ct:G,xt:Q,dt:X}=$,{Qt:B,Zt:q,tn:W,nn:F}=E;h("updated",[M,{updateHints:{sizeChanged:!!b,directionChanged:!!S,heightIntrinsicChanged:!!A,overflowEdgeChanged:!!B,overflowAmountChanged:!!q,overflowStyleChanged:!!W,scrollCoordinatesChanged:!!F,contentMutation:!!G,hostMutation:!!Q,appear:!!X},changedOptions:L||{},force:!!D}])},L=>h("scroll",[M,L])),H=L=>{cs(a),_e(l),i=!0,h("destroyed",[M,L]),p(),k()},M={options(L,D){if(L){const $=D?s():{},E=Cn(m,Y($,u(L)));vo(E)||(Y(m,E),T({dn:E}))}return Y({},m)},on:g,off:(L,D)=>{L&&D&&k(L,D)},state(){const{fn:L,pn:D}=V(),{et:$}=L,{Mt:E,Rt:b,K:S,sn:A,en:G,an:Q,Lt:X}=D;return Y({},{overflowEdge:E,overflowAmount:b,overflowStyle:S,hasOverflow:A,scrollCoordinates:{start:X.I,end:X.T},padding:G,paddingAbsolute:Q,directionRTL:$,destroyed:i})},elements(){const{ft:L,vt:D,en:$,nt:E,gt:b,ht:S,Jt:A}=y.vn,{qt:G,Yt:Q}=y.hn,X=q=>{const{kt:W,Dt:F,Vt:ee}=q;return{scrollbar:ee,track:F,handle:W}},B=q=>{const{Ft:W,Bt:F}=q,ee=X(W[0]);return Y({},ee,{clone:()=>{const O=X(F());return T({_n:!0}),O}})};return Y({},{target:L,host:D,padding:$||E,viewport:E,content:b||E,scrollOffsetElement:S,scrollEventElement:A,scrollbarHorizontal:B(G),scrollbarVertical:B(Q)})},update:L=>T({At:L,zt:!0}),destroy:U(H,!1),plugin:L=>d[Ae(L)[0]]};return se(l,[N]),ls(a,M),Fn(On,Ke,[M,f,d]),as(y.vn.Tt,!r&&o.cancel)?(H(!0),M):(se(l,w()),h("initialized",[M]),M.update(!0),M)}return c};Ke.plugin=o=>{const t=Ce(o),n=t?o:[o],s=n.map(r=>Fn(r,Ke)[0]);return ds(n),t?s:s[0]};Ke.valid=o=>{const t=o&&o.elements,n=xe(t)&&t();return St(n)&&!!Ln(n.target)};Ke.env=()=>{const{D:o,k:t,R:n,M:s,j:r,q:a,L:c,P:i,U:l,N:d}=Se();return Y({},{scrollbarsSize:o,scrollbarsOverlaid:t,scrollbarsHiding:n,scrollTimeline:s,staticDefaultInitialization:r,staticDefaultOptions:a,getDefaultInitialization:c,setDefaultInitialization:i,getDefaultOptions:l,setDefaultOptions:d})};function Vs(){let o;const t=e.ref(null),n=Math.floor(Math.random()*2**32),s=e.ref(!1),r=e.ref([]),a=()=>r.value,c=()=>o.getSelection(),i=()=>r.value.length,l=()=>o.clearSelection(!0),d=e.ref(),u=e.ref(null),m=e.ref(null),f=e.ref(null);function p(){o=new rr({area:t.value,keyboardDrag:!1,selectedClass:"vf-explorer-selected",selectorClass:"vf-explorer-selector"}),o.subscribe("DS:start:pre",({items:h,event:w,isDragging:T})=>{if(T)o.Interaction._reset(w);else{s.value=!1;const V=t.value.offsetWidth-w.offsetX,y=t.value.offsetHeight-w.offsetY;V<15&&y<15&&o.Interaction._reset(w),w.target.classList.contains("os-scrollbar-handle")&&o.Interaction._reset(w)}}),document.addEventListener("dragleave",h=>{!h.buttons&&s.value&&(s.value=!1)})}const v=()=>e.nextTick(()=>{const h=a().map(w=>w.path);l(),o.setSettings({selectables:document.getElementsByClassName("vf-item-"+n)}),o.addSelection(o.getSelectables().filter(w=>h.includes(JSON.parse(w.dataset.item).path))),r.value=o.getSelection().map(w=>JSON.parse(w.dataset.item)),d.value(r.value),k()}),g=h=>{d.value=h,o.subscribe("DS:end",({items:w,event:T,isDragging:V})=>{r.value=w.map(y=>JSON.parse(y.dataset.item)),h(w.map(y=>JSON.parse(y.dataset.item)))})},k=()=>{u.value&&(t.value.getBoundingClientRect().height<t.value.scrollHeight?(m.value.style.height=t.value.scrollHeight+"px",m.value.style.display="block"):(m.value.style.height="100%",m.value.style.display="none"))},x=h=>{if(!u.value)return;const{scrollOffsetElement:w}=u.value.elements();w.scrollTo({top:t.value.scrollTop,left:0})};return e.onMounted(()=>{Ke(f.value,{scrollbars:{theme:"vf-theme-dark dark:vf-theme-light"},plugins:{OverlayScrollbars:Ke}},{initialized:h=>{u.value=h},scroll:(h,w)=>{const{scrollOffsetElement:T}=h.elements();t.value.scrollTo({top:T.scrollTop,left:0})}}),p(),k(),new ResizeObserver(k).observe(t.value),t.value.addEventListener("scroll",x),o.subscribe("DS:scroll",({isDragging:h})=>h||x())}),e.onUnmounted(()=>{o&&o.stop()}),e.onUpdated(()=>{o&&o.Area.reset()}),{area:t,explorerId:n,isDraggingRef:s,scrollBar:m,scrollBarContainer:f,getSelected:a,getSelection:c,clearSelection:l,refreshSelection:v,getCount:i,onSelect:g}}function $s(o,t){const n=e.ref(o),s=e.ref(t),r=e.ref([]),a=e.ref([]),c=e.ref([]),i=e.ref(!1),l=e.ref(5);let d=!1,u=!1;const m=e.reactive({adapter:n,storages:[],dirname:s,files:[]});function f(){let h=[],w=[],T=s.value??n.value+"://";T.length===0&&(r.value=[]),T.replace(n.value+"://","").split("/").forEach(function(N){h.push(N),h.join("/")!==""&&w.push({basename:N,name:N,path:n.value+"://"+h.join("/"),type:"dir"})}),a.value=w;const[V,y]=v(w,l.value);c.value=y,r.value=V}function p(h){l.value=h,f()}function v(h,w){return h.length>w?[h.slice(-w),h.slice(0,-w)]:[h,[]]}function g(h=null){i.value=h??!i.value}function k(){return r.value&&r.value.length&&!u}const x=e.computed(()=>{var h;return((h=r.value[r.value.length-2])==null?void 0:h.path)??n.value+"://"});return e.onMounted(()=>{}),e.watch(s,f),e.onMounted(f),{adapter:n,path:s,loading:d,searchMode:u,data:m,breadcrumbs:r,breadcrumbItems:a,limitBreadcrumbItems:p,hiddenBreadcrumbs:c,showHiddenBreadcrumbs:i,toggleHiddenBreadcrumbs:g,isGoUpAvailable:k,parentFolderPath:x}}const Bs=(o,t)=>{const n=ur(o.id),s=nr(),r=n.getStore("metricUnits",!1),a=yr(n,o.theme),c=t.i18n,i=o.locale??t.locale,l=n.getStore("adapter"),d=f=>Array.isArray(f)?f:pr,u=n.getStore("persist-path",o.persist),m=u?n.getStore("path",o.path):o.path;return e.reactive({version:vr,root:null,debug:o.debug,emitter:s,storage:n,i18n:e.computed(()=>fr(n,i,s,c)),modal:br(),dragSelect:e.computed(()=>Vs()),requester:dr(o.request),features:d(o.features),view:n.getStore("viewport","grid"),fullscreen:!1,selectButton:o.selectButton,maxFileSize:o.maxFileSize,theme:a,metricUnits:r,filesize:r?gr:hr,compactListView:n.getStore("compact-list-view",!0),persist:u,showThumbnails:n.getStore("show-thumbnails",o.showThumbnails),fs:$s(l,m)})},Cs=e.createElementVNode("div",{class:"fixed inset-0 bg-gray-500 dark:bg-gray-600 dark:bg-opacity-75 bg-opacity-75 transition-opacity"},null,-1),Ds={class:"fixed z-10 inset-0 overflow-hidden"},Ms={class:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},As={class:"bg-gray-50 dark:bg-gray-800 dark:border-t dark:border-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Te={__name:"ModalLayout",setup(o){const t=e.ref(null),n=e.inject("ServiceContainer");return e.onMounted(()=>{const s=document.querySelector(".v-f-modal input");s&&s.focus(),e.nextTick(()=>{if(document.querySelector(".v-f-modal input")&&window.innerWidth<768){const r=t.value.getBoundingClientRect().bottom+16;window.scrollTo({top:r,left:0,behavior:"smooth"})}})}),(s,r)=>(e.openBlock(),e.createElementBlock("div",{class:"v-f-modal relative z-30","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",onKeyup:r[1]||(r[1]=e.withKeys(a=>e.unref(n).modal.close(),["esc"])),tabindex:"0"},[Cs,e.createElementVNode("div",Ds,[e.createElementVNode("div",{class:"flex items-end sm:items-center justify-center min-h-full p-4 text-center sm:p-0",onMousedown:r[0]||(r[0]=e.withModifiers(a=>e.unref(n).modal.close(),["self"]))},[e.createElementVNode("div",{ref_key:"modalBody",ref:t,class:"relative bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:max-w-4xl md:max-w-2xl lg:max-w-3xl xl:max-w-3xl w-full"},[e.createElementVNode("div",Ms,[e.renderSlot(s.$slots,"default")]),e.createElementVNode("div",As,[e.renderSlot(s.$slots,"buttons")])],512)],32)])],32))}},Ts=["aria-label"],Ls=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),Os=[Ls],De={__name:"Message",props:{error:{type:Boolean,default:!1}},emits:["hidden"],setup(o,{emit:t}){var d;const n=t,s=e.inject("ServiceContainer"),{t:r}=s.i18n,a=e.ref(!1),c=e.ref(null),i=e.ref((d=c.value)==null?void 0:d.strMessage);e.watch(i,()=>a.value=!1);const l=()=>{n("hidden"),a.value=!0};return(u,m)=>(e.openBlock(),e.createElementBlock("div",null,[a.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"strMessage",ref:c,class:e.normalizeClass(["flex mt-2 p-1 px-2 rounded text-sm break-all dark:opacity-75",o.error?"bg-red-100 text-red-600 ":"bg-emerald-100 text-emerald-600"])},[e.renderSlot(u.$slots,"default"),e.createElementVNode("div",{class:"ml-auto cursor-pointer",onClick:l,"aria-label":e.unref(r)("Close"),"data-microtip-position":"top-left",role:"tooltip"},Os,8,Ts)],2))]))}},Hs={class:"sm:flex sm:items-start"},Fs=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})])],-1),Rs={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Is={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},zs={class:"mt-2"},js={class:"text-sm text-gray-500"},Ps=["placeholder"],zn={__name:"ModalNewFolder",setup(o){const t=e.inject("ServiceContainer");t.storage;const{t:n}=t.i18n,s=e.ref(""),r=e.ref(""),a=()=>{s.value!==""&&t.emitter.emit("vf-fetch",{params:{q:"newfolder",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{name:s.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("%s is created.",s.value)})},onError:c=>{r.value=n(c.message)}})};return(c,i)=>(e.openBlock(),e.createBlock(Te,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:a,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(n)("Create")),1),e.createElementVNode("button",{type:"button",onClick:i[2]||(i[2]=l=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",Hs,[Fs,e.createElementVNode("div",Rs,[e.createElementVNode("h3",Is,e.toDisplayString(e.unref(n)("New Folder")),1),e.createElementVNode("div",zs,[e.createElementVNode("p",js,e.toDisplayString(e.unref(n)("Create a new folder")),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":i[0]||(i[0]=l=>s.value=l),onKeyup:e.withKeys(a,["enter"]),class:"px-2 py-1 border rounded dark:bg-gray-700/25 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:e.unref(n)("Folder Name"),type:"text"},null,40,Ps),[[e.vModelText,s.value]]),r.value.length?(e.openBlock(),e.createBlock(De,{key:0,onHidden:i[1]||(i[1]=l=>r.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}},Us={class:"sm:flex sm:items-start"},qs=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1),Gs={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Ks={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Ws={class:"mt-2"},Ys={class:"text-sm text-gray-500"},Js=["placeholder"],Xs={__name:"ModalNewFile",setup(o){const t=e.inject("ServiceContainer");t.storage;const{t:n}=t.i18n,s=e.ref(""),r=e.ref(""),a=()=>{s.value!==""&&t.emitter.emit("vf-fetch",{params:{q:"newfile",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{name:s.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("%s is created.",s.value)})},onError:c=>{r.value=n(c.message)}})};return(c,i)=>(e.openBlock(),e.createBlock(Te,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:a,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(n)("Create")),1),e.createElementVNode("button",{type:"button",onClick:i[2]||(i[2]=l=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",Us,[qs,e.createElementVNode("div",Gs,[e.createElementVNode("h3",Ks,e.toDisplayString(e.unref(n)("New File")),1),e.createElementVNode("div",Ws,[e.createElementVNode("p",Ys,e.toDisplayString(e.unref(n)("Create a new file")),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":i[0]||(i[0]=l=>s.value=l),onKeyup:e.withKeys(a,["enter"]),class:"px-2 py-1 border rounded dark:bg-gray-700/25 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:e.unref(n)("File Name"),type:"text"},null,40,Js),[[e.vModelText,s.value]]),r.value.length?(e.openBlock(),e.createBlock(De,{key:0,onHidden:i[1]||(i[1]=l=>r.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}},Zs={class:"sm:flex sm:items-start"},Qs=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})])],-1),ea={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},ta={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},oa={class:"mt-2"},na={class:"flex text-sm text-gray-800 dark:text-gray-400 py-2"},ra={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},sa=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),aa=[sa],la={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},ca=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),ia=[ca],da={class:"ml-1.5"},jn={__name:"ModalRename",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,s=e.ref(t.modal.data.items[0]),r=e.ref(t.modal.data.items[0].basename),a=e.ref(""),c=()=>{r.value!=""&&t.emitter.emit("vf-fetch",{params:{q:"rename",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{item:s.value.path,name:r.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("%s is renamed.",r.value)})},onError:i=>{a.value=n(i.message)}})};return(i,l)=>(e.openBlock(),e.createBlock(Te,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:c,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(n)("Rename")),1),e.createElementVNode("button",{type:"button",onClick:l[2]||(l[2]=d=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",Zs,[Qs,e.createElementVNode("div",ea,[e.createElementVNode("h3",ta,e.toDisplayString(e.unref(n)("Rename")),1),e.createElementVNode("div",oa,[e.createElementVNode("p",na,[s.value.type==="dir"?(e.openBlock(),e.createElementBlock("svg",ra,aa)):(e.openBlock(),e.createElementBlock("svg",la,ia)),e.createElementVNode("span",da,e.toDisplayString(s.value.basename),1)]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":l[0]||(l[0]=d=>r.value=d),onKeyup:e.withKeys(c,["enter"]),class:"px-2 py-1 border rounded dark:bg-gray-700/25 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:"Name",type:"text"},null,544),[[e.vModelText,r.value]]),a.value.length?(e.openBlock(),e.createBlock(De,{key:0,onHidden:l[1]||(l[1]=d=>a.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}},ua={class:"sm:flex sm:items-start"},ma=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-red-600 dark:stroke-red-200",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})])],-1),fa={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},pa={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},va={class:"mt-2"},ha={class:"text-sm text-gray-500"},ga={class:"text-gray-500 text-sm mb-1 overflow-auto vf-scrollbar",style:{"max-height":"200px"}},ka={class:"flex text-sm text-gray-800 dark:text-gray-400"},ya={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},ba=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),wa=[ba],xa={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},_a=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),Ea=[_a],Sa={class:"ml-1.5"},Na={class:"m-auto font-bold text-red-500 text-sm dark:text-red-200 text-center"},Pn={__name:"ModalDelete",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,s=e.ref(t.modal.data.items),r=e.ref(""),a=()=>{s.value.length&&t.emitter.emit("vf-fetch",{params:{q:"delete",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{items:s.value.map(({path:c,type:i})=>({path:c,type:i}))},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("Files deleted.")})},onError:c=>{r.value=n(c.message)}})};return(c,i)=>(e.openBlock(),e.createBlock(Te,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:a,class:"vf-btn vf-btn-danger"},e.toDisplayString(e.unref(n)("Yes, Delete!")),1),e.createElementVNode("button",{type:"button",onClick:i[1]||(i[1]=l=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Cancel")),1),e.createElementVNode("div",Na,e.toDisplayString(e.unref(n)("This action cannot be undone.")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",ua,[ma,e.createElementVNode("div",fa,[e.createElementVNode("h3",pa,e.toDisplayString(e.unref(n)("Delete files")),1),e.createElementVNode("div",va,[e.createElementVNode("p",ha,e.toDisplayString(e.unref(n)("Are you sure you want to delete these files?")),1),e.createElementVNode("div",ga,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,l=>(e.openBlock(),e.createElementBlock("p",ka,[l.type==="dir"?(e.openBlock(),e.createElementBlock("svg",ya,wa)):(e.openBlock(),e.createElementBlock("svg",xa,Ea)),e.createElementVNode("span",Sa,e.toDisplayString(l.basename),1)]))),256))]),r.value.length?(e.openBlock(),e.createBlock(De,{key:0,onHidden:i[0]||(i[0]=l=>r.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}};function fo(o,t=14){let n=`((?=([\\w\\W]{0,${t}}))([\\w\\W]{${t+1},})([\\w\\W]{8,}))`;return o.replace(new RegExp(n),"$2..$4")}const Va={class:"sm:flex sm:items-start"},$a=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})])],-1),Ba={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Ca={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Da={class:"mt-2"},Ma={key:0,class:"pointer-events-none"},Aa={key:1,class:"pointer-events-none"},Ta=["disabled"],La=["disabled"],Oa={class:"text-gray-500 text-sm mb-1 pr-1 max-h-[200px] overflow-y-auto vf-scrollbar"},Ha={class:"rounded flex flex-shrink-0 w-6 h-6 border bg-gray-50 text-xs cursor-default dark:border-gray-700 dark:bg-gray-800 dark:text-gray-50"},Fa=["textContent"],Ra={class:"ml-1 w-full h-fit"},Ia={class:"text-left hidden md:block"},za={class:"text-left md:hidden"},ja={key:0,class:"ml-auto"},Pa=["title","disabled","onClick"],Ua=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),qa=[Ua],Ga={key:0,class:"py-2"},Ka=["disabled"],Un={__name:"ModalUpload",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,s=n("uppy"),r={PENDING:0,CANCELED:1,UPLOADING:2,ERROR:3,DONE:10},a=e.ref({QUEUE_ENTRY_STATUS:r}),c=e.ref(null),i=e.ref(null),l=e.ref(null),d=e.ref(null),u=e.ref(null),m=e.ref(null),f=e.ref([]),p=e.ref(""),v=e.ref(!1),g=e.ref(!1);let k;function x($){return f.value.findIndex(E=>E.id===$)}function h($,E=null){E=E??($.webkitRelativePath||$.name),k.addFile({name:E,type:$.type,data:$,source:"Local"})}function w($){switch($.status){case r.DONE:return"text-green-600";case r.ERROR:return"text-red-600";case r.CANCELED:return"text-red-600";case r.PENDING:default:return""}}const T=$=>{switch($.status){case r.DONE:return"";case r.ERROR:case r.CANCELED:return"!";case r.PENDING:default:return"..."}};function V(){d.value.click()}function y(){if(!v.value){if(!f.value.filter($=>$.status!==r.DONE).length){p.value=n("Please select file to upload first.");return}p.value="",k.retryAll(),k.upload()}}function N(){k.cancelAll({reason:"user"}),f.value.forEach($=>{$.status!==r.DONE&&($.status=r.CANCELED,$.statusName=n("Canceled"))}),v.value=!1}function H($){v.value||(k.removeFile($.id,"removed-by-user"),f.value.splice(x($.id),1))}function M($){if(!v.value){if(k.cancelAll({reason:"user"}),$){const E=[];f.value.forEach(b=>{b.status!==r.DONE&&E.push(b)}),f.value=[],E.forEach(b=>{h(b.originalFile,b.name)});return}f.value.splice(0)}}function L(){t.modal.close()}function D(){return t.requester.transformRequestParams({url:"",method:"post",params:{q:"upload",adapter:t.fs.adapter,path:t.fs.data.dirname}})}return e.onMounted(async()=>{k=new sr({debug:t.debug,restrictions:{maxFileSize:kr(t.maxFileSize)},locale:s,onBeforeFileAdded(b,S){if(S[b.id]!=null){const G=x(b.id);f.value[G].status===r.PENDING&&(p.value=k.i18n("noDuplicates",{fileName:b.name})),f.value=f.value.filter(Q=>Q.id!==b.id)}return f.value.push({id:b.id,name:b.name,size:t.filesize(b.size),status:r.PENDING,statusName:n("Pending upload"),percent:null,originalFile:b.data}),!0}}),k.use(ar,{endpoint:"WILL_BE_REPLACED_BEFORE_UPLOAD",limit:5,timeout:0,getResponseError(b,S){let A;try{A=JSON.parse(b).message}catch{A=n("Cannot parse server response.")}return new Error(A)}}),k.on("restriction-failed",(b,S)=>{const A=f.value[x(b.id)];H(A),p.value=S.message}),k.on("upload",()=>{const b=D();k.setMeta({...b.body});const S=k.getPlugin("XHRUpload");S.opts.method=b.method,S.opts.endpoint=b.url+"?"+new URLSearchParams(b.params),S.opts.headers=b.headers,v.value=!0,f.value.forEach(A=>{A.status!==r.DONE&&(A.percent=null,A.status=r.UPLOADING,A.statusName=n("Pending upload"))})}),k.on("upload-progress",(b,S)=>{const A=Math.floor(S.bytesUploaded/S.bytesTotal*100);f.value[x(b.id)].percent=`${A}%`}),k.on("upload-success",b=>{const S=f.value[x(b.id)];S.status=r.DONE,S.statusName=n("Done")}),k.on("upload-error",(b,S)=>{const A=f.value[x(b.id)];A.percent=null,A.status=r.ERROR,S.isNetworkError?A.statusName=n("Network Error, Unable establish connection to the server or interrupted."):A.statusName=S?S.message:n("Unknown Error")}),k.on("error",b=>{p.value=b.message,v.value=!1,t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:t.fs.data.dirname},noCloseModal:!0})}),k.on("complete",()=>{v.value=!1,t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:t.fs.data.dirname},noCloseModal:!0})}),d.value.addEventListener("click",()=>{i.value.click()}),u.value.addEventListener("click",()=>{l.value.click()}),m.value.addEventListener("dragover",b=>{b.preventDefault(),g.value=!0}),m.value.addEventListener("dragleave",b=>{b.preventDefault(),g.value=!1});function $(b,S){S.isFile&&S.file(A=>b(S,A)),S.isDirectory&&S.createReader().readEntries(A=>{A.forEach(G=>{$(b,G)})})}m.value.addEventListener("drop",b=>{b.preventDefault(),g.value=!1;const S=/^[/\\](.+)/;[...b.dataTransfer.items].forEach(A=>{A.kind==="file"&&$((G,Q)=>{const X=S.exec(G.fullPath);h(Q,X[1])},A.webkitGetAsEntry())})});const E=({target:b})=>{const S=b.files;for(const A of S)h(A);b.value=""};i.value.addEventListener("change",E),l.value.addEventListener("change",E),console.log(""),window.tmpFileList&&(console.log(window.tmpFileList),window.tmpFileList.forEach(({file:b,path:S})=>{h(b,S)}),window.tmpFileList=null)}),e.onBeforeUnmount(()=>{k==null||k.close({reason:"unmount"})}),($,E)=>(e.openBlock(),e.createBlock(Te,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",class:e.normalizeClass(["vf-btn vf-btn-primary",v.value?"bg-blue-200 hover:bg-blue-200 dark:bg-gray-700/50 dark:hover:bg-gray-700/50 dark:text-gray-500":"bg-blue-600 hover:bg-blue-700 dark:bg-gray-700 dark:hover:bg-gray-500"]),disabled:v.value,onClick:e.withModifiers(y,["prevent"])},e.toDisplayString(e.unref(n)("Upload")),11,Ka),v.value?(e.openBlock(),e.createElementBlock("button",{key:0,type:"button",class:"vf-btn vf-btn-secondary",onClick:e.withModifiers(N,["prevent"])},e.toDisplayString(e.unref(n)("Cancel")),1)):(e.openBlock(),e.createElementBlock("button",{key:1,type:"button",class:"vf-btn vf-btn-secondary",onClick:e.withModifiers(L,["prevent"])},e.toDisplayString(e.unref(n)("Close")),1))]),default:e.withCtx(()=>[e.createElementVNode("div",Va,[$a,e.createElementVNode("div",Ba,[e.createElementVNode("h3",Ca,e.toDisplayString(e.unref(n)("Upload Files")),1),e.createElementVNode("div",Da,[e.createElementVNode("div",{ref_key:"dropArea",ref:m,class:"flex items-center justify-center text-lg mb-4 text-gray-500 border-2 border-gray-300 rounded border-dashed select-none cursor-pointer dark:border-gray-600 h-[120px]",onClick:V},[g.value?(e.openBlock(),e.createElementBlock("div",Ma,e.toDisplayString(e.unref(n)("Release to drop these files.")),1)):(e.openBlock(),e.createElementBlock("div",Aa,e.toDisplayString(e.unref(n)("Drag and drop the files/folders to here or click here.")),1))],512),e.createElementVNode("div",{ref_key:"container",ref:c,class:"text-gray-500 mb-1"},[e.createElementVNode("button",{ref_key:"pickFiles",ref:d,type:"button",class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Select Files")),513),e.createElementVNode("button",{ref_key:"pickFolders",ref:u,type:"button",class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Select Folders")),513),e.createElementVNode("button",{type:"button",class:"vf-btn vf-btn-secondary",disabled:v.value,onClick:E[0]||(E[0]=b=>M(!1))},e.toDisplayString(e.unref(n)("Clear all")),9,Ta),e.createElementVNode("button",{type:"button",class:"vf-btn vf-btn-secondary",disabled:v.value,onClick:E[1]||(E[1]=b=>M(!0))},e.toDisplayString(e.unref(n)("Clear only successful")),9,La)],512),e.createElementVNode("div",Oa,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(f.value,b=>(e.openBlock(),e.createElementBlock("div",{class:"flex hover:bg-gray-100 dark:hover:bg-gray-800 dark:hover:text-gray-300",key:b.id},[e.createElementVNode("span",Ha,[e.createElementVNode("span",{class:e.normalizeClass(["text-base m-auto",w(b)]),textContent:e.toDisplayString(T(b))},null,10,Fa)]),e.createElementVNode("div",Ra,[e.createElementVNode("div",Ia,e.toDisplayString(e.unref(fo)(b.name,40))+" ("+e.toDisplayString(b.size)+")",1),e.createElementVNode("div",za,e.toDisplayString(e.unref(fo)(b.name,16))+" ("+e.toDisplayString(b.size)+")",1),e.createElementVNode("div",{class:e.normalizeClass(["flex break-all text-left",w(b)])},[e.createTextVNode(e.toDisplayString(b.statusName)+" ",1),b.status===a.value.QUEUE_ENTRY_STATUS.UPLOADING?(e.openBlock(),e.createElementBlock("b",ja,e.toDisplayString(b.percent),1)):e.createCommentVNode("",!0)],2)]),e.createElementVNode("button",{type:"button",class:e.normalizeClass(["rounded w-5 h-5 border-1 text-base leading-none font-medium focus:outline-none dark:border-gray-200 dark:text-gray-400 dark:hover:text-gray-200 dark:bg-gray-600 ml-auto sm:text-xs hover:text-red-600",v.value?"disabled:bg-gray-100 text-white text-opacity-50":"bg-gray-100"]),title:e.unref(n)("Delete"),disabled:v.value,onClick:S=>H(b)},qa,10,Pa)]))),128)),f.value.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",Ga,e.toDisplayString(e.unref(n)("No files selected!")),1))]),p.value.length?(e.openBlock(),e.createBlock(De,{key:0,onHidden:E[2]||(E[2]=b=>p.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(p.value),1)]),_:1})):e.createCommentVNode("",!0)])])]),e.createElementVNode("input",{ref_key:"internalFileInput",ref:i,type:"file",multiple:"",class:"hidden"},null,512),e.createElementVNode("input",{ref_key:"internalFolderInput",ref:l,type:"file",multiple:"",webkitdirectory:"",class:"hidden"},null,512)]),_:1}))}},Wa={class:"sm:flex sm:items-start"},Ya=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5m6 4.125l2.25 2.25m0 0l2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"})])],-1),Ja={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Xa={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Za={class:"mt-2"},Qa={class:"flex text-sm text-gray-800 dark:text-gray-400"},el={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},tl=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),ol=[tl],nl={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},rl=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),sl=[rl],al={class:"ml-1.5"},ll={class:"my-1 text-sm text-gray-500"},qn={__name:"ModalUnarchive",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,s=e.ref(t.modal.data.items[0]),r=e.ref(""),a=e.ref([]),c=()=>{t.emitter.emit("vf-fetch",{params:{q:"unarchive",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{item:s.value.path},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("The file unarchived.")})},onError:i=>{r.value=n(i.message)}})};return(i,l)=>(e.openBlock(),e.createBlock(Te,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:c,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(n)("Unarchive")),1),e.createElementVNode("button",{type:"button",onClick:l[1]||(l[1]=d=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",Wa,[Ya,e.createElementVNode("div",Ja,[e.createElementVNode("h3",Xa,e.toDisplayString(e.unref(n)("Unarchive")),1),e.createElementVNode("div",Za,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,d=>(e.openBlock(),e.createElementBlock("p",Qa,[d.type==="dir"?(e.openBlock(),e.createElementBlock("svg",el,ol)):(e.openBlock(),e.createElementBlock("svg",nl,sl)),e.createElementVNode("span",al,e.toDisplayString(d.basename),1)]))),256)),e.createElementVNode("p",ll,e.toDisplayString(e.unref(n)("The archive will be unarchived at"))+" ("+e.toDisplayString(e.unref(t).fs.data.dirname)+")",1),r.value.length?(e.openBlock(),e.createBlock(De,{key:0,onHidden:l[0]||(l[0]=d=>r.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}},cl={class:"sm:flex sm:items-start"},il=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"})])],-1),dl={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},ul={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},ml={class:"mt-2"},fl={class:"text-gray-500 text-sm mb-1 overflow-auto vf-scrollbar",style:{"max-height":"200px"}},pl={class:"flex text-sm text-gray-800 dark:text-gray-400"},vl={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},hl=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),gl=[hl],kl={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},yl=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),bl=[yl],wl={class:"ml-1.5"},xl=["placeholder"],Gn={__name:"ModalArchive",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,s=e.ref(""),r=e.ref(""),a=e.ref(t.modal.data.items),c=()=>{a.value.length&&t.emitter.emit("vf-fetch",{params:{q:"archive",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{items:a.value.map(({path:i,type:l})=>({path:i,type:l})),name:s.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("The file(s) archived.")})},onError:i=>{r.value=n(i.message)}})};return(i,l)=>(e.openBlock(),e.createBlock(Te,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:c,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(n)("Archive")),1),e.createElementVNode("button",{type:"button",onClick:l[2]||(l[2]=d=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",cl,[il,e.createElementVNode("div",dl,[e.createElementVNode("h3",ul,e.toDisplayString(e.unref(n)("Archive the files")),1),e.createElementVNode("div",ml,[e.createElementVNode("div",fl,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,d=>(e.openBlock(),e.createElementBlock("p",pl,[d.type==="dir"?(e.openBlock(),e.createElementBlock("svg",vl,gl)):(e.openBlock(),e.createElementBlock("svg",kl,bl)),e.createElementVNode("span",wl,e.toDisplayString(d.basename),1)]))),256))]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":l[0]||(l[0]=d=>s.value=d),onKeyup:e.withKeys(c,["enter"]),class:"my-1 px-2 py-1 border rounded dark:bg-gray-700/25 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:e.unref(n)("Archive name. (.zip file will be created)"),type:"text"},null,40,xl),[[e.vModelText,s.value]]),r.value.length?(e.openBlock(),e.createBlock(De,{key:0,onHidden:l[1]||(l[1]=d=>r.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}},_l={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"},El=e.createElementVNode("path",{d:"M12 10.5v6m3-3H9m4.06-7.19-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44z"},null,-1),Sl=[El];function Nl(o,t){return e.openBlock(),e.createElementBlock("svg",_l,[...Sl])}const Vl={render:Nl},$l={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"},Bl=e.createElementVNode("path",{d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9"},null,-1),Cl=[Bl];function Dl(o,t){return e.openBlock(),e.createElementBlock("svg",$l,[...Cl])}const Ml={render:Dl},Al={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"},Tl=e.createElementVNode("path",{d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"},null,-1),Ll=[Tl];function Ol(o,t){return e.openBlock(),e.createElementBlock("svg",Al,[...Ll])}const Hl={render:Ol},Fl={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"},Rl=e.createElementVNode("path",{d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21q.512.078 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48 48 0 0 0-3.478-.397m-12 .562q.51-.089 1.022-.165m0 0a48 48 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a52 52 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a49 49 0 0 0-7.5 0"},null,-1),Il=[Rl];function zl(o,t){return e.openBlock(),e.createElementBlock("svg",Fl,[...Il])}const jl={render:zl},Pl={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"},Ul=e.createElementVNode("path",{d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"},null,-1),ql=[Ul];function Gl(o,t){return e.openBlock(),e.createElementBlock("svg",Pl,[...ql])}const Kl={render:Gl},Wl={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"},Yl=e.createElementVNode("path",{d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125"},null,-1),Jl=[Yl];function Xl(o,t){return e.openBlock(),e.createElementBlock("svg",Wl,[...Jl])}const Zl={render:Xl},Ql={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"},ec=e.createElementVNode("path",{d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5m6 4.125 2.25 2.25m0 0 2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125"},null,-1),tc=[ec];function oc(o,t){return e.openBlock(),e.createElementBlock("svg",Ql,[...tc])}const nc={render:oc},rc={xmlns:"http://www.w3.org/2000/svg",fill:"none",class:"animate-spin p-0.5 h-5 w-5 text-white ml-auto",viewBox:"0 0 24 24"},sc=e.createElementVNode("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",class:"opacity-25 stroke-blue-900 dark:stroke-blue-100"},null,-1),ac=e.createElementVNode("path",{fill:"currentColor",d:"M4 12a8 8 0 0 1 8-8V0C5.373 0 0 5.373 0 12zm2 5.291A7.96 7.96 0 0 1 4 12H0c0 3.042 1.135 5.824 3 7.938z",class:"opacity-75"},null,-1),lc=[sc,ac];function cc(o,t){return e.openBlock(),e.createElementBlock("svg",rc,[...lc])}const Kn={render:cc},ic={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"},dc=e.createElementVNode("path",{d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25zm0 9.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18zM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25zm0 9.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18z"},null,-1),uc=[dc];function mc(o,t){return e.openBlock(),e.createElementBlock("svg",ic,[...uc])}const fc={render:mc},pc={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"},vc=e.createElementVNode("path",{d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75"},null,-1),hc=[vc];function gc(o,t){return e.openBlock(),e.createElementBlock("svg",pc,[...hc])}const kc={render:gc},yc={class:"border-neutral-300 flex justify-between items-center py-1 text-sm"},bc={key:0,class:"flex text-center"},wc=["aria-label"],xc=["aria-label"],_c=["aria-label"],Ec=["aria-label"],Sc=["aria-label"],Nc=["aria-label"],Vc=["aria-label"],$c={key:1,class:"flex text-center"},Bc={class:"pl-2"},Cc={class:"dark:bg-gray-700 bg-gray-200 text-xs px-2 py-1 rounded"},Dc={class:"flex text-center items-center justify-end"},Mc=["aria-label"],Ac={xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 md:h-8 md:w-8 m-auto cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},Tc={key:0,"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 9V4.5M9 9H4.5M9 9L3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5l5.25 5.25"},Lc={key:1,"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"},Oc=["aria-label"],Hc={__name:"Toolbar",setup(o){const t=e.inject("ServiceContainer"),{setStore:n}=t.storage,{t:s}=t.i18n,r=t.dragSelect,a=e.ref("");t.emitter.on("vf-search-query",({newQuery:l})=>{a.value=l});const c=()=>{t.fullScreen=!t.fullScreen,n("full-screen",t.fullScreen),t.emitter.emit("vf-fullscreen-toggle")},i=()=>{t.view=t.view==="list"?"grid":"list",r.refreshSelection(),n("viewport",t.view)};return(l,d)=>(e.openBlock(),e.createElementBlock("div",yc,[a.value.length?(e.openBlock(),e.createElementBlock("div",$c,[e.createElementVNode("div",Bc,[e.createTextVNode(e.toDisplayString(e.unref(s)("Search results for"))+" ",1),e.createElementVNode("span",Cc,e.toDisplayString(a.value),1)]),e.unref(t).fs.loading?(e.openBlock(),e.createBlock(e.unref(Kn),{key:0})):e.createCommentVNode("",!0)])):(e.openBlock(),e.createElementBlock("div",bc,[e.unref(t).features.includes(e.unref(le).NEW_FOLDER)?(e.openBlock(),e.createElementBlock("div",{key:0,class:"mx-1.5","aria-label":e.unref(s)("New Folder"),"data-microtip-position":"bottom-right",role:"tooltip",onClick:d[0]||(d[0]=u=>e.unref(t).modal.open(zn,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(Vl))],8,wc)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(le).NEW_FILE)?(e.openBlock(),e.createElementBlock("div",{key:1,class:"mx-1.5","aria-label":e.unref(s)("New File"),"data-microtip-position":"bottom",role:"tooltip",onClick:d[1]||(d[1]=u=>e.unref(t).modal.open(Xs,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(Ml))],8,xc)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(le).RENAME)?(e.openBlock(),e.createElementBlock("div",{key:2,class:"mx-1.5","aria-label":e.unref(s)("Rename"),"data-microtip-position":"bottom",role:"tooltip",onClick:d[2]||(d[2]=u=>e.unref(r).getCount()!==1||e.unref(t).modal.open(jn,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(Hl),{class:e.normalizeClass(e.unref(r).getCount()===1?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,_c)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(le).DELETE)?(e.openBlock(),e.createElementBlock("div",{key:3,class:"mx-1.5","aria-label":e.unref(s)("Delete"),"data-microtip-position":"bottom",role:"tooltip",onClick:d[3]||(d[3]=u=>!e.unref(r).getCount()||e.unref(t).modal.open(Pn,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(jl),{class:e.normalizeClass(e.unref(r).getCount()?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,Ec)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(le).UPLOAD)?(e.openBlock(),e.createElementBlock("div",{key:4,class:"mx-1.5","aria-label":e.unref(s)("Upload"),"data-microtip-position":"bottom",role:"tooltip",onClick:d[4]||(d[4]=u=>e.unref(t).modal.open(Un,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(Kl))],8,Sc)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(le).UNARCHIVE)&&e.unref(r).getCount()===1&&e.unref(r).getSelected()[0].mime_type==="application/zip"?(e.openBlock(),e.createElementBlock("div",{key:5,class:"mx-1.5","aria-label":e.unref(s)("Unarchive"),"data-microtip-position":"bottom",role:"tooltip",onClick:d[5]||(d[5]=u=>!e.unref(r).getCount()||e.unref(t).modal.open(qn,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(nc),{class:e.normalizeClass(e.unref(r).getCount()?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,Nc)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(le).ARCHIVE)?(e.openBlock(),e.createElementBlock("div",{key:6,class:"mx-1.5","aria-label":e.unref(s)("Archive"),"data-microtip-position":"bottom",role:"tooltip",onClick:d[6]||(d[6]=u=>!e.unref(r).getCount()||e.unref(t).modal.open(Gn,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(Zl),{class:e.normalizeClass(e.unref(r).getCount()?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,Vc)):e.createCommentVNode("",!0)])),e.createElementVNode("div",Dc,[e.unref(t).features.includes(e.unref(le).FULL_SCREEN)?(e.openBlock(),e.createElementBlock("div",{key:0,class:"mx-1.5","aria-label":e.unref(s)("Toggle Full Screen"),"data-microtip-position":"bottom-left",role:"tooltip",onClick:c},[(e.openBlock(),e.createElementBlock("svg",Ac,[e.unref(t).fullScreen?(e.openBlock(),e.createElementBlock("path",Tc)):(e.openBlock(),e.createElementBlock("path",Lc))]))],8,Mc)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"mx-1.5","aria-label":e.unref(s)("Change View"),"data-microtip-position":"bottom-left",role:"tooltip",onClick:d[7]||(d[7]=u=>a.value.length||i())},[e.unref(t).view==="grid"?(e.openBlock(),e.createBlock(e.unref(fc),{key:0,class:e.normalizeClass(a.value.length?"vf-toolbar-icon-disabled":"vf-toolbar-icon")},null,8,["class"])):e.createCommentVNode("",!0),e.unref(t).view==="list"?(e.openBlock(),e.createBlock(e.unref(kc),{key:1,class:e.normalizeClass(a.value.length?"vf-toolbar-icon-disabled":"vf-toolbar-icon")},null,8,["class"])):e.createCommentVNode("",!0)],8,Oc)])]))}},Fc=(o,t=0,n=!1)=>{let s;return(...r)=>{n&&!s&&o(...r),clearTimeout(s),s=setTimeout(()=>{o(...r)},t)}},en=(o,t,n)=>{const s=e.ref(o);return e.customRef((r,a)=>({get(){return r(),s.value},set:Fc(c=>{s.value=c,a()},t,n)}))},Rc={class:"sm:flex sm:items-start"},Ic=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1),zc={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},jc={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Pc={class:"text-sm text-gray-500 pb-1"},Uc={class:"max-h-[200px] overflow-y-auto vf-scrollbar text-left"},qc={class:"flex text-sm text-gray-800 dark:text-gray-400"},Gc={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Kc=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),Wc=[Kc],Yc={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Jc=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),Xc=[Jc],Zc={class:"ml-1.5"},Qc={class:"font-bold text-xs text-gray-700 dark:text-gray-500 mt-3 tracking-wider"},ei={class:"flex text-sm text-gray-800 dark:text-gray-400 border dark:border-gray-700 p-1 rounded"},ti=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})],-1),oi={class:"ml-1.5 overflow-auto"},ni={class:"m-1 mr-auto font-bold text-gray-500 text-sm dark:text-gray-200 self-center"},po={__name:"ModalMove",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,s=e.ref(t.modal.data.items.from),r=e.ref(""),a=()=>{s.value.length&&t.emitter.emit("vf-fetch",{params:{q:"move",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{items:s.value.map(({path:c,type:i})=>({path:c,type:i})),item:t.modal.data.items.to.path},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("Files moved.",t.modal.data.items.to.name)})},onError:c=>{r.value=n(c.message)}})};return(c,i)=>(e.openBlock(),e.createBlock(Te,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:a,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(n)("Yes, Move!")),1),e.createElementVNode("button",{type:"button",onClick:i[1]||(i[1]=l=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Cancel")),1),e.createElementVNode("div",ni,e.toDisplayString(e.unref(n)("%s item(s) selected.",s.value.length)),1)]),default:e.withCtx(()=>[e.createElementVNode("div",Rc,[Ic,e.createElementVNode("div",zc,[e.createElementVNode("h3",jc,e.toDisplayString(e.unref(n)("Move files")),1),e.createElementVNode("p",Pc,e.toDisplayString(e.unref(n)("Are you sure you want to move these files?")),1),e.createElementVNode("div",Uc,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,l=>(e.openBlock(),e.createElementBlock("div",qc,[e.createElementVNode("div",null,[l.type==="dir"?(e.openBlock(),e.createElementBlock("svg",Gc,Wc)):(e.openBlock(),e.createElementBlock("svg",Yc,Xc))]),e.createElementVNode("div",Zc,e.toDisplayString(l.path),1)]))),256))]),e.createElementVNode("h4",Qc,e.toDisplayString(e.unref(n)("Target Directory")),1),e.createElementVNode("p",ei,[ti,e.createElementVNode("span",oi,e.toDisplayString(e.unref(t).modal.data.items.to.path),1)]),r.value.length?(e.openBlock(),e.createBlock(De,{key:0,onHidden:i[0]||(i[0]=l=>r.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.value),1)]),_:1})):e.createCommentVNode("",!0)])])]),_:1}))}},ri={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer",viewBox:"-40 -40 580 580"},si=e.createElementVNode("path",{d:"M463.5 224h8.5c13.3 0 24-10.7 24-24V72c0-9.7-5.8-18.5-14.8-22.2S461.9 48.1 455 55l-41.6 41.6c-87.6-86.5-228.7-86.2-315.8 1-87.5 87.5-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2S334.3 224 344 224z"},null,-1),ai=[si];function li(o,t){return e.openBlock(),e.createElementBlock("svg",ri,[...ai])}const ci={render:li},ii={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-0.5 rounded",viewBox:"0 0 20 20"},di=e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 9.707a1 1 0 0 1 0-1.414l4-4a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1-1.414 1.414L11 7.414V15a1 1 0 1 1-2 0V7.414L6.707 9.707a1 1 0 0 1-1.414 0",class:"pointer-events-none","clip-rule":"evenodd"},null,-1),ui=[di];function mi(o,t){return e.openBlock(),e.createElementBlock("svg",ii,[...ui])}const fi={render:mi},pi={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer",viewBox:"0 0 24 24"},vi=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"},null,-1),hi=[vi];function gi(o,t){return e.openBlock(),e.createElementBlock("svg",pi,[...hi])}const ki={render:gi},yi={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-gray-800 cursor-pointer",viewBox:"0 0 20 20"},bi=e.createElementVNode("path",{d:"M10.707 2.293a1 1 0 0 0-1.414 0l-7 7a1 1 0 0 0 1.414 1.414L4 10.414V17a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-6.586l.293.293a1 1 0 0 0 1.414-1.414z",class:"pointer-events-none"},null,-1),wi=[bi];function xi(o,t){return e.openBlock(),e.createElementBlock("svg",yi,[...wi])}const _i={render:xi},Ei={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-1 m-auto stroke-gray-400 fill-gray-100 dark:stroke-gray-400 dark:fill-gray-400/20",viewBox:"0 0 20 20"},Si=e.createElementVNode("path",{d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607"},null,-1),Ni=[Si];function Vi(o,t){return e.openBlock(),e.createElementBlock("svg",Ei,[...Ni])}const $i={render:Vi},Bi={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"w-6 h-6 cursor-pointer",viewBox:"0 0 24 24"},Ci=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"},null,-1),Di=[Ci];function Mi(o,t){return e.openBlock(),e.createElementBlock("svg",Bi,[...Di])}const Ai={render:Mi},Ti={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",viewBox:"0 0 24 24"},Li=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-6l-2-2H5a2 2 0 0 0-2 2"},null,-1),Oi=[Li];function Hi(o,t){return e.openBlock(),e.createElementBlock("svg",Ti,[...Oi])}const Wn={render:Hi},Fi={xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 rounded text-slate-700 hover:bg-neutral-100 dark:fill-neutral-300 dark:hover:bg-gray-800 cursor-pointer",viewBox:"0 0 448 512"},Ri=e.createElementVNode("path",{d:"M8 256a56 56 0 1 1 112 0 56 56 0 1 1-112 0m160 0a56 56 0 1 1 112 0 56 56 0 1 1-112 0m216-56a56 56 0 1 1 0 112 56 56 0 1 1 0-112"},null,-1),Ii=[Ri];function zi(o,t){return e.openBlock(),e.createElementBlock("svg",Fi,[...Ii])}const ji={render:zi},Pi={class:"flex p-1.5 bg-neutral-100 dark:bg-gray-800 border-t border-b border-neutral-300 dark:border-gray-700/50 items-center select-none text-sm"},Ui=["aria-label"],qi=["aria-label"],Gi=["aria-label"],Ki={class:"flex leading-6"},Wi={key:0,class:"flex"},Yi=e.createElementVNode("div",{class:"text-neutral-300 dark:text-gray-600 mx-0.5"},"/",-1),Ji={class:"relative"},Xi=e.createElementVNode("span",{class:"text-neutral-300 dark:text-gray-600 mx-0.5"},"/",-1),Zi=["onDragover","onDragleave","onDrop","title","onClick"],Qi={class:"relative flex bg-white dark:bg-gray-700 justify-between items-center rounded p-1 ml-2 w-full"},ed=["placeholder"],td={class:"z-30 absolute top-[65px] md:top-[75px] left-[90px] rounded -mx-1.5 mt-1 bg-neutral-50 dark:bg-gray-800 max-w-80 max-h-50 shadow overflow-y-auto text-gray-700 dark:text-gray-200 border border-neutral-300 dark:border-gray-600"},od=["onDrop","onClick"],nd={class:"flex pointer-events-none"},rd={class:"inline-block w-full text-ellipsis overflow-hidden"},sd={__name:"Breadcrumb",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,s=t.dragSelect,r=e.ref(null),a=en(0,100);e.watch(a,V=>{const y=r.value.children;let N=0,H=0,M=5,L=1;t.fs.limitBreadcrumbItems(M),e.nextTick(()=>{for(let D=y.length-1;D>=0&&!(N+y[D].offsetWidth>a.value-40);D--)N+=parseInt(y[D].offsetWidth,10),H++;H<L&&(H=L),H>M&&(H=M),t.fs.limitBreadcrumbItems(H)})});const c=()=>{a.value=r.value.offsetWidth};e.onMounted(()=>{new ResizeObserver(c).observe(r.value)});const i=(V,y=null)=>{V.preventDefault(),s.isDraggingRef.value=!1,u(V),y??(y=t.fs.hiddenBreadcrumbs.length-1);let N=JSON.parse(V.dataTransfer.getData("items"));if(N.find(H=>H.storage!==t.fs.adapter)){alert("Moving items between different storages is not supported yet.");return}t.modal.open(po,{items:{from:N,to:t.fs.hiddenBreadcrumbs[y]??{path:t.fs.adapter+"://"}}})},l=(V,y=null)=>{V.preventDefault(),s.isDraggingRef.value=!1,u(V),y??(y=t.fs.breadcrumbs.length-2);let N=JSON.parse(V.dataTransfer.getData("items"));if(N.find(H=>H.storage!==t.fs.adapter)){alert("Moving items between different storages is not supported yet.");return}t.modal.open(po,{items:{from:N,to:t.fs.breadcrumbs[y]??{path:t.fs.adapter+"://"}}})},d=V=>{V.preventDefault(),t.fs.isGoUpAvailable()?(V.dataTransfer.dropEffect="copy",V.currentTarget.classList.add("bg-blue-200","dark:bg-slate-600")):(V.dataTransfer.dropEffect="none",V.dataTransfer.effectAllowed="none")},u=V=>{V.preventDefault(),V.currentTarget.classList.remove("bg-blue-200","dark:bg-slate-600"),t.fs.isGoUpAvailable()&&V.currentTarget.classList.remove("bg-blue-200","dark:bg-slate-600")},m=()=>{w(),t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:t.fs.data.dirname}})},f=()=>{w(),!t.fs.isGoUpAvailable()||t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:t.fs.parentFolderPath}})},p=V=>{t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:V.path}}),t.fs.toggleHiddenBreadcrumbs(!1)},v=()=>{t.fs.showHiddenBreadcrumbs&&t.fs.toggleHiddenBreadcrumbs(!1)},g={mounted(V,y,N,H){V.clickOutsideEvent=function(M){V===M.target||V.contains(M.target)||y.value()},document.body.addEventListener("click",V.clickOutsideEvent)},beforeUnmount(V,y,N,H){document.body.removeEventListener("click",V.clickOutsideEvent)}},k=e.ref(null),x=()=>{t.features.includes(le.SEARCH)&&(t.fs.searchMode=!0,e.nextTick(()=>k.value.focus()))},h=en("",400);e.watch(h,V=>{t.emitter.emit("vf-toast-clear"),t.emitter.emit("vf-search-query",{newQuery:V})});const w=()=>{t.fs.searchMode=!1,h.value=""};t.emitter.on("vf-search-exit",()=>{w()});const T=()=>{h.value===""&&w()};return(V,y)=>(e.openBlock(),e.createElementBlock("div",Pi,[e.createElementVNode("span",{"aria-label":e.unref(n)("Go up a directory"),"data-microtip-position":"bottom-right",role:"tooltip"},[e.createVNode(e.unref(fi),{onDragover:y[0]||(y[0]=N=>d(N)),onDragleave:y[1]||(y[1]=N=>u(N)),onDrop:y[2]||(y[2]=N=>l(N)),onClick:f,class:e.normalizeClass(e.unref(t).fs.isGoUpAvailable()?"text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer":"text-gray-400 dark:text-neutral-500")},null,8,["class"])],8,Ui),e.unref(t).fs.loading?(e.openBlock(),e.createElementBlock("span",{key:1,"aria-label":e.unref(n)("Cancel"),"data-microtip-position":"bottom-right",role:"tooltip"},[e.createVNode(e.unref(ki),{onClick:y[3]||(y[3]=N=>e.unref(t).emitter.emit("vf-fetch-abort"))})],8,Gi)):(e.openBlock(),e.createElementBlock("span",{key:0,"aria-label":e.unref(n)("Refresh"),"data-microtip-position":"bottom-right",role:"tooltip"},[e.createVNode(e.unref(ci),{onClick:m})],8,qi)),e.withDirectives(e.createElementVNode("div",{onClick:e.withModifiers(x,["self"]),class:"group flex bg-white dark:bg-gray-700 items-center rounded p-1 ml-2 w-full overflow-hidden"},[e.createElementVNode("div",null,[e.createVNode(e.unref(_i),{onDragover:y[4]||(y[4]=N=>d(N)),onDragleave:y[5]||(y[5]=N=>u(N)),onDrop:y[6]||(y[6]=N=>l(N,-1)),onClick:y[7]||(y[7]=N=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index",adapter:e.unref(t).fs.adapter}}))})]),e.createElementVNode("div",Ki,[e.unref(t).fs.hiddenBreadcrumbs.length?e.withDirectives((e.openBlock(),e.createElementBlock("div",Wi,[Yi,e.createElementVNode("div",Ji,[e.createElementVNode("span",{onDragenter:y[8]||(y[8]=N=>e.unref(t).fs.toggleHiddenBreadcrumbs(!0)),onClick:y[9]||(y[9]=N=>e.unref(t).fs.toggleHiddenBreadcrumbs()),class:"text-slate-700 dark:text-slate-200 hover:bg-neutral-100 dark:hover:bg-gray-800 rounded cursor-pointer"},[e.createVNode(e.unref(ji),{class:"px-1 pointer-events-none"})],32)])])),[[g,v]]):e.createCommentVNode("",!0)]),e.createElementVNode("div",{ref_key:"breadcrumbContainer",ref:r,class:"flex leading-6 w-full overflow-hidden",onClick:e.withModifiers(x,["self"])},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(t).fs.breadcrumbs,(N,H)=>(e.openBlock(),e.createElementBlock("div",{key:H},[Xi,e.createElementVNode("span",{onDragover:M=>H===e.unref(t).fs.breadcrumbs.length-1||d(M),onDragleave:M=>H===e.unref(t).fs.breadcrumbs.length-1||u(M),onDrop:M=>H===e.unref(t).fs.breadcrumbs.length-1||l(M,H),class:"px-1.5 py-1 text-slate-700 dark:text-slate-200 hover:bg-neutral-100 dark:hover:bg-gray-800 rounded cursor-pointer whitespace-nowrap",title:N.basename,onClick:M=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index",adapter:e.unref(t).fs.adapter,path:N.path}})},e.toDisplayString(N.name),41,Zi)]))),128))],512),e.unref(t).fs.loading?(e.openBlock(),e.createBlock(e.unref(Kn),{key:0})):e.createCommentVNode("",!0)],512),[[e.vShow,!e.unref(t).fs.searchMode]]),e.withDirectives(e.createElementVNode("div",Qi,[e.createElementVNode("div",null,[e.createVNode(e.unref($i))]),e.withDirectives(e.createElementVNode("input",{ref_key:"searchInput",ref:k,onKeydown:e.withKeys(w,["esc"]),onBlur:T,"onUpdate:modelValue":y[10]||(y[10]=N=>e.isRef(h)?h.value=N:null),placeholder:e.unref(n)("Search anything.."),class:"w-full pb-0 px-1 border-0 text-base ring-0 outline-0 text-gray-600 focus:ring-transparent focus:border-transparent dark:focus:ring-transparent dark:focus:border-transparent dark:text-gray-300 bg-transparent",type:"text"},null,40,ed),[[e.vModelText,e.unref(h)]]),e.createVNode(e.unref(Ai),{onClick:w})],512),[[e.vShow,e.unref(t).fs.searchMode]]),e.withDirectives(e.createElementVNode("div",td,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(t).fs.hiddenBreadcrumbs,(N,H)=>(e.openBlock(),e.createElementBlock("div",{key:H,onDragover:y[11]||(y[11]=M=>d(M)),onDragleave:y[12]||(y[12]=M=>u(M)),onDrop:M=>i(M,H),onClick:M=>p(N),class:"px-2 py-0.5 hover:bg-gray-400/20 cursor-pointer items-center whitespace-nowrap"},[e.createElementVNode("div",nd,[e.createElementVNode("span",null,[e.createVNode(e.unref(Wn),{class:"h-5 w-5"})]),e.createTextVNode(),e.createElementVNode("span",rd,e.toDisplayString(N.name),1)])],40,od))),128))],512),[[e.vShow,e.unref(t).fs.showHiddenBreadcrumbs]])]))}},Yn=(o,t=null)=>new Date(o*1e3).toLocaleString(t??navigator.language??"en-US"),ad=["onClick"],ld={__name:"Toast",setup(o){const t=e.inject("ServiceContainer"),{getStore:n}=t.storage,s=e.ref(n("full-screen",!1)),r=e.ref([]),a=l=>l==="error"?"text-red-400 border-red-400 dark:text-red-300 dark:border-red-300":"text-lime-600 border-lime-600 dark:text-lime-300 dark:border-lime-1300",c=l=>{r.value.splice(l,1)},i=l=>{let d=r.value.findIndex(u=>u.id===l);d!==-1&&c(d)};return t.emitter.on("vf-toast-clear",()=>{r.value=[]}),t.emitter.on("vf-toast-push",l=>{let d=new Date().getTime().toString(36).concat(performance.now().toString(),Math.random().toString()).replace(/\./g,"");l.id=d,r.value.push(l),setTimeout(()=>{i(d)},5e3)}),(l,d)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass([s.value.value?"fixed":"absolute","max-w-fit flex flex-col bottom-0 left-1/2 -translate-x-1/2"])},[e.createVNode(e.TransitionGroup,{name:"vf-toast-item","leave-active-class":"transition-all duration-1000","leave-to-class":"opacity-0"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,(u,m)=>(e.openBlock(),e.createElementBlock("div",{onClick:f=>c(m),key:u,class:e.normalizeClass([a(u.type),"inline-block mx-auto my-0.5 py-0.5 px-2 min-w-max bg-gray-50 dark:bg-gray-600 border text-xs sm:text-sm rounded cursor-pointer"])},e.toDisplayString(u.label),11,ad))),128))]),_:1})],2))}},cd={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 20 20"},id=e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 0 1 1.414 0L10 10.586l3.293-3.293a1 1 0 1 1 1.414 1.414l-4 4a1 1 0 0 1-1.414 0l-4-4a1 1 0 0 1 0-1.414","clip-rule":"evenodd"},null,-1),dd=[id];function ud(o,t){return e.openBlock(),e.createElementBlock("svg",cd,[...dd])}const md={render:ud},fd={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 20 20"},pd=e.createElementVNode("path",{"fill-rule":"evenodd",d:"M14.707 12.707a1 1 0 0 1-1.414 0L10 9.414l-3.293 3.293a1 1 0 0 1-1.414-1.414l4-4a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1 0 1.414","clip-rule":"evenodd"},null,-1),vd=[pd];function hd(o,t){return e.openBlock(),e.createElementBlock("svg",fd,[...vd])}const gd={render:hd},kt={__name:"SortIcon",props:{direction:String},setup(o){return(t,n)=>(e.openBlock(),e.createElementBlock("div",null,[o.direction==="asc"?(e.openBlock(),e.createBlock(e.unref(md),{key:0})):e.createCommentVNode("",!0),o.direction==="desc"?(e.openBlock(),e.createBlock(e.unref(gd),{key:1})):e.createCommentVNode("",!0)]))}},kd={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"text-neutral-500",viewBox:"0 0 24 24"},yd=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 0 0 2-2V9.414a1 1 0 0 0-.293-.707l-5.414-5.414A1 1 0 0 0 12.586 3H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2"},null,-1),bd=[yd];function wd(o,t){return e.openBlock(),e.createElementBlock("svg",kd,[...bd])}const xd={render:wd},Jt={__name:"ItemIcon",props:{type:{type:String,required:!0},small:{type:Boolean,default:!1}},setup(o){return(t,n)=>(e.openBlock(),e.createElementBlock("span",null,[o.type==="dir"?(e.openBlock(),e.createBlock(e.unref(Wn),{key:0,class:e.normalizeClass({"h-5 w-5":o.small,"h-10 w-10 md:h-12 md:w-12 m-auto":!o.small})},null,8,["class"])):(e.openBlock(),e.createBlock(e.unref(xd),{key:1,class:e.normalizeClass({"h-5 w-5":o.small,"h-10 w-10 md:h-12 md:w-12 m-auto":!o.small})},null,8,["class"]))]))}},_d={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"absolute h-6 w-6 md:h-12 md:w-12 m-auto stroke-neutral-500 fill-white dark:fill-gray-700 dark:stroke-gray-600 z-10",viewBox:"0 0 24 24"},Ed=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 0 0 2-2V9.414a1 1 0 0 0-.293-.707l-5.414-5.414A1 1 0 0 0 12.586 3H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2"},null,-1),Sd=[Ed];function Nd(o,t){return e.openBlock(),e.createElementBlock("svg",_d,[...Sd])}const Vd={render:Nd},$d={class:"absolute -z-50 -top-96"},Bd={class:"text-neutral-700 dark:text-neutral-300 p-1 absolute text-center top-4 right-[-2rem] md:top-5 md:right-[-2.4rem] z-20 text-xs"},Cd={__name:"DragItem",props:{count:{type:Number,default:0}},setup(o){const t=o;return(n,s)=>(e.openBlock(),e.createElementBlock("div",$d,[e.createVNode(e.unref(Vd)),e.createElementVNode("div",Bd,e.toDisplayString(t.count),1)]))}},Dd={class:"flex"},Md=["aria-label"],Ad={class:"ml-auto mb-2"},Td={key:0,class:"p-2 border font-normal whitespace-pre-wrap border-gray-200 dark:border-gray-700/50 dark:text-gray-200 rounded min-h-[200px] max-h-[60vh] text-xs overflow-auto"},Ld={key:1},Od={__name:"Text",emits:["success"],setup(o,{emit:t}){const n=t,s=e.ref(""),r=e.ref(""),a=e.ref(null),c=e.ref(!1),i=e.ref(""),l=e.ref(!1),d=e.inject("ServiceContainer"),{t:u}=d.i18n;e.onMounted(()=>{d.requester.send({url:"",method:"get",params:{q:"preview",adapter:d.modal.data.adapter,path:d.modal.data.item.path},responseType:"text"}).then(p=>{s.value=p,n("success")})});const m=()=>{c.value=!c.value,r.value=s.value},f=()=>{i.value="",l.value=!1,d.requester.send({url:"",method:"post",params:{q:"save",adapter:d.modal.data.adapter,path:d.modal.data.item.path},body:{content:r.value},responseType:"text"}).then(p=>{i.value=u("Updated."),s.value=p,n("success"),c.value=!c.value}).catch(p=>{i.value=u(p.message),l.value=!0})};return(p,v)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",Dd,[e.createElementVNode("div",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":e.unref(d).modal.data.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(e.unref(d).modal.data.item.basename),9,Md),e.createElementVNode("div",Ad,[c.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:f,class:"ml-1 px-2 py-1 rounded border border-transparent shadow-sm bg-blue-700/75 hover:bg-blue-700 dark:bg-gray-700 dark:hover:bg-gray-700/50 text-base font-medium text-white sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(u)("Save")),1)):e.createCommentVNode("",!0),e.unref(d).features.includes(e.unref(le).EDIT)?(e.openBlock(),e.createElementBlock("button",{key:1,class:"ml-1 px-2 py-1 text-blue-500",onClick:v[0]||(v[0]=g=>m())},e.toDisplayString(c.value?e.unref(u)("Cancel"):e.unref(u)("Edit")),1)):e.createCommentVNode("",!0)])]),e.createElementVNode("div",null,[c.value?(e.openBlock(),e.createElementBlock("div",Ld,[e.withDirectives(e.createElementVNode("textarea",{ref_key:"editInput",ref:a,"onUpdate:modelValue":v[1]||(v[1]=g=>r.value=g),class:"w-full p-2 rounded dark:bg-gray-700 dark:text-gray-200 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:selection:bg-gray-500 min-h-[200px] max-h-[60vh]",name:"text",id:"",cols:"30",rows:"10"},null,512),[[e.vModelText,r.value]])])):(e.openBlock(),e.createElementBlock("pre",Td,e.toDisplayString(s.value),1)),i.value.length?(e.openBlock(),e.createBlock(De,{key:2,onHidden:v[2]||(v[2]=g=>i.value=""),error:l.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(i.value),1)]),_:1},8,["error"])):e.createCommentVNode("",!0)])],64))}},Hd={class:"flex"},Fd=["aria-label"],Rd={class:"ml-auto mb-2"},Id={class:"w-full flex justify-center"},zd=["src"],jd={__name:"Image",emits:["success"],setup(o,{emit:t}){const n=t,s=e.inject("ServiceContainer"),{t:r}=s.i18n,a=e.ref(null),c=e.ref(null),i=e.ref(!1),l=e.ref(""),d=e.ref(!1),u=()=>{i.value=!i.value,i.value?c.value=new cr(a.value,{crop(f){}}):c.value.destroy()},m=()=>{c.value.getCroppedCanvas({width:795,height:341}).toBlob(f=>{l.value="",d.value=!1;const p=new FormData;p.set("file",f),s.requester.send({url:"",method:"post",params:{q:"upload",adapter:s.modal.data.adapter,path:s.modal.data.item.path},body:p}).then(v=>{l.value=r("Updated."),a.value.src=s.requester.getPreviewUrl(s.modal.data.adapter,s.modal.data.item),u(),n("success")}).catch(v=>{l.value=r(v.message),d.value=!0})})};return e.onMounted(()=>{n("success")}),(f,p)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",Hd,[e.createElementVNode("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":e.unref(s).modal.data.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(e.unref(s).modal.data.item.basename),9,Fd),e.createElementVNode("div",Rd,[i.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:m,class:"ml-1 px-2 py-1 rounded border border-transparent shadow-sm bg-blue-700/75 hover:bg-blue-700 dark:bg-gray-700 dark:hover:bg-gray-700/50 text-base font-medium text-white sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(r)("Crop")),1)):e.createCommentVNode("",!0),e.unref(s).features.includes(e.unref(le).EDIT)?(e.openBlock(),e.createElementBlock("button",{key:1,class:"ml-1 px-2 py-1 text-blue-500",onClick:p[0]||(p[0]=v=>u())},e.toDisplayString(i.value?e.unref(r)("Cancel"):e.unref(r)("Edit")),1)):e.createCommentVNode("",!0)])]),e.createElementVNode("div",Id,[e.createElementVNode("img",{ref_key:"image",ref:a,class:"max-w-[50vh] max-h-[50vh]",src:e.unref(s).requester.getPreviewUrl(e.unref(s).modal.data.adapter,e.unref(s).modal.data.item),alt:""},null,8,zd)]),l.value.length?(e.openBlock(),e.createBlock(De,{key:0,onHidden:p[1]||(p[1]=v=>l.value=""),error:d.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(l.value),1)]),_:1},8,["error"])):e.createCommentVNode("",!0)],64))}},Pd={class:"flex"},Ud=["aria-label"],qd=e.createElementVNode("div",null,null,-1),Gd={__name:"Default",emits:["success"],setup(o,{emit:t}){const n=e.inject("ServiceContainer"),s=t;return e.onMounted(()=>{s("success")}),(r,a)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",Pd,[e.createElementVNode("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":e.unref(n).modal.data.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(e.unref(n).modal.data.item.basename),9,Ud)]),qd],64))}},Kd=["aria-label"],Wd={class:"w-full aspect-video",preload:"",controls:""},Yd=["src"],Jd={__name:"Video",emits:["success"],setup(o,{emit:t}){const n=e.inject("ServiceContainer"),s=t,r=()=>n.requester.getPreviewUrl(n.modal.data.adapter,n.modal.data.item);return e.onMounted(()=>{s("success")}),(a,c)=>(e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":e.unref(n).modal.data.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(e.unref(n).modal.data.item.basename),9,Kd),e.createElementVNode("div",null,[e.createElementVNode("video",Wd,[e.createElementVNode("source",{src:r(),type:"video/mp4"},null,8,Yd),e.createTextVNode(" Your browser does not support the video tag. ")])])]))}},Xd=["aria-label"],Zd={class:"w-full",controls:""},Qd=["src"],eu={__name:"Audio",emits:["success"],setup(o,{emit:t}){const n=t,s=e.inject("ServiceContainer"),r=()=>s.requester.getPreviewUrl(s.modal.data.adapter,s.modal.data.item);return e.onMounted(()=>{n("success")}),(a,c)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":e.unref(s).modal.data.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(e.unref(s).modal.data.item.basename),9,Xd),e.createElementVNode("div",null,[e.createElementVNode("audio",Zd,[e.createElementVNode("source",{src:r(),type:"audio/mpeg"},null,8,Qd),e.createTextVNode(" Your browser does not support the audio element. ")])])],64))}},tu=["aria-label"],ou=["data"],nu=["src"],ru=e.createElementVNode("p",null,[e.createTextVNode(" Your browser does not support PDFs. "),e.createElementVNode("a",{href:"https://example.com/test.pdf"},"Download the PDF"),e.createTextVNode(" . ")],-1),su=[ru],au={__name:"Pdf",emits:["success"],setup(o,{emit:t}){const n=e.inject("ServiceContainer"),s=t,r=()=>n.requester.getPreviewUrl(n.modal.data.adapter,n.modal.data.item);return e.onMounted(()=>{s("success")}),(a,c)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":e.unref(n).modal.data.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(e.unref(n).modal.data.item.basename),9,tu),e.createElementVNode("div",null,[e.createElementVNode("object",{class:"h-[60vh]",data:r(),type:"application/pdf",width:"100%",height:"100%"},[e.createElementVNode("iframe",{class:"border-0",src:r(),width:"100%",height:"100%"},su,8,nu)],8,ou)])],64))}},lu={class:"sm:flex sm:items-start"},cu={class:"mt-3 text-center sm:mt-0 sm:text-left w-full"},iu={key:0},du={class:"text-gray-700 dark:text-gray-200 text-sm"},uu={key:0,class:"flex leading-5"},mu=e.createElementVNode("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e.createElementVNode("circle",{class:"opacity-25 stroke-blue-900 dark:stroke-blue-100",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e.createElementVNode("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),fu={class:"py-2 flex font-normal break-all dark:text-gray-200 rounded text-xs"},pu={class:"font-bold"},vu={class:"font-bold pl-2"},hu={key:0,class:"text-xs text-gray-600 dark:text-gray-400"},Jn={__name:"ModalPreview",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,s=e.ref(!1),r=i=>(t.modal.data.item.mime_type??"").startsWith(i),a=()=>{const i=t.requester.getDownloadUrl(t.modal.data.adapter,t.modal.data.item);t.emitter.emit("vf-download",i),t.emitter.emit("vf-modal-close")},c=t.features.includes(le.PREVIEW);return c||(s.value=!0),(i,l)=>(e.openBlock(),e.createBlock(Te,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:l[6]||(l[6]=d=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Close")),1),e.unref(t).features.includes(e.unref(le).DOWNLOAD)?(e.openBlock(),e.createElementBlock("div",{key:0,class:"vf-btn vf-btn-primary",onClick:l[7]||(l[7]=d=>a())},e.toDisplayString(e.unref(n)("Download")),1)):e.createCommentVNode("",!0)]),default:e.withCtx(()=>[e.createElementVNode("div",lu,[e.createElementVNode("div",cu,[e.unref(c)?(e.openBlock(),e.createElementBlock("div",iu,[r("text")?(e.openBlock(),e.createBlock(Od,{key:0,onSuccess:l[0]||(l[0]=d=>s.value=!0)})):r("image")?(e.openBlock(),e.createBlock(jd,{key:1,onSuccess:l[1]||(l[1]=d=>s.value=!0)})):r("video")?(e.openBlock(),e.createBlock(Jd,{key:2,onSuccess:l[2]||(l[2]=d=>s.value=!0)})):r("audio")?(e.openBlock(),e.createBlock(eu,{key:3,onSuccess:l[3]||(l[3]=d=>s.value=!0)})):r("application/pdf")?(e.openBlock(),e.createBlock(au,{key:4,onSuccess:l[4]||(l[4]=d=>s.value=!0)})):(e.openBlock(),e.createBlock(Gd,{key:5,onSuccess:l[5]||(l[5]=d=>s.value=!0)}))])):e.createCommentVNode("",!0),e.createElementVNode("div",du,[s.value===!1?(e.openBlock(),e.createElementBlock("div",uu,[mu,e.createElementVNode("span",null,e.toDisplayString(e.unref(n)("Loading")),1)])):e.createCommentVNode("",!0)])])]),e.createElementVNode("div",fu,[e.createElementVNode("div",null,[e.createElementVNode("span",pu,e.toDisplayString(e.unref(n)("File Size"))+": ",1),e.createTextVNode(e.toDisplayString(e.unref(t).filesize(e.unref(t).modal.data.item.file_size)),1)]),e.createElementVNode("div",null,[e.createElementVNode("span",vu,e.toDisplayString(e.unref(n)("Last Modified"))+": ",1),e.createTextVNode(" "+e.toDisplayString(e.unref(Yn)(e.unref(t).modal.data.item.last_modified)),1)])]),e.unref(t).features.includes(e.unref(le).DOWNLOAD)?(e.openBlock(),e.createElementBlock("div",hu)):e.createCommentVNode("",!0)]),_:1}))}},gu=["data-type","data-item","data-index"],Xt={__name:"Item",props:{item:{type:Object},index:{type:Number},dragImage:{type:Object}},setup(o){const t=e.inject("ServiceContainer"),n=t.dragSelect,s=o,r=f=>{f.type==="dir"?(t.emitter.emit("vf-search-exit"),t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:f.path}})):t.modal.open(Jn,{adapter:t.fs.adapter,item:f})},a={mounted(f,p,v,g){v.props.draggable&&(f.addEventListener("dragstart",k=>c(k,p.value)),f.addEventListener("dragover",k=>l(k,p.value)),f.addEventListener("drop",k=>i(k,p.value)))},beforeUnmount(f,p,v,g){v.props.draggable&&(f.removeEventListener("dragstart",c),f.removeEventListener("dragover",l),f.removeEventListener("drop",i))}},c=(f,p)=>{if(f.altKey||f.ctrlKey||f.metaKey)return f.preventDefault(),!1;n.isDraggingRef.value=!0,f.dataTransfer.setDragImage(s.dragImage.$el,0,15),f.dataTransfer.effectAllowed="all",f.dataTransfer.dropEffect="copy",f.dataTransfer.setData("items",JSON.stringify(n.getSelected()))},i=(f,p)=>{f.preventDefault(),n.isDraggingRef.value=!1;let v=JSON.parse(f.dataTransfer.getData("items"));if(v.find(g=>g.storage!==t.fs.adapter)){alert("Moving items between different storages is not supported yet.");return}t.modal.open(po,{items:{from:v,to:p}})},l=(f,p)=>{f.preventDefault(),!p||p.type!=="dir"||n.getSelection().find(v=>v===f.currentTarget)?(f.dataTransfer.dropEffect="none",f.dataTransfer.effectAllowed="none"):f.dataTransfer.dropEffect="copy"};let d=null;const u=()=>{d&&clearTimeout(d)},m=f=>{d=setTimeout(()=>{const p=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!1,view:window,button:2,buttons:0,clientX:f.target.getBoundingClientRect().x,clientY:f.target.getBoundingClientRect().y});f.target.dispatchEvent(p)},500)};return(f,p)=>e.withDirectives((e.openBlock(),e.createElementBlock("div",{style:e.normalizeStyle({opacity:e.unref(n).isDraggingRef.value&&e.unref(n).getSelection().find(v=>f.$el===v)?"0.5 !important":""}),class:e.normalizeClass(["vf-item-"+e.unref(n).explorerId]),"data-type":o.item.type,key:o.item.path,"data-item":JSON.stringify(o.item),"data-index":o.index,onDblclick:p[0]||(p[0]=v=>r(o.item)),onTouchstart:p[1]||(p[1]=v=>m(v)),onTouchend:p[2]||(p[2]=v=>u()),onContextmenu:p[3]||(p[3]=e.withModifiers(v=>e.unref(t).emitter.emit("vf-contextmenu-show",{event:v,items:e.unref(n).getSelected(),target:o.item}),["prevent"]))},[e.renderSlot(f.$slots,"default")],46,gu)),[[a,o.item]])}},ku={key:0,class:"grid grid-cols-12 px-1 bg-neutral-50 dark:bg-gray-800 border-b border-neutral-300 dark:border-gray-700 text-xs select-none divide-x"},yu={class:"relative"},bu={class:"grid grid-cols-12 items-center"},wu={class:"flex col-span-7 items-center"},xu={class:"overflow-ellipsis overflow-hidden whitespace-nowrap"},_u={class:"col-span-5 overflow-ellipsis overflow-hidden whitespace-nowrap"},Eu={class:"grid grid-cols-12 items-center"},Su={class:"flex col-span-7 items-center"},Nu={class:"overflow-ellipsis overflow-hidden whitespace-nowrap"},Vu={class:"col-span-2 text-center"},$u={class:"col-span-3 overflow-ellipsis overflow-hidden whitespace-nowrap px-1 md:px-3"},Bu={class:"relative"},Cu=["data-src","alt"],Du={key:2,class:"absolute hidden md:block top-1/2 w-full text-center text-neutral-500"},Mu={class:"break-all"},Au={key:1,class:"pointer-events-none select-none cursor-pointer w-full h-full bg-slate-100 text-slate-500 absolute flex items-center justify-center"},Tu={__name:"Explorer",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,s=p=>p==null?void 0:p.substring(0,3),r=e.ref(null),a=e.ref(""),c=t.dragSelect;e.ref(!1);const i=e.ref(!1),l=e.ref(null);let d;t.emitter.on("vf-fullscreen-toggle",()=>{c.area.value.style.height=null}),t.emitter.on("vf-search-query",({newQuery:p})=>{a.value=p,p?t.emitter.emit("vf-fetch",{params:{q:"search",adapter:t.fs.adapter,path:t.fs.data.dirname,filter:p},onSuccess:v=>{v.files.length||t.emitter.emit("vf-toast-push",{label:n("No search result found.")})}}):t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:t.fs.data.dirname}})});const u=e.reactive({active:!1,column:"",order:""}),m=(p=!0)=>{let v=[...t.fs.data.files],g=u.column,k=u.order==="asc"?1:-1;if(!p)return v;const x=(h,w)=>typeof h=="string"&&typeof w=="string"?h.toLowerCase().localeCompare(w.toLowerCase()):h<w?-1:h>w?1:0;return u.active&&(v=v.slice().sort((h,w)=>x(h[g],w[g])*k)),v},f=p=>{u.active&&u.column===p?(u.active=u.order==="asc",u.column=p,u.order="desc"):(u.active=!0,u.column=p,u.order="asc")};return e.onMounted(()=>{d=new lr(c.area.value),l.value.addEventListener("dragover",v=>{v.preventDefault(),i.value=!0}),l.value.addEventListener("dragleave",v=>{v.preventDefault(),i.value=!1});function p(v,g){return g.isFile?new Promise((k,x)=>{g.file(h=>{v(g,h),k()},x)}):g.isDirectory?new Promise((k,x)=>{g.createReader().readEntries(async w=>{try{for(const T of w)await p(v,T);k()}catch(T){x(T)}},x)}):Promise.resolve()}l.value.addEventListener("drop",async v=>{v.preventDefault(),i.value=!1;const g=/^[/\\](.+)/,k=[],x=[...v.dataTransfer.items].map(async h=>{h.kind==="file"&&await p((w,T)=>{const V=g.exec(w.fullPath);k.push({file:T,path:V[1]})},h.webkitGetAsEntry())});await Promise.all(x),window.tmpFileList=k,t.modal.open(Un,{items:c.getSelected()})})}),e.onUpdated(()=>{d.update()}),e.onBeforeUnmount(()=>{d.destroy()}),(p,v)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"dropArea",ref:l,class:"relative flex-auto flex flex-col overflow-hidden"},[e.unref(t).view==="list"||a.value.length?(e.openBlock(),e.createElementBlock("div",ku,[e.createElementVNode("div",{onClick:v[0]||(v[0]=g=>f("basename")),class:"col-span-7 vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(n)("Name"))+" ",1),e.withDirectives(e.createVNode(kt,{direction:u.order},null,8,["direction"]),[[e.vShow,u.active&&u.column==="basename"]])]),a.value.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,onClick:v[1]||(v[1]=g=>f("file_size")),class:"justify-center col-span-2 vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(n)("Size"))+" ",1),e.withDirectives(e.createVNode(kt,{direction:u.order},null,8,["direction"]),[[e.vShow,u.active&&u.column==="file_size"]])])),a.value.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:1,onClick:v[2]||(v[2]=g=>f("last_modified")),class:"justify-center col-span-3 vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(n)("Date"))+" ",1),e.withDirectives(e.createVNode(kt,{direction:u.order},null,8,["direction"]),[[e.vShow,u.active&&u.column==="last_modified"]])])),a.value.length?(e.openBlock(),e.createElementBlock("div",{key:2,onClick:v[3]||(v[3]=g=>f("path")),class:"justify-center col-span-5 vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(n)("Filepath"))+" ",1),e.withDirectives(e.createVNode(kt,{direction:u.order},null,8,["direction"]),[[e.vShow,u.active&&u.column==="path"]])])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),e.createElementVNode("div",yu,[e.createVNode(Cd,{ref_key:"dragImage",ref:r,count:e.unref(c).getCount()},null,8,["count"])]),e.createElementVNode("div",{ref:e.unref(c).scrollBarContainer,class:e.normalizeClass(["vf-explorer-scrollbar-container",[{"grid-view":e.unref(t).view==="grid"}]])},[e.createElementVNode("div",{ref:e.unref(c).scrollBar,class:"w-5 bg-transparent pointer-events-none"},null,512)],2),e.createElementVNode("div",{ref:e.unref(c).area,class:e.normalizeClass([{"resize-y":!e.unref(t).fullScreen},"h-full w-full text-xs vf-explorer-scrollbar vf-selector-area min-h-[150px] z-0 overflow-y-auto"]),onContextmenu:v[4]||(v[4]=e.withModifiers(g=>e.unref(t).emitter.emit("vf-contextmenu-show",{event:g,items:e.unref(c).getSelected()}),["self","prevent"]))},[a.value.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(m(),(g,k)=>(e.openBlock(),e.createBlock(Xt,{item:g,index:k,dragImage:r.value,class:"vf-item vf-item-list"},{default:e.withCtx(()=>[e.createElementVNode("div",bu,[e.createElementVNode("div",wu,[e.createVNode(Jt,{type:g.type,small:e.unref(t).compactListView},null,8,["type","small"]),e.createElementVNode("span",xu,e.toDisplayString(g.basename),1)]),e.createElementVNode("div",_u,e.toDisplayString(g.path),1)])]),_:2},1032,["item","index","dragImage"]))),256)):e.createCommentVNode("",!0),e.unref(t).view==="list"&&!a.value.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(m(),(g,k)=>(e.openBlock(),e.createBlock(Xt,{item:g,index:k,dragImage:r.value,class:"vf-item vf-item-list",draggable:"true"},{default:e.withCtx(()=>[e.createElementVNode("div",Eu,[e.createElementVNode("div",Su,[e.createVNode(Jt,{type:g.type,small:e.unref(t).compactListView},null,8,["type","small"]),e.createElementVNode("span",Nu,e.toDisplayString(g.basename),1)]),e.createElementVNode("div",Vu,e.toDisplayString(g.file_size?e.unref(t).filesize(g.file_size):""),1),e.createElementVNode("div",$u,e.toDisplayString(e.unref(Yn)(g.last_modified)),1)])]),_:2},1032,["item","index","dragImage"]))),256)):e.createCommentVNode("",!0),e.unref(t).view==="grid"&&!a.value.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:2},e.renderList(m(!1),(g,k)=>(e.openBlock(),e.createBlock(Xt,{item:g,index:k,dragImage:r.value,class:"vf-item vf-item-grid",draggable:"true"},{default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createElementVNode("div",Bu,[(g.mime_type??"").startsWith("image")&&e.unref(t).showThumbnails?(e.openBlock(),e.createElementBlock("img",{src:"data:image/png;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",class:"lazy h-10 md:h-12 m-auto","data-src":e.unref(t).requester.getPreviewUrl(e.unref(t).fs.adapter,g),alt:g.basename,key:g.path},null,8,Cu)):(e.openBlock(),e.createBlock(Jt,{key:1,type:g.type},null,8,["type"])),!((g.mime_type??"").startsWith("image")&&e.unref(t).showThumbnails)&&g.type!=="dir"?(e.openBlock(),e.createElementBlock("div",Du,e.toDisplayString(s(g.extension)),1)):e.createCommentVNode("",!0)]),e.createElementVNode("span",Mu,e.toDisplayString(e.unref(fo)(g.basename)),1)])]),_:2},1032,["item","index","dragImage"]))),256)):e.createCommentVNode("",!0)],34),e.createVNode(ld),i.value?(e.openBlock(),e.createElementBlock("div",Au,e.toDisplayString(e.unref(n)("Release to drop these files.")),1)):e.createCommentVNode("",!0)],512))}},Lu=["onClick"],Ou=e.createElementVNode("span",{class:"px-1"},null,-1),Hu={__name:"ContextMenu",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,s=e.ref(null),r=e.ref([]),a=e.ref(""),c=e.reactive({active:!1,items:[],positions:{left:0,top:0}}),i=e.computed(()=>c.items.filter(m=>m.key==null||t.features.includes(m.key)));t.emitter.on("vf-context-selected",m=>{r.value=m});const l={newfolder:{key:le.NEW_FOLDER,title:()=>n("New Folder"),action:()=>t.modal.open(zn)},delete:{key:le.DELETE,title:()=>n("Delete"),action:()=>{t.modal.open(Pn,{items:r})}},refresh:{title:()=>n("Refresh"),action:()=>{t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:t.fs.data.dirname}})}},preview:{key:le.PREVIEW,title:()=>n("Preview"),action:()=>t.modal.open(Jn,{adapter:t.fs.adapter,item:r.value[0]})},open:{title:()=>n("Open"),action:()=>{t.emitter.emit("vf-search-exit"),t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:r.value[0].path}})}},openDir:{title:()=>n("Open containing folder"),action:()=>{t.emitter.emit("vf-search-exit"),t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:r.value[0].dir}})}},download:{key:le.DOWNLOAD,link:e.computed(()=>t.requester.getDownloadUrl(t.fs.adapter,r.value[0])),title:()=>n("Download"),action:()=>{}},archive:{key:le.ARCHIVE,title:()=>n("Archive"),action:()=>t.modal.open(Gn,{items:r})},unarchive:{key:le.UNARCHIVE,title:()=>n("Unarchive"),action:()=>t.modal.open(qn,{items:r})},rename:{key:le.RENAME,title:()=>n("Rename"),action:()=>t.modal.open(jn,{items:r})}},d=m=>{t.emitter.emit("vf-contextmenu-hide"),m.action()};t.emitter.on("vf-search-query",({newQuery:m})=>{a.value=m}),t.emitter.on("vf-contextmenu-show",({event:m,items:f,target:p=null})=>{if(c.items=[],a.value)if(p)c.items.push(l.openDir),t.emitter.emit("vf-context-selected",[p]);else return;else!p&&!a.value?(c.items.push(l.refresh),c.items.push(l.newfolder),t.emitter.emit("vf-context-selected",[])):f.length>1&&f.some(v=>v.path===p.path)?(c.items.push(l.refresh),c.items.push(l.archive),c.items.push(l.delete),t.emitter.emit("vf-context-selected",f)):(p.type==="dir"?c.items.push(l.open):(c.items.push(l.preview),c.items.push(l.download)),c.items.push(l.rename),p.mime_type==="application/zip"?c.items.push(l.unarchive):c.items.push(l.archive),c.items.push(l.delete),t.emitter.emit("vf-context-selected",[p]));u(m)}),t.emitter.on("vf-contextmenu-hide",()=>{c.active=!1});const u=m=>{const f=t.dragSelect.area.value,p=t.root.getBoundingClientRect(),v=f.getBoundingClientRect();let g=m.clientX-p.left,k=m.clientY-p.top;c.active=!0,e.nextTick(()=>{var T;const x=(T=s.value)==null?void 0:T.getBoundingClientRect();let h=(x==null?void 0:x.height)??0,w=(x==null?void 0:x.width)??0;g=v.right-m.pageX+window.scrollX<w?g-w:g,k=v.bottom-m.pageY+window.scrollY<h?k-h:k,c.positions={left:g+"px",top:k+"px"}})};return(m,f)=>c.active?(e.openBlock(),e.createElementBlock("ul",{key:0,class:"z-30 absolute text-xs bg-neutral-50 dark:bg-gray-800 text-gray-700 dark:text-gray-200 border border-neutral-300 dark:border-gray-600 shadow rounded select-none",ref_key:"contextmenu",ref:s,style:e.normalizeStyle(c.positions)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,p=>(e.openBlock(),e.createElementBlock("li",{class:"px-2 py-1.5 cursor-pointer hover:bg-neutral-200 dark:hover:bg-gray-700",key:p.title,onClick:v=>d(p)},[Ou,e.createElementVNode("span",null,e.toDisplayString(p.title()),1)],8,Lu))),128))],4)):e.createCommentVNode("",!0)}},Fu={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"h-5 w-5",viewBox:"0 0 24 24"},Ru=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"},null,-1),Iu=[Ru];function zu(o,t){return e.openBlock(),e.createElementBlock("svg",Fu,[...Iu])}const ju={render:zu},Pu={class:"p-1 text-xs border-t border-neutral-300 dark:border-gray-700/50 flex justify-between select-none"},Uu={class:"flex leading-5 items-center"},qu=["aria-label"],Gu=["value"],Ku={class:"ml-3"},Wu={key:0},Yu={class:"ml-1"},Ju={class:"flex leading-5 items-center justify-end"},Xu=["disabled"],Zu=["aria-label"],Qu=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 stroke-slate-500 cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})],-1),em=[Qu],tm={__name:"Statusbar",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,{setStore:s}=t.storage,r=t.dragSelect,a=()=>{t.emitter.emit("vf-search-exit"),t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter}}),s("adapter",t.fs.adapter)},c=e.ref("");t.emitter.on("vf-search-query",({newQuery:l})=>{c.value=l});const i=e.computed(()=>{const l=t.selectButton.multiple?r.getSelected().length>0:r.getSelected().length===1;return t.selectButton.active&&l});return(l,d)=>(e.openBlock(),e.createElementBlock("div",Pu,[e.createElementVNode("div",Uu,[e.createElementVNode("div",{class:"mx-2","aria-label":e.unref(n)("Storage"),"data-microtip-position":"top-right",role:"tooltip"},[e.createVNode(e.unref(ju))],8,qu),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":d[0]||(d[0]=u=>e.unref(t).fs.adapter=u),onChange:a,class:"py-0.5 text-sm text-slate-500 border dark:border-gray-600 dark:text-neutral-50 dark:bg-gray-700 rounded pl-2 pr-8"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(t).fs.data.storages,u=>(e.openBlock(),e.createElementBlock("option",{value:u},e.toDisplayString(u),9,Gu))),256))],544),[[e.vModelSelect,e.unref(t).fs.adapter]]),e.createElementVNode("div",Ku,[c.value.length?(e.openBlock(),e.createElementBlock("span",Wu,e.toDisplayString(e.unref(t).fs.data.files.length)+" items found. ",1)):e.createCommentVNode("",!0),e.createElementVNode("span",Yu,e.toDisplayString(e.unref(t).dragSelect.getCount()>0?e.unref(n)("%s item(s) selected.",e.unref(t).dragSelect.getCount()):""),1)])]),e.createElementVNode("div",Ju,[e.unref(t).selectButton.active?(e.openBlock(),e.createElementBlock("button",{key:0,class:e.normalizeClass(["vf-btn py-0 vf-btn-primary",{disabled:!i.value}]),disabled:!i.value,onClick:d[1]||(d[1]=u=>e.unref(t).selectButton.click(e.unref(r).getSelected(),u))},e.toDisplayString(e.unref(n)("Select")),11,Xu)):e.createCommentVNode("",!0),e.createElementVNode("span",{class:"mr-1","aria-label":e.unref(n)("Settings"),"data-microtip-position":"top-left",role:"tooltip",onClick:d[2]||(d[2]=u=>e.unref(t).emitter.emit("vf-modal-show",{type:"about"}))},em,8,Zu)])]))}},om={__name:"VueFinder",props:{id:{type:String,default:"vf"},request:{type:[String,Object],required:!0},persist:{type:Boolean,default:!1},path:{type:String,default:""},features:{type:[Array,Boolean],default:!0},debug:{type:Boolean,default:!1},theme:{type:String,default:"system"},locale:{type:String,default:null},maxHeight:{type:String,default:"600px"},maxFileSize:{type:String,default:"10mb"},fullScreen:{type:Boolean,default:!1},showThumbnails:{type:Boolean,default:!0},selectButton:{type:Object,default(o){return{active:!1,multiple:!1,click:t=>{},...o}}}},emits:["select"],setup(o,{expose:t,emit:n}){const s=n,a=Bs(o,e.inject("VueFinderOptions"));e.provide("ServiceContainer",a);const{setStore:c}=a.storage,i=e.ref(null);a.root=i;const l=a.dragSelect,d=m=>{Object.assign(a.fs.data,m),l.clearSelection(),l.refreshSelection()};let u;return a.emitter.on("vf-fetch-abort",()=>{u.abort(),a.fs.loading=!1}),a.emitter.on("vf-fetch",({params:m,body:f=null,onSuccess:p=null,onError:v=null,noCloseModal:g=!1})=>{["index","search"].includes(m.q)&&(u&&u.abort(),a.fs.loading=!0),u=new AbortController;const k=u.signal;a.requester.send({url:"",method:m.m||"get",params:m,body:f,abortSignal:k}).then(x=>{a.fs.adapter=x.adapter,a.persist&&(a.fs.path=x.dirname,c("path",a.fs.path)),["index","search"].includes(m.q)&&(a.fs.loading=!1),g||a.modal.close(),m.q==="index"&&x.sessionKey&&(window.vueFinderSessionKey=x.sessionKey,window.vueFinderSessionKeyDate=new Date),d(x),p&&p(x)}).catch(x=>{console.error(x),v&&v(x)})}),a.emitter.on("vf-download",m=>{console.log("download")}),e.onMounted(()=>{let m={};a.fs.path.includes("://")&&(m={adapter:a.fs.path.split("://")[0],path:a.fs.path}),a.emitter.emit("vf-fetch",{params:{q:"index",adapter:a.fs.adapter,...m}}),l.onSelect(f=>{s("select",f)})}),t({app:a}),(m,f)=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder",ref_key:"root",ref:i},[e.createElementVNode("div",{class:e.normalizeClass(e.unref(a).theme.actualValue)},[e.createElementVNode("div",{class:e.normalizeClass([e.unref(a).fullscreen?"fixed w-screen inset-0 z-20":"relative rounded-md","border flex flex-col bg-white dark:bg-gray-800 text-gray-700 dark:text-neutral-400 border-neutral-300 dark:border-gray-900 min-w-min select-none"]),style:e.normalizeStyle(e.unref(a).fullscreen?"":"height: 100%; width: 100%;"),onMousedown:f[0]||(f[0]=p=>e.unref(a).emitter.emit("vf-contextmenu-hide")),onTouchstart:f[1]||(f[1]=p=>e.unref(a).emitter.emit("vf-contextmenu-hide"))},[e.createVNode(Hc),e.createVNode(sd),e.createVNode(Tu),e.createVNode(tm)],38),e.createVNode(e.Transition,{name:"fade"},{default:e.withCtx(()=>[e.unref(a).modal.visible?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(a).modal.type),{key:0})):e.createCommentVNode("",!0)]),_:1}),e.createVNode(Hu)],2)],512))}},nm={install(o,t={}){t.i18n=t.i18n??{};let[n]=Object.keys(t.i18n);t.locale=t.locale??n??"en",o.provide("VueFinderOptions",t),o.component("VueFinder",om)}};module.exports=nm;
