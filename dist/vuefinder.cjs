"use strict";var Yn=Object.defineProperty;var Jn=(o,t,n)=>t in o?Yn(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n;var No=(o,t,n)=>(Jn(o,typeof t!="symbol"?t+"":t,n),n);const e=require("vue"),Xn=require("mitt"),Qn=require("dragselect"),Zn=require("@uppy/core"),er=require("@uppy/xhr-upload"),tr=require("vanilla-lazyload");require("cropperjs/dist/cropper.css");const or=require("cropperjs");require("microtip/microtip.css");var Yo;const Pt=(Yo=document.querySelector('meta[name="csrf-token"]'))==null?void 0:Yo.getAttribute("content");class nr{constructor(t){No(this,"config");this.config=t}get config(){return this.config}transformRequestParams(t){const n=this.config,s={};Pt!=null&&Pt!==""&&(s[n.xsrfHeaderName]=Pt);const r=Object.assign({},n.headers,s,t.headers),c=Object.assign({},n.params,t.params),l=t.body,i=n.baseUrl+t.url,a=t.method;let u;a!=="get"&&(l instanceof FormData?(u=l,n.body!=null&&Object.entries(this.config.body).forEach(([p,d])=>{u.append(p,d)})):(u={...l},n.body!=null&&Object.assign(u,this.config.body)));const m={url:i,method:a,headers:r,params:c,body:u};if(n.transformRequest!=null){const p=n.transformRequest({url:i,method:a,headers:r,params:c,body:u});p.url!=null&&(m.url=p.url),p.method!=null&&(m.method=p.method),p.params!=null&&(m.params=p.params??{}),p.headers!=null&&(m.headers=p.headers??{}),p.body!=null&&(m.body=p.body)}return m}getDownloadUrl(t,n){if(n.url!=null)return n.url;const s=this.transformRequestParams({url:"",method:"get",params:{q:"download",adapter:t,path:n.path}});return s.url+"?"+new URLSearchParams(s.params).toString()}getPreviewUrl(t,n){if(n.url!=null)return n.url;const s=this.transformRequestParams({url:"",method:"get",params:{q:"preview",adapter:t,path:n.path}});return s.url+"?"+new URLSearchParams(s.params).toString()}async send(t){const n=this.transformRequestParams(t),s=t.responseType||"json",r={method:t.method,headers:n.headers,signal:t.abortSignal},c=n.url+"?"+new URLSearchParams(n.params);if(n.method!=="get"&&n.body!=null){let i;n.body instanceof FormData?i=t.body:(i=JSON.stringify(n.body),r.headers["Content-Type"]="application/json"),r.body=i}const l=await fetch(c,r);if(l.ok)return await l[s]();throw await l.json()}}function rr(o){const t={baseUrl:"",headers:{},params:{},body:{},xsrfHeaderName:"X-CSRF-Token"};return typeof o=="string"?Object.assign(t,{baseUrl:o}):Object.assign(t,o),new nr(t)}function sr(o){let t=localStorage.getItem(o+"_storage");const n=e.reactive(JSON.parse(t??"{}"));e.watch(n,s);function s(){Object.keys(n).length?localStorage.setItem(o+"_storage",JSON.stringify(n)):localStorage.removeItem(o+"_storage")}function r(a,u){n[a]=u}function c(a){delete n[a]}function l(){Object.keys(n).map(a=>c(a))}return{getStore:(a,u=null)=>n.hasOwnProperty(a)?n[a]:u,setStore:r,removeStore:c,clearStore:l}}async function ar(o,t){const n=t[o];return typeof n=="function"?(await n()).default:n}function lr(o,t,n,s){const{getStore:r,setStore:c}=o,l=e.ref({}),i=e.ref(r("locale",t)),a=(p,d=t)=>{ar(p,s).then(f=>{l.value=f,c("locale",p),i.value=p,c("translations",f),Object.values(s).length>1&&(n.emit("vf-toast-push",{label:"The language is set to "+p}),n.emit("vf-language-saved"))}).catch(f=>{d?(n.emit("vf-toast-push",{label:"The selected locale is not yet supported!",type:"error"}),a(d,null)):n.emit("vf-toast-push",{label:"Locale cannot be loaded!",type:"error"})})};!r("locale")&&!s.length?a(t):l.value=r("translations");const u=(p,...d)=>d.length?u(p=p.replace("%s",d.shift()),...d):p;function m(p,...d){return l.value&&l.value.hasOwnProperty(p)?u(l.value[p],...d):u(p,...d)}return{t:m,changeLocale:a,locale:i}}const re={EDIT:"edit",NEW_FILE:"newfile",NEW_FOLDER:"newfolder",PREVIEW:"preview",ARCHIVE:"archive",UNARCHIVE:"unarchive",SEARCH:"search",RENAME:"rename",UPLOAD:"upload",DELETE:"delete",FULL_SCREEN:"fullscreen",DOWNLOAD:"download",LANGUAGE:"language"},cr=Object.values(re),ir="2.4.2";function Jo(o,t,n,s,r){return(t=Math,n=t.log,s=1024,r=n(o)/n(s)|0,o/t.pow(s,r)).toFixed(0)+" "+(r?"KMGTPEZY"[--r]+"iB":"B")}function Xo(o,t,n,s,r){return(t=Math,n=t.log,s=1e3,r=n(o)/n(s)|0,o/t.pow(s,r)).toFixed(0)+" "+(r?"KMGTPEZY"[--r]+"B":"B")}function dr(o){const t={k:1,m:2,g:3,t:4},s=/(\d+(?:\.\d+)?)\s?(k|m|g|t)?b?/i.exec(o);return s[1]*Math.pow(1024,t[s[2].toLowerCase()])}const Ae={SYSTEM:"system",LIGHT:"light",DARK:"dark"};function ur(o,t){const n=e.ref(Ae.SYSTEM),s=e.ref(Ae.LIGHT);n.value=o.getStore("theme",t??Ae.SYSTEM);const r=window.matchMedia("(prefers-color-scheme: dark)"),c=l=>{n.value===Ae.DARK||n.value===Ae.SYSTEM&&l.matches?s.value=Ae.DARK:s.value=Ae.LIGHT};return c(r),r.addEventListener("change",c),{value:n,actualValue:s,set(l){n.value=l,l!==Ae.SYSTEM?o.setStore("theme",l):o.removeStore("theme"),c(r)}}}function mr(){const o=e.shallowRef(null),t=e.ref(!1),n=e.ref();return{visible:t,type:o,data:n,open:(c,l=null)=>{t.value=!0,o.value=c,n.value=l},close:()=>{t.value=!1,o.value=null}}}/*!
 * OverlayScrollbars
 * Version: 2.7.3
 *
 * Copyright (c) Rene Haas | KingSora.
 * https://github.com/KingSora
 *
 * Released under the MIT license.
 */const we=(o,t)=>{const{o:n,u:s,_:r}=o;let c=n,l;const i=(m,p)=>{const d=c,f=m,v=p||(s?!s(d,f):d!==f);return(v||r)&&(c=f,l=d),[c,v,l]};return[t?m=>i(t(c,l),m):i,m=>[c,!!m,l]]},Qo=typeof window<"u"&&typeof document<"u",pe=Qo?window:{},yt=Math.max,fr=Math.min,Qt=Math.round,Zo=pe.cancelAnimationFrame,en=pe.requestAnimationFrame,_t=pe.setTimeout,Zt=pe.clearTimeout,Dt=o=>typeof pe[o]<"u"?pe[o]:void 0,pr=Dt("MutationObserver"),So=Dt("IntersectionObserver"),Et=Dt("ResizeObserver"),eo=Dt("ScrollTimeline"),tn=Qo&&Node.ELEMENT_NODE,{toString:hr,hasOwnProperty:qt}=Object.prototype,vr=/^\[object (.+)\]$/,ut=o=>o===void 0,Mt=o=>o===null,gr=o=>ut(o)||Mt(o)?`${o}`:hr.call(o).replace(vr,"$1").toLowerCase(),Se=o=>typeof o=="number",Tt=o=>typeof o=="string",on=o=>typeof o=="boolean",$e=o=>typeof o=="function",Ee=o=>Array.isArray(o),it=o=>typeof o=="object"&&!Ee(o)&&!Mt(o),At=o=>{const t=!!o&&o.length,n=Se(t)&&t>-1&&t%1==0;return Ee(o)||!$e(o)&&n?t>0&&it(o)?t-1 in o:!0:!1},Vt=o=>{if(!o||!it(o)||gr(o)!=="object")return!1;let t;const n="constructor",s=o[n],r=s&&s.prototype,c=qt.call(o,n),l=r&&qt.call(r,"isPrototypeOf");if(s&&!c&&!l)return!1;for(t in o);return ut(t)||qt.call(o,t)},Nt=o=>{const t=HTMLElement;return o?t?o instanceof t:o.nodeType===tn:!1},Lt=o=>{const t=Element;return o?t?o instanceof t:o.nodeType===tn:!1};function K(o,t){if(At(o))for(let n=0;n<o.length&&t(o[n],n,o)!==!1;n++);else o&&K(Object.keys(o),n=>t(o[n],n,o));return o}const Ot=(o,t)=>o.indexOf(t)>=0,Me=(o,t)=>o.concat(t),te=(o,t,n)=>(!Tt(t)&&At(t)?Array.prototype.push.apply(o,t):o.push(t),o),Pe=o=>Array.from(o||[]),nn=o=>Ee(o)?o:[o],to=o=>!!o&&!o.length,$o=o=>Pe(new Set(o)),ke=(o,t,n)=>{K(o,r=>r&&r.apply(void 0,t||[])),!n&&(o.length=0)},rn="paddingTop",sn="paddingRight",an="paddingLeft",ln="paddingBottom",cn="marginLeft",dn="marginRight",un="marginBottom",Ht="overflowX",Rt="overflowY",et="width",tt="height",ot="hidden",mn="visible",ho=(o,t,n,s)=>{if(o&&t){let r=!0;return K(n,c=>{const l=o[c],i=t[c];l!==i&&(r=!1)}),r}return!1},fn=(o,t)=>ho(o,t,["w","h"]),pn=(o,t)=>ho(o,t,["x","y"]),kr=(o,t)=>ho(o,t,["t","r","b","l"]),_e=()=>{},j=(o,...t)=>o.bind(0,...t),Ye=o=>{let t;const n=o?_t:en,s=o?Zt:Zo;return[r=>{s(t),t=n(r,$e(o)?o():o)},()=>s(t)]},hn=(o,t)=>{let n,s,r,c=_e;const{v:l,p:i,S:a}=t||{},u=function(v){c(),Zt(n),n=s=void 0,c=_e,o.apply(this,v)},m=f=>a&&s?a(s,f):f,p=()=>{c!==_e&&u(m(r)||r)},d=function(){const v=Pe(arguments),x=$e(l)?l():l;if(Se(x)&&x>=0){const E=$e(i)?i():i,g=Se(E)&&E>=0,h=x>0?_t:en,D=x>0?Zt:Zo,y=m(v)||v,$=u.bind(0,y);c();const T=h($,x);c=()=>D(T),g&&!n&&(n=_t(p,E)),s=r=y}else u(v)};return d.m=p,d},vn=(o,t)=>Object.prototype.hasOwnProperty.call(o,t),Oe=o=>o?Object.keys(o):[],W=(o,t,n,s,r,c,l)=>{const i=[t,n,s,r,c,l];return(typeof o!="object"||Mt(o))&&!$e(o)&&(o={}),K(i,a=>{K(a,(u,m)=>{const p=a[m];if(o===p)return!0;const d=Ee(p);if(p&&Vt(p)){const f=o[m];let v=f;d&&!Ee(f)?v=[]:!d&&!Vt(f)&&(v={}),o[m]=W(v,p)}else o[m]=d?p.slice():p})}),o},gn=(o,t)=>K(W({},o),(n,s,r)=>{n===void 0?delete r[s]:n&&Vt(n)&&(r[s]=gn(n))}),vo=o=>{for(const t in o)return!1;return!0},oo=(o,t,n)=>yt(o,fr(t,n)),Fe=o=>Pe(new Set((Ee(o)?o:(o||"").split(" ")).filter(t=>t))),zt=(o,t)=>o&&o.getAttribute(t),Bo=(o,t)=>o&&o.hasAttribute(t),xe=(o,t,n)=>{K(Fe(t),s=>{o&&o.setAttribute(s,n||"")})},Ne=(o,t)=>{K(Fe(t),n=>o&&o.removeAttribute(n))},It=(o,t)=>{const n=Fe(zt(o,t)),s=j(xe,o,t),r=(c,l)=>{const i=new Set(n);return K(Fe(c),a=>i[l](a)),Pe(i).join(" ")};return{$:c=>s(r(c,"delete")),O:c=>s(r(c,"add")),C:c=>{const l=Fe(c);return l.reduce((i,a)=>i&&n.includes(a),l.length>0)}}},kn=(o,t,n)=>{It(o,t).$(n)},dt=(o,t,n)=>(It(o,t).O(n),j(kn,o,t,n)),xt=(o,t,n,s)=>{(s?dt:kn)(o,t,n)},br=(o,t,n)=>It(o,t).C(n),bn=o=>It(o,"class"),go=(o,t)=>{bn(o).$(t)},St=(o,t)=>(bn(o).O(t),j(go,o,t)),yn=(o,t)=>{const n=[],s=t?Lt(t)&&t:document;return s?te(n,s.querySelectorAll(o)):n},yr=(o,t)=>{const n=t?Lt(t)&&t:document;return n?n.querySelector(o):null},$t=(o,t)=>Lt(o)?o.matches(t):!1,xn=o=>$t(o,"body"),no=o=>o?Pe(o.childNodes):[],nt=o=>o&&o.parentElement,Je=(o,t)=>Lt(o)&&o.closest(t),ro=o=>document.activeElement,xr=(o,t,n)=>{const s=Je(o,t),r=o&&yr(n,s),c=Je(r,t)===s;return s&&r?s===o||r===o||c&&Je(Je(o,n),t)!==s:!1},He=o=>{if(At(o))K(Pe(o),t=>He(t));else if(o){const t=nt(o);t&&t.removeChild(o)}},wn=(o,t,n)=>{if(n&&o){let s=t,r;return At(n)?(r=document.createDocumentFragment(),K(n,c=>{c===s&&(s=c.previousSibling),r.appendChild(c)})):r=n,t&&(s?s!==t&&(s=s.nextSibling):s=o.firstChild),o.insertBefore(r,s||null),()=>He(n)}return _e},fe=(o,t)=>wn(o,null,t),Co=(o,t)=>wn(nt(o),o&&o.nextSibling,t),Xe=o=>{const t=document.createElement("div");return xe(t,"class",o),t},_n=o=>{const t=Xe();return t.innerHTML=o.trim(),K(no(t),n=>He(n))},wr=/^--/,Do=(o,t)=>o.getPropertyValue(t)||o[t]||"",ko=o=>{const t=o||0;return isFinite(t)?t:0},gt=o=>ko(parseFloat(o||"")),Mo=o=>`${(ko(o)*100).toFixed(3)}%`,so=o=>`${ko(o)}px`;function rt(o,t){o&&K(t,(n,s)=>{try{const r=o.style,c=Se(n)?so(n):(n||"")+"";wr.test(s)?r.setProperty(s,c):r[s]=c}catch{}})}function je(o,t,n){const s=Tt(t);let r=s?"":{};if(o){const c=pe.getComputedStyle(o,n)||o.style;r=s?Do(c,t):t.reduce((l,i)=>(l[i]=Do(c,i),l),r)}return r}const Le=o=>je(o,"direction")==="rtl",To=(o,t,n)=>{const s=t?`${t}-`:"",r=n?`-${n}`:"",c=`${s}top${r}`,l=`${s}right${r}`,i=`${s}bottom${r}`,a=`${s}left${r}`,u=je(o,[c,l,i,a]);return{t:gt(u[c]),r:gt(u[l]),b:gt(u[i]),l:gt(u[a])}},Gt=(o,t)=>`translate${it(o)?`(${o.x},${o.y})`:`${t?"X":"Y"}(${o})`}`,_r={w:0,h:0},Ft=(o,t)=>t?{w:t[`${o}Width`],h:t[`${o}Height`]}:_r,Er=o=>Ft("inner",o||pe),ct=j(Ft,"offset"),En=j(Ft,"client"),ao=j(Ft,"scroll"),bo=o=>{const t=parseFloat(je(o,et))||0,n=parseFloat(je(o,tt))||0;return{w:t-Qt(t),h:n-Qt(n)}},Qe=o=>o.getBoundingClientRect(),lo=o=>!!(o&&(o[tt]||o[et])),Vn=(o,t)=>{const n=lo(o);return!lo(t)&&n},Ao=(o,t,n,s)=>{K(Fe(t),r=>{o.removeEventListener(r,n,s)})},ee=(o,t,n,s)=>{var r;const c=(r=s&&s.H)!=null?r:!0,l=s&&s.I||!1,i=s&&s.A||!1,a={passive:c,capture:l};return j(ke,Fe(t).map(u=>{const m=i?p=>{Ao(o,u,m,l),n(p)}:n;return o.addEventListener(u,m,a),j(Ao,o,u,m,l)}))},yo=o=>o.stopPropagation(),Lo=o=>o.preventDefault(),Vr={x:0,y:0},Wt=o=>{const t=o&&Qe(o);return t?{x:t.left+pe.scrollX,y:t.top+pe.scrollY}:Vr},Bt=(o,t,n)=>n?n.n?-o+0:n.i?t-o:o:o,Oo=(o,t)=>[Bt(0,o,t),Bt(o,o,t)],Ho=(o,t,n)=>oo(0,1,Bt(o,t,n)/t||0),Re=(o,t)=>{const{x:n,y:s}=Se(t)?{x:t,y:t}:t||{};Se(n)&&(o.scrollLeft=n),Se(s)&&(o.scrollTop=s)},st=o=>({x:o.scrollLeft,y:o.scrollTop}),Ro=(o,t)=>{K(nn(t),o)},co=o=>{const t=new Map,n=(c,l)=>{if(c){const i=t.get(c);Ro(a=>{i&&i[a?"delete":"clear"](a)},l)}else t.forEach(i=>{i.clear()}),t.clear()},s=(c,l)=>{if(Tt(c)){const u=t.get(c)||new Set;return t.set(c,u),Ro(m=>{$e(m)&&u.add(m)},l),j(n,c,l)}on(l)&&l&&n();const i=Oe(c),a=[];return K(i,u=>{const m=c[u];m&&te(a,s(u,m))}),j(ke,a)},r=(c,l)=>{K(Pe(t.get(c)),i=>{l&&!to(l)?i.apply(0,l):i()})};return s(o||{}),[s,n,r]},zo=o=>JSON.stringify(o,(t,n)=>{if($e(n))throw 0;return n}),Io=(o,t)=>o?`${t}`.split(".").reduce((n,s)=>n&&vn(n,s)?n[s]:void 0,o):void 0,Nr={paddingAbsolute:!1,showNativeOverlaidScrollbars:!1,update:{elementEvents:[["img","load"]],debounce:[0,33],attributes:null,ignoreMutation:null},overflow:{x:"scroll",y:"scroll"},scrollbars:{theme:"os-theme-dark",visibility:"auto",autoHide:"never",autoHideDelay:1300,autoHideSuspend:!1,dragScroll:!0,clickScroll:!1,pointers:["mouse","touch","pen"]}},Nn=(o,t)=>{const n={},s=Me(Oe(t),Oe(o));return K(s,r=>{const c=o[r],l=t[r];if(it(c)&&it(l))W(n[r]={},Nn(c,l)),vo(n[r])&&delete n[r];else if(vn(t,r)&&l!==c){let i=!0;if(Ee(c)||Ee(l))try{zo(c)===zo(l)&&(i=!1)}catch{}i&&(n[r]=l)}}),n},Fo=(o,t,n)=>s=>[Io(o,s),n||Io(t,s)!==void 0],mt="data-overlayscrollbars",wt="os-environment",kt=`${wt}-scrollbar-hidden`,Kt=`${mt}-initialize`,me=mt,Sn=`${me}-overflow-x`,$n=`${me}-overflow-y`,Bn="overflowVisible",Sr="scrollbarPressed",io="updating",$r="body",De=`${mt}-viewport`,Br="arrange",Cn="scrollbarHidden",Ze=Bn,uo=`${mt}-padding`,Cr=Ze,jo=`${mt}-content`,xo="os-size-observer",Dr=`${xo}-appear`,Mr=`${xo}-listener`,Tr="os-trinsic-observer",Ar="os-theme-none",he="os-scrollbar",Lr=`${he}-rtl`,Or=`${he}-horizontal`,Hr=`${he}-vertical`,Dn=`${he}-track`,wo=`${he}-handle`,Rr=`${he}-visible`,zr=`${he}-cornerless`,Uo=`${he}-interaction`,Po=`${he}-unusable`,mo=`${he}-auto-hide`,qo=`${mo}-hidden`,Go=`${he}-wheel`,Ir=`${Dn}-interactive`,Fr=`${wo}-interactive`,Mn={},Tn={},jr=o=>{K(o,t=>K(t,(n,s)=>{Mn[s]=t[s]}))},An=(o,t,n)=>Oe(o).map(s=>{const{static:r,instance:c}=o[s],[l,i,a]=n||[],u=n?c:r;if(u){const m=n?u(l,i,t):u(t);return(a||Tn)[s]=m}}),at=o=>Tn[o],Ur="__osOptionsValidationPlugin",Pr="__osSizeObserverPlugin",qr=(o,t)=>{const{T:n}=t,[s,r]=o("showNativeOverlaidScrollbars");return[s&&n.x&&n.y,r]},Ct=o=>o.indexOf(mn)===0,Ln=(o,t)=>{const{D:n}=o,s=a=>{const u=je(n,a),p=(t?t[a]:u)==="scroll";return[u,p]},[r,c]=s(Ht),[l,i]=s(Rt);return{k:{x:r,y:l},R:{x:c,y:i}}},Gr=(o,t,n,s)=>{const r=t.x||t.y,c=(m,p)=>{const d=Ct(m),f=d&&r?"hidden":"",v=p&&d&&m.replace(`${mn}-`,"")||f;return[p&&!d?m:"",Ct(v)?"hidden":v]},[l,i]=c(n.x,t.x),[a,u]=c(n.y,t.y);return s[Ht]=i&&a?i:l,s[Rt]=u&&l?u:a,Ln(o,s)},_o="__osScrollbarsHidingPlugin",Wr="__osClickScrollPlugin";let Yt;const Kr=()=>{const o=(h,D,N)=>{fe(document.body,h),fe(document.body,h);const y=En(h),$=ct(h),T=bo(D);return N&&He(h),{x:$.h-y.h+T.h,y:$.w-y.w+T.w}},t=h=>{let D=!1;const N=St(h,kt);try{D=je(h,"scrollbar-width")==="none"||je(h,"display","::-webkit-scrollbar")==="none"}catch{}return N(),D},n=(h,D)=>{rt(h,{[Ht]:ot,[Rt]:ot,direction:"rtl"}),Re(h,{x:0});const N=Wt(h),y=Wt(D);Re(h,{x:-999});const $=Wt(D);return{i:N.x===y.x,n:y.x!==$.x}},s=`.${wt}{scroll-behavior:auto!important;position:fixed;opacity:0;visibility:hidden;overflow:scroll;height:200px;width:200px;z-index:-1}.${wt} div{width:200%;height:200%;margin:10px 0}.${kt}{scrollbar-width:none!important}.${kt}::-webkit-scrollbar,.${kt}::-webkit-scrollbar-corner{appearance:none!important;display:none!important;width:0!important;height:0!important}`,c=_n(`<div class="${wt}"><div></div><style>${s}</style></div>`)[0],l=c.firstChild,[i,,a]=co(),[u,m]=we({o:o(c,l),u:pn},j(o,c,l,!0)),[p]=m(),d=t(c),f={x:p.x===0,y:p.y===0},v={elements:{host:null,padding:!d,viewport:h=>d&&xn(h)&&h,content:!1},scrollbars:{slot:!0},cancel:{nativeScrollbarsOverlaid:!1,body:null}},x=W({},Nr),b=j(W,{},x),E=j(W,{},v),g={P:p,T:f,L:d,J:!!eo,K:n(c,l),Z:j(i,"r"),G:E,tt:h=>W(v,h)&&E(),nt:b,ot:h=>W(x,h)&&b(),st:W({},v),et:W({},x)};return Ne(c,"style"),He(c),pe.addEventListener("resize",()=>{let h;if(!d&&(!f.x||!f.y)){const D=at(_o);h=!!(D?D.Y():_e)(g,u)}a("r",[h])}),g},be=()=>(Yt||(Yt=Kr()),Yt),On=(o,t)=>$e(t)?t.apply(0,o):t,Yr=(o,t,n,s)=>{const r=ut(s)?n:s;return On(o,r)||t.apply(0,o)},Hn=(o,t,n,s)=>{const r=ut(s)?n:s,c=On(o,r);return!!c&&(Nt(c)?c:t.apply(0,o))},Jr=(o,t)=>{const{nativeScrollbarsOverlaid:n,body:s}=t||{},{T:r,L:c,G:l}=be(),{nativeScrollbarsOverlaid:i,body:a}=l().cancel,u=n??i,m=ut(s)?a:s,p=(r.x||r.y)&&u,d=o&&(Mt(m)?!c:m);return!!p||!!d},Eo=new WeakMap,Xr=(o,t)=>{Eo.set(o,t)},Qr=o=>{Eo.delete(o)},Rn=o=>Eo.get(o),Zr=(o,t,n)=>{let s=!1;const r=n?new WeakMap:!1,c=()=>{s=!0},l=i=>{if(r&&n){const a=n.map(u=>{const[m,p]=u||[];return[p&&m?(i||yn)(m,o):[],p]});K(a,u=>K(u[0],m=>{const p=u[1],d=r.get(m)||[];if(o.contains(m)&&p){const v=ee(m,p,x=>{s?(v(),r.delete(m)):t(x)});r.set(m,te(d,v))}else ke(d),r.delete(m)}))}};return l(),[c,l]},Wo=(o,t,n,s)=>{let r=!1;const{ct:c,rt:l,lt:i,it:a,ut:u,dt:m}=s||{},p=hn(()=>r&&n(!0),{v:33,p:99}),[d,f]=Zr(o,p,i),v=c||[],x=l||[],b=Me(v,x),E=(h,D)=>{if(!to(D)){const N=u||_e,y=m||_e,$=[],T=[];let A=!1,O=!1;if(K(D,M=>{const{attributeName:B,target:V,type:k,oldValue:L,addedNodes:H,removedNodes:R}=M,U=k==="attributes",Z=k==="childList",F=o===V,X=U&&B,J=X&&zt(V,B||"")||null,Q=X&&L!==J,ie=Ot(x,B)&&Q;if(t&&(Z||!F)){const ae=U&&Q,oe=ae&&a&&$t(V,a),S=(oe?!N(V,B,L,J):!U||ae)&&!y(M,!!oe,o,s);K(H,_=>te($,_)),K(R,_=>te($,_)),O=O||S}!t&&F&&Q&&!N(V,B,L,J)&&(te(T,B),A=A||ie)}),f(M=>$o($).reduce((B,V)=>(te(B,yn(M,V)),$t(V,M)?te(B,V):B),[])),t)return!h&&O&&n(!1),[!1];if(!to(T)||A){const M=[$o(T),A];return!h&&n.apply(0,M),M}}},g=new pr(j(E,!1));return[()=>(g.observe(o,{attributes:!0,attributeOldValue:!0,attributeFilter:b,subtree:t,childList:t,characterData:t}),r=!0,()=>{r&&(d(),g.disconnect(),r=!1)}),()=>{if(r)return p.m(),E(!0,g.takeRecords())}]},zn=(o,t,n)=>{const{ft:r,_t:c}=n||{},l=at(Pr),{K:i}=be(),a=j(Le,o),[u]=we({o:!1,_:!0});return()=>{const m=[],d=_n(`<div class="${xo}"><div class="${Mr}"></div></div>`)[0],f=d.firstChild,v=x=>{const b=x instanceof ResizeObserverEntry,E=!b&&Ee(x);let g=!1,h=!1,D=!0;if(b){const[N,,y]=u(x.contentRect),$=lo(N),T=Vn(N,y);h=!y||T,g=!h&&!$,D=!g}else E?[,D]=x:h=x===!0;if(r&&D){const N=E?x[0]:Le(d);Re(d,{x:Bt(3333333,3333333,N&&i),y:3333333})}g||t({vt:E?x:void 0,ht:!E,_t:h})};if(Et){const x=new Et(b=>v(b.pop()));x.observe(f),te(m,()=>{x.disconnect()})}else if(l){const[x,b]=l(f,v,c);te(m,Me([St(d,Dr),ee(d,"animationstart",x)],b))}else return _e;if(r){const[x]=we({o:void 0},a);te(m,ee(d,"scroll",b=>{const E=x(),[g,h,D]=E;h&&(go(f,"ltr rtl"),St(f,g?"rtl":"ltr"),v([!!g,h,D])),yo(b)}))}return j(ke,te(m,fe(o,d)))}},es=(o,t)=>{let n;const s=a=>a.h===0||a.isIntersecting||a.intersectionRatio>0,r=Xe(Tr),[c]=we({o:!1}),l=(a,u)=>{if(a){const m=c(s(a)),[,p]=m;return p&&!u&&t(m)&&[m]}},i=(a,u)=>l(u.pop(),a);return[()=>{const a=[];if(So)n=new So(j(i,!1),{root:o}),n.observe(r),te(a,()=>{n.disconnect()});else{const u=()=>{const m=ct(r);l(m)};te(a,zn(r,u)()),u()}return j(ke,te(a,fe(o,r)))},()=>n&&i(!0,n.takeRecords())]},ts=(o,t,n,s)=>{let r,c,l,i,a,u;const{L:m}=be(),p=`[${me}]`,d=`[${De}]`,f=["tabindex"],v=["wrap","cols","rows"],x=["id","class","style","open"],{gt:b,bt:E,D:g,wt:h,yt:D,V:N,St:y,$t:$}=o,T={Ot:!1,N:Le(b)},A=be(),O=at(_o),[M]=we({u:fn,o:{w:0,h:0}},()=>{const w=O&&O.M(o,t,T,A,n).W,S=y(Ze),_=!N&&y(Br),C=_&&st(g);$(Ze),N&&$(io,!0);const z=_&&w&&w()[0],I=ao(h),q=ao(g),G=bo(g);return $(Ze,S),N&&$(io),z&&z(),Re(g,C),{w:q.w+I.w+G.w,h:q.h+I.h+G.h}}),B=D?v:Me(x,v),V=hn(s,{v:()=>r,p:()=>c,S(w,S){const[_]=w,[C]=S;return[Me(Oe(_),Oe(C)).reduce((z,I)=>(z[I]=_[I]||C[I],z),{})]}}),k=w=>{if(N){const S=Le(b);W(w,{Ct:u!==S}),W(T,{N:S}),u=S}},L=w=>{K(w||f,S=>{if(Ot(f,S)){const _=zt(E,S);Tt(_)?xe(g,S,_):Ne(g,S)}})},H=(w,S)=>{const[_,C]=w,z={xt:C};return W(T,{Ot:_}),!S&&s(z),z},R=({ht:w,vt:S,_t:_})=>{const z=!(w&&!_&&!S)&&m?V:s,[I,q]=S||[],G={ht:w||_,_t:_,Ct:q};k(G),S&&W(T,{N:I}),z(G)},U=(w,S)=>{const[,_]=M(),C={Ht:_};return k(C),_&&!S&&(w?s:V)(C),C},Z=(w,S,_)=>{const C={zt:S};return k(C),S&&!_?V(C):N||L(w),C},{Z:F}=A,[X,J]=h?es(E,H):[],Q=!N&&zn(E,R,{_t:!0,ft:!0}),[ie,ae]=Wo(E,!1,Z,{rt:x,ct:Me(x,f)}),oe=N&&Et&&new Et(w=>{const S=w[w.length-1].contentRect;R({ht:!0,_t:Vn(S,a)}),a=S});return[()=>{L(),oe&&oe.observe(E);const w=Q&&Q(),S=X&&X(),_=ie(),C=F(z=>{const[,I]=M();V({It:z,Ht:I})});return()=>{oe&&oe.disconnect(),w&&w(),S&&S(),i&&i(),_(),C()}},({Et:w,At:S,Tt:_})=>{const C={},[z]=w("update.ignoreMutation"),[I,q]=w("update.attributes"),[G,ne]=w("update.elementEvents"),[le,P]=w("update.debounce"),ce=ne||q,de=S||_,ye=Y=>$e(z)&&z(Y);if(ce){l&&l(),i&&i();const[Y,ue]=Wo(h||g,!0,U,{ct:Me(B,I||[]),lt:G,it:p,dt:(ve,se)=>{const{target:ge,attributeName:ft}=ve;return(!se&&ft&&!N?xr(ge,p,d):!1)||!!Je(ge,`.${he}`)||!!ye(ve)}});i=Y(),l=ue}if(P)if(V.m(),Ee(le)){const Y=le[0],ue=le[1];r=Se(Y)&&Y,c=Se(ue)&&ue}else Se(le)?(r=le,c=!1):(r=!1,c=!1);if(de){const Y=ae(),ue=J&&J(),ve=l&&l();Y&&W(C,Z(Y[0],Y[1],de)),ue&&W(C,H(ue[0],de)),ve&&W(C,U(ve[0],de))}return k(C),C},T]},os=(o,t,n,s)=>{const{G:r,K:c}=be(),{scrollbars:l}=r(),{slot:i}=l,{gt:a,bt:u,D:m,Dt:p,kt:d,Rt:f,V:v}=t,{scrollbars:x}=p?{}:o,{slot:b}=x||{},E=new Map,g=w=>eo&&new eo({source:d,axis:w}),h=g("x"),D=g("y"),N=Hn([a,u,m],()=>v&&f?a:u,i,b),y=(w,S)=>{if(S){const G=w?et:tt,{Mt:ne,Vt:le}=S,P=Qe(le)[G],ce=Qe(ne)[G];return oo(0,1,P/ce||0)}const _=w?"x":"y",{Lt:C,Pt:z}=n,I=z[_],q=C[_];return oo(0,1,I/(I+q)||0)},$=(w,S,_,C)=>{const z=y(_,w);return 1/z*(1-z)*(C?1-S:S)||0},T=(w,S)=>W(w,S?{clear:["left"]}:{}),A=w=>{E.forEach((S,_)=>{(w?Ot(nn(w),_):!0)&&(K(S||[],z=>{z&&z.cancel()}),E.delete(_))})},O=(w,S,_,C)=>{const z=E.get(w)||[],I=z.find(q=>q&&q.timeline===S);I?I.effect=new KeyframeEffect(w,_,{composite:C}):E.set(w,Me(z,[w.animate(_,{timeline:S,composite:C})]))},M=(w,S,_)=>{const C=_?St:go;K(w,z=>{C(z.Ut,S)})},B=(w,S)=>{K(w,_=>{const[C,z]=S(_);rt(C,z)})},V=(w,S)=>{B(w,_=>{const{Vt:C}=_;return[C,{[S?et:tt]:Mo(y(S))}]})},k=(w,S)=>{const{Lt:_}=n,C=S?_.x:_.y,z=(I,q,G)=>Gt(Mo($(I,Ho(q,C,G),S,G)),S);if(h&&D)K(w,I=>{const{Ut:q,Vt:G}=I,ne=S&&Le(q)&&c;O(G,S?h:D,T({transform:Oo(C,ne).map(le=>z(I,le,ne))},ne))});else{const I=st(d);B(w,q=>{const{Vt:G,Ut:ne}=q;return[G,{transform:z(q,S?I.x:I.y,S&&Le(ne)&&c)}]})}},L=w=>v&&!f&&nt(w)===m,H=[],R=[],U=[],Z=(w,S,_)=>{const C=on(_),z=C?_:!0,I=C?!_:!0;z&&M(R,w,S),I&&M(U,w,S)},F=()=>{V(R,!0),V(U)},X=()=>{k(R,!0),k(U)},J=()=>{if(v){const{Lt:w}=n,S=.5;if(h&&D)K(Me(U,R),({Ut:_})=>{if(L(_)){const C=(z,I,q)=>{const G=q&&Le(_)&&c;O(_,z,T({transform:Oo(I-S,G).map(ne=>Gt(so(ne),q))},G),"add")};C(h,w.x,!0),C(D,w.y)}else A(_)});else{const _=st(d),C=z=>{const{Ut:I}=z,q=L(I)&&I,G=(ne,le,P)=>{const ce=Ho(ne,le,P),de=le*ce;return so(P?-de:de)};return[q,{transform:q?Gt({x:G(_.x,w.x,Le(I)&&c),y:G(_.y,w.y)}):""}]};B(R,C),B(U,C)}}},Q=w=>{const _=Xe(`${he} ${w?Or:Hr}`),C=Xe(Dn),z=Xe(wo),I={Ut:_,Mt:C,Vt:z};return te(w?R:U,I),te(H,[fe(_,C),fe(C,z),j(He,_),A,s(I,Z,k,w)]),I},ie=j(Q,!0),ae=j(Q,!1),oe=()=>(fe(N,R[0].Ut),fe(N,U[0].Ut),j(ke,H));return ie(),ae(),[{Bt:F,Nt:X,jt:J,Ft:Z,qt:{J:h,Wt:R,Xt:ie,Yt:j(B,R)},Jt:{J:D,Wt:U,Xt:ae,Yt:j(B,U)}},oe]},ns=(o,t,n,s)=>{const{bt:r,D:c,V:l,kt:i,Kt:a}=t;return(u,m,p,d)=>{const{Ut:f,Mt:v,Vt:x}=u,[b,E]=Ye(333),[g,h]=Ye(),D=j(p,[u],d),N=!!i.scrollBy,y=`client${d?"X":"Y"}`,$=d?et:tt,T=d?"left":"top",A=d?"w":"h",O=d?"x":"y",M=k=>k.propertyName.indexOf($)>-1,B=()=>{const k="pointerup pointerleave pointercancel lostpointercapture",L=(H,R)=>U=>{const{Lt:Z}=n,F=ct(v)[A]-ct(x)[A],J=R*U/F*Z[O];Re(i,{[O]:H+J})};return ee(v,"pointerdown",H=>{const R=Je(H.target,`.${wo}`)===x,U=R?x:v,Z=o.scrollbars,{button:F,isPrimary:X,pointerType:J}=H,{pointers:Q}=Z;if(F===0&&X&&Z[R?"dragScroll":"clickScroll"]&&(Q||[]).includes(J)){const ae=!R&&H.shiftKey,oe=j(Qe,x),w=j(Qe,v),S=(Y,ue)=>(Y||oe())[T]-(ue||w())[T],_=Qt(Qe(i)[$])/ct(i)[A]||1,C=L(st(i)[O]||0,1/_),z=H[y],I=oe(),q=w(),G=I[$],ne=S(I,q)+G/2,le=z-q[T],P=R?0:le-ne,ce=Y=>{ke(ye),U.releasePointerCapture(Y.pointerId)},ye=[dt(r,me,Sr),ee(a,k,ce),ee(a,"selectstart",Y=>Lo(Y),{H:!1}),ee(v,k,ce),ee(v,"pointermove",Y=>{const ue=Y[y]-z;(R||ae)&&C(P+ue)})];if(U.setPointerCapture(H.pointerId),ae)C(P);else if(!R){const Y=at(Wr);Y&&te(ye,Y(C,S,P,G,le))}}})};let V=!0;return j(ke,[ee(x,"pointermove pointerleave",s),ee(f,"pointerenter",()=>{m(Uo,!0)}),ee(f,"pointerleave pointercancel",()=>{m(Uo,!1)}),!l&&ee(f,"mousedown",()=>{const k=ro();(Bo(k,De)||Bo(k,me)||k===document.body)&&_t(()=>{c.focus({preventScroll:!0})},25)}),ee(f,"wheel",k=>{const{deltaX:L,deltaY:H,deltaMode:R}=k;N&&V&&R===0&&nt(f)===r&&i.scrollBy({left:L,top:H,behavior:"smooth"}),V=!1,m(Go,!0),b(()=>{V=!0,m(Go)}),Lo(k)},{H:!1,I:!0}),ee(x,"transitionstart",k=>{if(M(k)){const L=()=>{D(),g(L)};L()}}),ee(x,"transitionend transitioncancel",k=>{M(k)&&(h(),D())}),ee(f,"mousedown",j(ee,a,"click",yo,{A:!0,I:!0}),{I:!0}),B(),E,h])}},rs=(o,t,n,s,r,c)=>{let l,i,a,u,m,p=_e,d=0;const f=F=>F.pointerType==="mouse",[v,x]=Ye(),[b,E]=Ye(100),[g,h]=Ye(100),[D,N]=Ye(()=>d),[y,$]=os(o,r,s,ns(t,r,s,F=>f(F)&&H())),{bt:T,Zt:A,Rt:O}=r,{Ft:M,Bt:B,Nt:V,jt:k}=y,L=(F,X)=>{if(N(),F)M(qo);else{const J=j(M,qo,!0);d>0&&!X?D(J):J()}},H=()=>{(a?!l:!u)&&(L(!0),b(()=>{L(!1)}))},R=F=>{M(mo,F,!0),M(mo,F,!1)},U=F=>{f(F)&&(l=a,a&&L(!0))},Z=[N,E,h,x,()=>p(),ee(T,"pointerover",U,{A:!0}),ee(T,"pointerenter",U),ee(T,"pointerleave",F=>{f(F)&&(l=!1,a&&L(!1))}),ee(T,"pointermove",F=>{f(F)&&i&&H()}),ee(A,"scroll",F=>{v(()=>{V(),H()}),c(F),k()})];return[()=>j(ke,te(Z,$())),({Et:F,Tt:X,Gt:J,Qt:Q})=>{const{tn:ie,nn:ae,sn:oe}=Q||{},{Ct:w,_t:S}=J||{},{N:_}=n,{T:C}=be(),{k:z,en:I}=s,[q,G]=F("showNativeOverlaidScrollbars"),[ne,le]=F("scrollbars.theme"),[P,ce]=F("scrollbars.visibility"),[de,ye]=F("scrollbars.autoHide"),[Y,ue]=F("scrollbars.autoHideSuspend"),[ve]=F("scrollbars.autoHideDelay"),[se,ge]=F("scrollbars.dragScroll"),[ft,pt]=F("scrollbars.clickScroll"),[ht,Ve]=F("overflow"),ze=S&&!X,Ie=I.x||I.y,jt=ie||ae||w||X,Te=oe||ce||Ve,Ut=q&&C.x&&C.y,qe=(Ge,We,lt)=>{const vt=Ge.includes("scroll")&&(P==="visible"||P==="auto"&&We==="scroll");return M(Rr,vt,lt),vt};if(d=ve,ze&&(Y&&Ie?(R(!1),p(),g(()=>{p=ee(A,"scroll",j(R,!0),{A:!0})})):R(!0)),G&&M(Ar,Ut),le&&(M(m),M(ne,!0),m=ne),ue&&!Y&&R(!0),ye&&(i=de==="move",a=de==="leave",u=de==="never",L(u,!0)),ge&&M(Fr,se),pt&&M(Ir,ft),Te){const Ge=qe(ht.x,z.x,!0),We=qe(ht.y,z.y,!1);M(zr,!(Ge&&We))}jt&&(B(),V(),k(),M(Po,!I.x,!0),M(Po,!I.y,!1),M(Lr,_&&!O))},{},y]},ss=o=>{const t=be(),{G:n,L:s}=t,{elements:r}=n(),{host:c,padding:l,viewport:i,content:a}=r,u=Nt(o),m=u?{}:o,{elements:p}=m,{host:d,padding:f,viewport:v,content:x}=p||{},b=u?o:m.target,E=xn(b),g=$t(b,"textarea"),h=b.ownerDocument,D=h.documentElement,N=()=>h.defaultView||pe,y=P=>{P&&P.focus&&P.focus({preventScroll:!0})},$=j(Yr,[b]),T=j(Hn,[b]),A=j(Xe,""),O=j($,A,i),M=j(T,A,a),B=O(v),V=B===b,k=V&&E,L=!V&&M(x),H=!V&&B===L,R=k?D:B,U=g?$(A,c,d):b,Z=k?R:U,F=!V&&T(A,l,f),X=!H&&L,J=[X,R,F,Z].map(P=>Nt(P)&&!nt(P)&&P),Q=P=>P&&Ot(J,P),ie=Q(R)?b:R,ae={gt:b,bt:Z,D:R,cn:F,wt:X,kt:k?D:R,Zt:k?h:R,rn:E?D:ie,Kt:h,yt:g,Rt:E,Dt:u,V,ln:N,St:P=>br(R,V?me:De,P),$t:(P,ce)=>xt(R,V?me:De,P,ce)},{gt:oe,bt:w,cn:S,D:_,wt:C}=ae,z=[()=>{Ne(w,[me,Kt]),Ne(oe,Kt),E&&Ne(D,[Kt,me])}],I=g&&Q(w);let q=g?oe:no([C,_,S,w,oe].find(P=>P&&!Q(P)));const G=k?oe:C||_,ne=j(ke,z);return[ae,()=>{const P=N(),ce=ro(),de=se=>{fe(nt(se),no(se)),He(se)},ye=se=>se?ee(se,"focusin focusout focus blur",ge=>{yo(ge),ge.stopImmediatePropagation()},{I:!0,H:!1}):_e,Y="tabindex",ue=zt(_,Y),ve=ye(ce);return xe(w,me,V?"viewport":"host"),xe(S,uo,""),xe(C,jo,""),V||(xe(_,De,""),xe(_,Y,ue||"-1"),E&&dt(D,me,$r)),I&&(Co(oe,w),te(z,()=>{Co(w,oe),He(w)})),fe(G,q),fe(w,S),fe(S||w,!V&&_),fe(_,C),te(z,[ve,()=>{const se=ro(),ge=ye(se);Ne(S,uo),Ne(C,jo),Ne(_,[Sn,$n,De]),ue?xe(_,Y,ue):Ne(_,Y),Q(C)&&de(C),Q(_)&&de(_),Q(S)&&de(S),y(se),ge()}]),s&&!V&&(dt(_,De,Cn),te(z,j(Ne,_,De))),y(!V&&ce===b&&P.top===P?_:ce),ve(),q=0,ne},ne]},as=({wt:o})=>({Gt:t,an:n,Tt:s})=>{const{xt:r}=t||{},{Ot:c}=n;o&&(r||s)&&rt(o,{[tt]:c&&"100%"})},ls=({bt:o,cn:t,D:n,V:s},r)=>{const[c,l]=we({u:kr,o:To()},j(To,o,"padding",""));return({Et:i,Gt:a,an:u,Tt:m})=>{let[p,d]=l(m);const{L:f}=be(),{ht:v,Ht:x,Ct:b}=a||{},{N:E}=u,[g,h]=i("paddingAbsolute");(v||d||(m||x))&&([p,d]=c(m));const N=!s&&(h||b||d);if(N){const y=!g||!t&&!f,$=p.r+p.l,T=p.t+p.b,A={[dn]:y&&!E?-$:0,[un]:y?-T:0,[cn]:y&&E?-$:0,top:y?-p.t:0,right:y?E?-p.r:"auto":0,left:y?E?"auto":-p.l:0,[et]:y&&`calc(100% + ${$}px)`},O={[rn]:y?p.t:0,[sn]:y?p.r:0,[ln]:y?p.b:0,[an]:y?p.l:0};rt(t||n,A),rt(n,O),W(r,{cn:p,un:!y,j:t?O:W({},A,O)})}return{dn:N}}},cs=(o,t)=>{const n=be(),{bt:s,cn:r,D:c,V:l,Rt:i,$t:a,ln:u}=o,{L:m}=n,p=i&&l,d=j(yt,0),f={u:fn,o:{w:0,h:0}},v={u:pn,o:{x:ot,y:ot}},x=(O,M)=>{const B=pe.devicePixelRatio%1!==0?1:0,V={w:d(O.w-M.w),h:d(O.h-M.h)};return{w:V.w>B?V.w:0,h:V.h>B?V.h:0}},[b,E]=we(f,j(bo,c)),[g,h]=we(f,j(ao,c)),[D,N]=we(f),[y,$]=we(f),[T]=we(v),A=at(_o);return({Et:O,Gt:M,an:B,Tt:V},{dn:k})=>{const{ht:L,Ht:H,Ct:R,It:U}=M||{},Z=A&&A.M(o,t,B,n,O),{q:F,W:X,X:J}=Z||{},[Q,ie]=qr(O,n),[ae,oe]=O("overflow"),w=L||k||H||R||U||ie,S=Ct(ae.x),_=Ct(ae.y),C=S||_;let z=E(V),I=h(V),q=N(V),G=$(V),ne;if(ie&&m&&a(Cn,!Q),w){C&&a(Ze,!1);const[Ve,ze]=X?X(ne):[],[Ie,jt]=z=b(V),[Te,Ut]=I=g(V),qe=En(c),Ge=Te,We=qe;Ve&&Ve(),(Ut||jt||ie)&&ze&&!Q&&F&&F(ze,Te,Ie);const lt=Er(u()),vt={w:d(yt(Te.w,Ge.w)+Ie.w),h:d(yt(Te.h,Ge.h)+Ie.h)},Vo={w:d((p?lt.w:We.w+d(qe.w-Te.w))+Ie.w),h:d((p?lt.h:We.h+d(qe.h-Te.h))+Ie.h)};G=y(Vo),q=D(x(vt,Vo),V)}const[le,P]=G,[ce,de]=q,[ye,Y]=I,[ue,ve]=z,se={x:ce.w>0,y:ce.h>0},ge=S&&_&&(se.x||se.y)||S&&se.x&&!se.y||_&&se.y&&!se.x;if(k||R||U||ve||Y||P||de||oe||ie||w){const Ve={},ze=Gr(o,se,ae,Ve);J&&J(ze,B,!!F&&F(ze,ye,ue),Ve),l?(xe(s,Sn,Ve[Ht]),xe(s,$n,Ve[Rt])):rt(c,Ve)}xt(s,me,Bn,ge),xt(r,uo,Cr,ge),l||xt(c,De,Ze,C);const[pt,ht]=T(Ln(o).k);return W(t,{k:pt,Pt:{x:le.w,y:le.h},Lt:{x:ce.w,y:ce.h},en:se}),{sn:ht,tn:P,nn:de}}},is=o=>{const[t,n,s]=ss(o),r={cn:{t:0,r:0,b:0,l:0},un:!1,j:{[dn]:0,[un]:0,[cn]:0,[rn]:0,[sn]:0,[ln]:0,[an]:0},Pt:{x:0,y:0},Lt:{x:0,y:0},k:{x:ot,y:ot},en:{x:!1,y:!1}},{gt:c,D:l,V:i}=t,{L:a,T:u}=be(),m=!a&&(u.x||u.y),p=[as(t),ls(t,r),cs(t,r)];return[n,d=>{const f={},x=m&&st(l),b=i?dt(l,me,io):_e;return K(p,E=>{W(f,E(d,f)||{})}),b(),Re(l,x),!i&&Re(c,0),f},r,t,s]},ds=(o,t,n,s)=>{const r=Fo(t,{}),[c,l,i,a,u]=is(o),[m,p,d]=ts(a,i,r,g=>{E({},g)}),[f,v,,x]=rs(o,t,d,i,a,s),b=g=>Oe(g).some(h=>!!g[h]),E=(g,h)=>{const{fn:D,Tt:N,At:y,_n:$}=g,T=D||{},A=!!N,O={Et:Fo(t,T,A),fn:T,Tt:A};if($)return v(O),!1;const M=h||p(W({},O,{At:y})),B=l(W({},O,{an:d,Gt:M}));v(W({},O,{Gt:M,Qt:B}));const V=b(M),k=b(B),L=V||k||!vo(T)||A;return L&&n(g,{Gt:M,Qt:B}),L};return[()=>{const{rn:g,D:h}=a,D=st(g),N=[m(),c(),f()];return Re(h,D),j(ke,N)},E,()=>({vn:d,hn:i}),{pn:a,gn:x},u]},Ue=(o,t,n)=>{const{nt:s}=be(),r=Nt(o),c=r?o:o.target,l=Rn(c);if(t&&!l){let i=!1;const a=[],u={},m=O=>{const M=gn(O),B=at(Ur);return B?B(M,!0):M},p=W({},s(),m(t)),[d,f,v]=co(),[x,b,E]=co(n),g=(O,M)=>{E(O,M),v(O,M)},[h,D,N,y,$]=ds(o,p,({fn:O,Tt:M},{Gt:B,Qt:V})=>{const{ht:k,Ct:L,xt:H,Ht:R,zt:U,_t:Z}=B,{tn:F,nn:X,sn:J}=V;g("updated",[A,{updateHints:{sizeChanged:!!k,directionChanged:!!L,heightIntrinsicChanged:!!H,overflowEdgeChanged:!!F,overflowAmountChanged:!!X,overflowStyleChanged:!!J,contentMutation:!!R,hostMutation:!!U,appear:!!Z},changedOptions:O||{},force:!!M}])},O=>g("scroll",[A,O])),T=O=>{Qr(c),ke(a),i=!0,g("destroyed",[A,O]),f(),b()},A={options(O,M){if(O){const B=M?s():{},V=Nn(p,W(B,m(O)));vo(V)||(W(p,V),D({fn:V}))}return W({},p)},on:x,off:(O,M)=>{O&&M&&b(O,M)},state(){const{vn:O,hn:M}=N(),{N:B}=O,{Pt:V,Lt:k,k:L,en:H,cn:R,un:U}=M;return W({},{overflowEdge:V,overflowAmount:k,overflowStyle:L,hasOverflow:H,padding:R,paddingAbsolute:U,directionRTL:B,destroyed:i})},elements(){const{gt:O,bt:M,cn:B,D:V,wt:k,kt:L,Zt:H}=y.pn,{qt:R,Jt:U}=y.gn,Z=X=>{const{Vt:J,Mt:Q,Ut:ie}=X;return{scrollbar:ie,track:Q,handle:J}},F=X=>{const{Wt:J,Xt:Q}=X,ie=Z(J[0]);return W({},ie,{clone:()=>{const ae=Z(Q());return D({_n:!0}),ae}})};return W({},{target:O,host:M,padding:B||V,viewport:V,content:k||V,scrollOffsetElement:L,scrollEventElement:H,scrollbarHorizontal:F(R),scrollbarVertical:F(U)})},update:O=>D({Tt:O,At:!0}),destroy:j(T,!1),plugin:O=>u[Oe(O)[0]]};return te(a,[$]),Xr(c,A),An(Mn,Ue,[A,d,u]),Jr(y.pn.Rt,!r&&o.cancel)?(T(!0),A):(te(a,h()),g("initialized",[A]),A.update(!0),A)}return l};Ue.plugin=o=>{const t=Ee(o),n=t?o:[o],s=n.map(r=>An(r,Ue)[0]);return jr(n),t?s:s[0]};Ue.valid=o=>{const t=o&&o.elements,n=$e(t)&&t();return Vt(n)&&!!Rn(n.target)};Ue.env=()=>{const{P:o,T:t,L:n,K:s,J:r,st:c,et:l,G:i,tt:a,nt:u,ot:m}=be();return W({},{scrollbarsSize:o,scrollbarsOverlaid:t,scrollbarsHiding:n,rtlScrollBehavior:s,scrollTimeline:r,staticDefaultInitialization:c,staticDefaultOptions:l,getDefaultInitialization:i,setDefaultInitialization:a,getDefaultOptions:u,setDefaultOptions:m})};function us(){let o;const t=e.ref(null),n=Math.floor(Math.random()*2**32),s=e.ref(!1),r=e.ref([]),c=()=>r.value,l=()=>o.getSelection(),i=()=>r.value.length,a=()=>o.clearSelection(!0),u=e.ref(),m=e.ref(null),p=e.ref(null),d=e.ref(null);function f(){o=new Qn({area:t.value,keyboardDrag:!1,selectedClass:"vf-explorer-selected",selectorClass:"vf-explorer-selector"}),o.subscribe("DS:start:pre",({items:g,event:h,isDragging:D})=>{if(D)o.Interaction._reset(h);else{s.value=!1;const N=t.value.offsetWidth-h.offsetX,y=t.value.offsetHeight-h.offsetY;N<15&&y<15&&o.Interaction._reset(h),h.target.classList.contains("os-scrollbar-handle")&&o.Interaction._reset(h)}}),document.addEventListener("dragleave",g=>{!g.buttons&&s.value&&(s.value=!1)})}const v=()=>e.nextTick(()=>{const g=c().map(h=>h.path);a(),o.setSettings({selectables:document.getElementsByClassName("vf-item-"+n)}),o.addSelection(o.getSelectables().filter(h=>g.includes(JSON.parse(h.dataset.item).path))),r.value=o.getSelection().map(h=>JSON.parse(h.dataset.item)),u.value(r.value),b()}),x=g=>{u.value=g,o.subscribe("DS:end",({items:h,event:D,isDragging:N})=>{r.value=h.map(y=>JSON.parse(y.dataset.item)),g(h.map(y=>JSON.parse(y.dataset.item)))})},b=()=>{m.value&&(t.value.getBoundingClientRect().height<t.value.scrollHeight?(p.value.style.height=t.value.scrollHeight+"px",p.value.style.display="block"):(p.value.style.height="100%",p.value.style.display="none"))},E=g=>{if(!m.value)return;const{scrollOffsetElement:h}=m.value.elements();h.scrollTo({top:t.value.scrollTop,left:0})};return e.onMounted(()=>{Ue(d.value,{scrollbars:{theme:"vf-theme-dark dark:vf-theme-light"},plugins:{OverlayScrollbars:Ue}},{initialized:g=>{m.value=g},scroll:(g,h)=>{const{scrollOffsetElement:D}=g.elements();t.value.scrollTo({top:D.scrollTop,left:0})}}),f(),b(),new ResizeObserver(b).observe(t.value),t.value.addEventListener("scroll",E),o.subscribe("DS:scroll",({isDragging:g})=>g||E())}),e.onUnmounted(()=>{o&&o.stop()}),e.onUpdated(()=>{o&&o.Area.reset()}),{area:t,explorerId:n,isDraggingRef:s,scrollBar:p,scrollBarContainer:d,getSelected:c,getSelection:l,clearSelection:a,refreshSelection:v,getCount:i,onSelect:x}}function ms(o,t){const n=e.ref(o),s=e.ref(t),r=e.ref([]),c=e.ref([]),l=e.ref([]),i=e.ref(!1),a=e.ref(5);let u=!1,m=!1;const p=e.reactive({adapter:n,storages:[],dirname:s,files:[]});function d(){let g=[],h=[],D=s.value??n.value+"://";D.length===0&&(r.value=[]),D.replace(n.value+"://","").split("/").forEach(function($){g.push($),g.join("/")!==""&&h.push({basename:$,name:$,path:n.value+"://"+g.join("/"),type:"dir"})}),c.value=h;const[N,y]=v(h,a.value);l.value=y,r.value=N}function f(g){a.value=g,d()}function v(g,h){return g.length>h?[g.slice(-h),g.slice(0,-h)]:[g,[]]}function x(g=null){i.value=g??!i.value}function b(){return r.value&&r.value.length&&!m}const E=e.computed(()=>{var g;return((g=r.value[r.value.length-2])==null?void 0:g.path)??n.value+"://"});return e.onMounted(()=>{}),e.watch(s,d),e.onMounted(d),{adapter:n,path:s,loading:u,searchMode:m,data:p,breadcrumbs:r,breadcrumbItems:c,limitBreadcrumbItems:f,hiddenBreadcrumbs:l,showHiddenBreadcrumbs:i,toggleHiddenBreadcrumbs:x,isGoUpAvailable:b,parentFolderPath:E}}const fs=(o,t)=>{const n=sr(o.id),s=Xn(),r=n.getStore("metricUnits",!1),c=ur(n,o.theme),l=t.i18n,i=o.locale??t.locale,a=n.getStore("adapter"),u=d=>Array.isArray(d)?d:cr,m=n.getStore("persist-path",o.persist),p=m?n.getStore("path",o.path):o.path;return e.reactive({version:ir,root:null,debug:o.debug,emitter:s,storage:n,i18n:e.computed(()=>lr(n,i,s,l)),modal:mr(),dragSelect:e.computed(()=>us()),requester:rr(o.request),features:u(o.features),view:n.getStore("viewport","grid"),fullScreen:n.getStore("full-screen",o.fullScreen),selectButton:o.selectButton,maxFileSize:o.maxFileSize,theme:c,metricUnits:r,filesize:r?Xo:Jo,compactListView:n.getStore("compact-list-view",!0),persist:m,showThumbnails:n.getStore("show-thumbnails",o.showThumbnails),fs:ms(a,p)})},ps=e.createElementVNode("div",{class:"fixed inset-0 bg-gray-500 dark:bg-gray-600 dark:bg-opacity-75 bg-opacity-75 transition-opacity"},null,-1),hs={class:"fixed z-10 inset-0 overflow-hidden"},vs={class:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},gs={class:"bg-gray-50 dark:bg-gray-800 dark:border-t dark:border-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Be={__name:"ModalLayout",setup(o){const t=e.ref(null),n=e.inject("ServiceContainer");return e.onMounted(()=>{const s=document.querySelector(".v-f-modal input");s&&s.focus(),e.nextTick(()=>{if(document.querySelector(".v-f-modal input")&&window.innerWidth<768){const r=t.value.getBoundingClientRect().bottom+16;window.scrollTo({top:r,left:0,behavior:"smooth"})}})}),(s,r)=>(e.openBlock(),e.createElementBlock("div",{class:"v-f-modal relative z-30","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",onKeyup:r[1]||(r[1]=e.withKeys(c=>e.unref(n).modal.close(),["esc"])),tabindex:"0"},[ps,e.createElementVNode("div",hs,[e.createElementVNode("div",{class:"flex items-end sm:items-center justify-center min-h-full p-4 text-center sm:p-0",onMousedown:r[0]||(r[0]=e.withModifiers(c=>e.unref(n).modal.close(),["self"]))},[e.createElementVNode("div",{ref_key:"modalBody",ref:t,class:"relative bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:max-w-4xl md:max-w-2xl lg:max-w-3xl xl:max-w-3xl w-full"},[e.createElementVNode("div",vs,[e.renderSlot(s.$slots,"default")]),e.createElementVNode("div",gs,[e.renderSlot(s.$slots,"buttons")])],512)],32)])],32))}},ks=["aria-label"],bs=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),ys=[bs],Ce={__name:"Message",props:{error:{type:Boolean,default:!1}},emits:["hidden"],setup(o,{emit:t}){var u;const n=t,s=e.inject("ServiceContainer"),{t:r}=s.i18n,c=e.ref(!1),l=e.ref(null),i=e.ref((u=l.value)==null?void 0:u.strMessage);e.watch(i,()=>c.value=!1);const a=()=>{n("hidden"),c.value=!0};return(m,p)=>(e.openBlock(),e.createElementBlock("div",null,[c.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"strMessage",ref:l,class:e.normalizeClass(["flex mt-2 p-1 px-2 rounded text-sm break-all dark:opacity-75",o.error?"bg-red-100 text-red-600 ":"bg-emerald-100 text-emerald-600"])},[e.renderSlot(m.$slots,"default"),e.createElementVNode("div",{class:"ml-auto cursor-pointer",onClick:a,"aria-label":e.unref(r)("Close"),"data-microtip-position":"top-left",role:"tooltip"},ys,8,ks)],2))]))}},xs={class:"sm:flex sm:items-start"},ws=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})])],-1),_s={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Es={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Vs={class:"mt-2"},Ns={class:"text-sm text-gray-500"},Ss=["placeholder"],In={__name:"ModalNewFolder",setup(o){const t=e.inject("ServiceContainer");t.storage;const{t:n}=t.i18n,s=e.ref(""),r=e.ref(""),c=()=>{s.value!==""&&t.emitter.emit("vf-fetch",{params:{q:"newfolder",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{name:s.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("%s is created.",s.value)})},onError:l=>{r.value=n(l.message)}})};return(l,i)=>(e.openBlock(),e.createBlock(Be,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:c,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(n)("Create")),1),e.createElementVNode("button",{type:"button",onClick:i[2]||(i[2]=a=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",xs,[ws,e.createElementVNode("div",_s,[e.createElementVNode("h3",Es,e.toDisplayString(e.unref(n)("New Folder")),1),e.createElementVNode("div",Vs,[e.createElementVNode("p",Ns,e.toDisplayString(e.unref(n)("Create a new folder")),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":i[0]||(i[0]=a=>s.value=a),onKeyup:e.withKeys(c,["enter"]),class:"px-2 py-1 border rounded dark:bg-gray-700/25 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:e.unref(n)("Folder Name"),type:"text"},null,40,Ss),[[e.vModelText,s.value]]),r.value.length?(e.openBlock(),e.createBlock(Ce,{key:0,onHidden:i[1]||(i[1]=a=>r.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}},$s={class:"sm:flex sm:items-start"},Bs=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1),Cs={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Ds={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Ms={class:"mt-2"},Ts={class:"text-sm text-gray-500"},As=["placeholder"],Ls={__name:"ModalNewFile",setup(o){const t=e.inject("ServiceContainer");t.storage;const{t:n}=t.i18n,s=e.ref(""),r=e.ref(""),c=()=>{s.value!==""&&t.emitter.emit("vf-fetch",{params:{q:"newfile",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{name:s.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("%s is created.",s.value)})},onError:l=>{r.value=n(l.message)}})};return(l,i)=>(e.openBlock(),e.createBlock(Be,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:c,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(n)("Create")),1),e.createElementVNode("button",{type:"button",onClick:i[2]||(i[2]=a=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",$s,[Bs,e.createElementVNode("div",Cs,[e.createElementVNode("h3",Ds,e.toDisplayString(e.unref(n)("New File")),1),e.createElementVNode("div",Ms,[e.createElementVNode("p",Ts,e.toDisplayString(e.unref(n)("Create a new file")),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":i[0]||(i[0]=a=>s.value=a),onKeyup:e.withKeys(c,["enter"]),class:"px-2 py-1 border rounded dark:bg-gray-700/25 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:e.unref(n)("File Name"),type:"text"},null,40,As),[[e.vModelText,s.value]]),r.value.length?(e.openBlock(),e.createBlock(Ce,{key:0,onHidden:i[1]||(i[1]=a=>r.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}},Os={class:"sm:flex sm:items-start"},Hs=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})])],-1),Rs={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},zs={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Is={class:"mt-2"},Fs={class:"flex text-sm text-gray-800 dark:text-gray-400 py-2"},js={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Us=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),Ps=[Us],qs={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Gs=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),Ws=[Gs],Ks={class:"ml-1.5"},Fn={__name:"ModalRename",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,s=e.ref(t.modal.data.items[0]),r=e.ref(t.modal.data.items[0].basename),c=e.ref(""),l=()=>{r.value!=""&&t.emitter.emit("vf-fetch",{params:{q:"rename",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{item:s.value.path,name:r.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("%s is renamed.",r.value)})},onError:i=>{c.value=n(i.message)}})};return(i,a)=>(e.openBlock(),e.createBlock(Be,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:l,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(n)("Rename")),1),e.createElementVNode("button",{type:"button",onClick:a[2]||(a[2]=u=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",Os,[Hs,e.createElementVNode("div",Rs,[e.createElementVNode("h3",zs,e.toDisplayString(e.unref(n)("Rename")),1),e.createElementVNode("div",Is,[e.createElementVNode("p",Fs,[s.value.type==="dir"?(e.openBlock(),e.createElementBlock("svg",js,Ps)):(e.openBlock(),e.createElementBlock("svg",qs,Ws)),e.createElementVNode("span",Ks,e.toDisplayString(s.value.basename),1)]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":a[0]||(a[0]=u=>r.value=u),onKeyup:e.withKeys(l,["enter"]),class:"px-2 py-1 border rounded dark:bg-gray-700/25 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:"Name",type:"text"},null,544),[[e.vModelText,r.value]]),c.value.length?(e.openBlock(),e.createBlock(Ce,{key:0,onHidden:a[1]||(a[1]=u=>c.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(c.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}},Ys={class:"sm:flex sm:items-start"},Js=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-red-600 dark:stroke-red-200",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})])],-1),Xs={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Qs={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Zs={class:"mt-2"},ea={class:"text-sm text-gray-500"},ta={class:"text-gray-500 text-sm mb-1 overflow-auto vf-scrollbar",style:{"max-height":"200px"}},oa={class:"flex text-sm text-gray-800 dark:text-gray-400"},na={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},ra=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),sa=[ra],aa={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},la=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),ca=[la],ia={class:"ml-1.5"},da={class:"m-auto font-bold text-red-500 text-sm dark:text-red-200 text-center"},jn={__name:"ModalDelete",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,s=e.ref(t.modal.data.items),r=e.ref(""),c=()=>{s.value.length&&t.emitter.emit("vf-fetch",{params:{q:"delete",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{items:s.value.map(({path:l,type:i})=>({path:l,type:i}))},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("Files deleted.")})},onError:l=>{r.value=n(l.message)}})};return(l,i)=>(e.openBlock(),e.createBlock(Be,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:c,class:"vf-btn vf-btn-danger"},e.toDisplayString(e.unref(n)("Yes, Delete!")),1),e.createElementVNode("button",{type:"button",onClick:i[1]||(i[1]=a=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Cancel")),1),e.createElementVNode("div",da,e.toDisplayString(e.unref(n)("This action cannot be undone.")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",Ys,[Js,e.createElementVNode("div",Xs,[e.createElementVNode("h3",Qs,e.toDisplayString(e.unref(n)("Delete files")),1),e.createElementVNode("div",Zs,[e.createElementVNode("p",ea,e.toDisplayString(e.unref(n)("Are you sure you want to delete these files?")),1),e.createElementVNode("div",ta,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,a=>(e.openBlock(),e.createElementBlock("p",oa,[a.type==="dir"?(e.openBlock(),e.createElementBlock("svg",na,sa)):(e.openBlock(),e.createElementBlock("svg",aa,ca)),e.createElementVNode("span",ia,e.toDisplayString(a.basename),1)]))),256))]),r.value.length?(e.openBlock(),e.createBlock(Ce,{key:0,onHidden:i[0]||(i[0]=a=>r.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}};function fo(o,t=14){let n=`((?=([\\w\\W]{0,${t}}))([\\w\\W]{${t+1},})([\\w\\W]{8,}))`;return o.replace(new RegExp(n),"$2..$4")}const ua={class:"sm:flex sm:items-start"},ma=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})])],-1),fa={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},pa={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},ha={class:"mt-2"},va={key:0,class:"pointer-events-none"},ga={key:1,class:"pointer-events-none"},ka=["disabled"],ba=["disabled"],ya={class:"text-gray-500 text-sm mb-1 pr-1 max-h-[200px] overflow-y-auto vf-scrollbar"},xa={class:"rounded flex flex-shrink-0 w-6 h-6 border bg-gray-50 text-xs cursor-default dark:border-gray-700 dark:bg-gray-800 dark:text-gray-50"},wa=["textContent"],_a={class:"ml-1 w-full h-fit"},Ea={class:"text-left hidden md:block"},Va={class:"text-left md:hidden"},Na={key:0,class:"ml-auto"},Sa=["title","disabled","onClick"],$a=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),Ba=[$a],Ca={key:0,class:"py-2"},Da=["disabled"],Ma={__name:"ModalUpload",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,s=n("uppy"),r={PENDING:0,CANCELED:1,UPLOADING:2,ERROR:3,DONE:10},c=e.ref({QUEUE_ENTRY_STATUS:r}),l=e.ref(null),i=e.ref(null),a=e.ref(null),u=e.ref(null),m=e.ref(null),p=e.ref(null),d=e.ref([]),f=e.ref(""),v=e.ref(!1),x=e.ref(!1);let b;function E(B){return d.value.findIndex(V=>V.id===B)}function g(B,V=null){V=V??(B.webkitRelativePath||B.name),b.addFile({name:V,type:B.type,data:B,source:"Local"})}function h(B){switch(B.status){case r.DONE:return"text-green-600";case r.ERROR:return"text-red-600";case r.CANCELED:return"text-red-600";case r.PENDING:default:return""}}const D=B=>{switch(B.status){case r.DONE:return"✓";case r.ERROR:case r.CANCELED:return"!";case r.PENDING:default:return"..."}};function N(){u.value.click()}function y(){if(!v.value){if(!d.value.filter(B=>B.status!==r.DONE).length){f.value=n("Please select file to upload first.");return}f.value="",b.retryAll(),b.upload()}}function $(){b.cancelAll({reason:"user"}),d.value.forEach(B=>{B.status!==r.DONE&&(B.status=r.CANCELED,B.statusName=n("Canceled"))}),v.value=!1}function T(B){v.value||(b.removeFile(B.id,"removed-by-user"),d.value.splice(E(B.id),1))}function A(B){if(!v.value){if(b.cancelAll({reason:"user"}),B){const V=[];d.value.forEach(k=>{k.status!==r.DONE&&V.push(k)}),d.value=[],V.forEach(k=>{g(k.originalFile,k.name)});return}d.value.splice(0)}}function O(){t.modal.close()}function M(){return t.requester.transformRequestParams({url:"",method:"post",params:{q:"upload",adapter:t.fs.adapter,path:t.fs.data.dirname}})}return e.onMounted(async()=>{b=new Zn({debug:t.debug,restrictions:{maxFileSize:dr(t.maxFileSize)},locale:s,onBeforeFileAdded(k,L){if(L[k.id]!=null){const R=E(k.id);d.value[R].status===r.PENDING&&(f.value=b.i18n("noDuplicates",{fileName:k.name})),d.value=d.value.filter(U=>U.id!==k.id)}return d.value.push({id:k.id,name:k.name,size:t.filesize(k.size),status:r.PENDING,statusName:n("Pending upload"),percent:null,originalFile:k.data}),!0}}),b.use(er,{endpoint:"WILL_BE_REPLACED_BEFORE_UPLOAD",limit:5,timeout:0,getResponseError(k,L){let H;try{H=JSON.parse(k).message}catch{H=n("Cannot parse server response.")}return new Error(H)}}),b.on("restriction-failed",(k,L)=>{const H=d.value[E(k.id)];T(H),f.value=L.message}),b.on("upload",()=>{const k=M();b.setMeta({...k.body});const L=b.getPlugin("XHRUpload");L.opts.method=k.method,L.opts.endpoint=k.url+"?"+new URLSearchParams(k.params),L.opts.headers=k.headers,v.value=!0,d.value.forEach(H=>{H.status!==r.DONE&&(H.percent=null,H.status=r.UPLOADING,H.statusName=n("Pending upload"))})}),b.on("upload-progress",(k,L)=>{const H=Math.floor(L.bytesUploaded/L.bytesTotal*100);d.value[E(k.id)].percent=`${H}%`}),b.on("upload-success",k=>{const L=d.value[E(k.id)];L.status=r.DONE,L.statusName=n("Done")}),b.on("upload-error",(k,L)=>{const H=d.value[E(k.id)];H.percent=null,H.status=r.ERROR,L.isNetworkError?H.statusName=n("Network Error, Unable establish connection to the server or interrupted."):H.statusName=L?L.message:n("Unknown Error")}),b.on("error",k=>{f.value=k.message,v.value=!1,t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:t.fs.data.dirname},noCloseModal:!0})}),b.on("complete",()=>{v.value=!1,t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:t.fs.data.dirname},noCloseModal:!0})}),u.value.addEventListener("click",()=>{i.value.click()}),m.value.addEventListener("click",()=>{a.value.click()}),p.value.addEventListener("dragover",k=>{k.preventDefault(),x.value=!0}),p.value.addEventListener("dragleave",k=>{k.preventDefault(),x.value=!1});function B(k,L){L.isFile&&L.file(H=>k(L,H)),L.isDirectory&&L.createReader().readEntries(H=>{H.forEach(R=>{B(k,R)})})}p.value.addEventListener("drop",k=>{k.preventDefault(),x.value=!1;const L=/^[/\\](.+)/;[...k.dataTransfer.items].forEach(H=>{H.kind==="file"&&B((R,U)=>{const Z=L.exec(R.fullPath);g(U,Z[1])},H.webkitGetAsEntry())})});const V=({target:k})=>{const L=k.files;for(const H of L)g(H);k.value=""};i.value.addEventListener("change",V),a.value.addEventListener("change",V)}),e.onBeforeUnmount(()=>{b==null||b.close({reason:"unmount"})}),(B,V)=>(e.openBlock(),e.createBlock(Be,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",class:e.normalizeClass(["vf-btn vf-btn-primary",v.value?"bg-blue-200 hover:bg-blue-200 dark:bg-gray-700/50 dark:hover:bg-gray-700/50 dark:text-gray-500":"bg-blue-600 hover:bg-blue-700 dark:bg-gray-700 dark:hover:bg-gray-500"]),disabled:v.value,onClick:e.withModifiers(y,["prevent"])},e.toDisplayString(e.unref(n)("Upload")),11,Da),v.value?(e.openBlock(),e.createElementBlock("button",{key:0,type:"button",class:"vf-btn vf-btn-secondary",onClick:e.withModifiers($,["prevent"])},e.toDisplayString(e.unref(n)("Cancel")),1)):(e.openBlock(),e.createElementBlock("button",{key:1,type:"button",class:"vf-btn vf-btn-secondary",onClick:e.withModifiers(O,["prevent"])},e.toDisplayString(e.unref(n)("Close")),1))]),default:e.withCtx(()=>[e.createElementVNode("div",ua,[ma,e.createElementVNode("div",fa,[e.createElementVNode("h3",pa,e.toDisplayString(e.unref(n)("Upload Files")),1),e.createElementVNode("div",ha,[e.createElementVNode("div",{ref_key:"dropArea",ref:p,class:"flex items-center justify-center text-lg mb-4 text-gray-500 border-2 border-gray-300 rounded border-dashed select-none cursor-pointer dark:border-gray-600 h-[120px]",onClick:N},[x.value?(e.openBlock(),e.createElementBlock("div",va,e.toDisplayString(e.unref(n)("Release to drop these files.")),1)):(e.openBlock(),e.createElementBlock("div",ga,e.toDisplayString(e.unref(n)("Drag and drop the files/folders to here or click here.")),1))],512),e.createElementVNode("div",{ref_key:"container",ref:l,class:"text-gray-500 mb-1"},[e.createElementVNode("button",{ref_key:"pickFiles",ref:u,type:"button",class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Select Files")),513),e.createElementVNode("button",{ref_key:"pickFolders",ref:m,type:"button",class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Select Folders")),513),e.createElementVNode("button",{type:"button",class:"vf-btn vf-btn-secondary",disabled:v.value,onClick:V[0]||(V[0]=k=>A(!1))},e.toDisplayString(e.unref(n)("Clear all")),9,ka),e.createElementVNode("button",{type:"button",class:"vf-btn vf-btn-secondary",disabled:v.value,onClick:V[1]||(V[1]=k=>A(!0))},e.toDisplayString(e.unref(n)("Clear only successful")),9,ba)],512),e.createElementVNode("div",ya,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.value,k=>(e.openBlock(),e.createElementBlock("div",{class:"flex hover:bg-gray-100 dark:hover:bg-gray-800 dark:hover:text-gray-300",key:k.id},[e.createElementVNode("span",xa,[e.createElementVNode("span",{class:e.normalizeClass(["text-base m-auto",h(k)]),textContent:e.toDisplayString(D(k))},null,10,wa)]),e.createElementVNode("div",_a,[e.createElementVNode("div",Ea,e.toDisplayString(e.unref(fo)(k.name,40))+" ("+e.toDisplayString(k.size)+")",1),e.createElementVNode("div",Va,e.toDisplayString(e.unref(fo)(k.name,16))+" ("+e.toDisplayString(k.size)+")",1),e.createElementVNode("div",{class:e.normalizeClass(["flex break-all text-left",h(k)])},[e.createTextVNode(e.toDisplayString(k.statusName)+" ",1),k.status===c.value.QUEUE_ENTRY_STATUS.UPLOADING?(e.openBlock(),e.createElementBlock("b",Na,e.toDisplayString(k.percent),1)):e.createCommentVNode("",!0)],2)]),e.createElementVNode("button",{type:"button",class:e.normalizeClass(["rounded w-5 h-5 border-1 text-base leading-none font-medium focus:outline-none dark:border-gray-200 dark:text-gray-400 dark:hover:text-gray-200 dark:bg-gray-600 ml-auto sm:text-xs hover:text-red-600",v.value?"disabled:bg-gray-100 text-white text-opacity-50":"bg-gray-100"]),title:e.unref(n)("Delete"),disabled:v.value,onClick:L=>T(k)},Ba,10,Sa)]))),128)),d.value.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",Ca,e.toDisplayString(e.unref(n)("No files selected!")),1))]),f.value.length?(e.openBlock(),e.createBlock(Ce,{key:0,onHidden:V[2]||(V[2]=k=>f.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(f.value),1)]),_:1})):e.createCommentVNode("",!0)])])]),e.createElementVNode("input",{ref_key:"internalFileInput",ref:i,type:"file",multiple:"",class:"hidden"},null,512),e.createElementVNode("input",{ref_key:"internalFolderInput",ref:a,type:"file",multiple:"",webkitdirectory:"",class:"hidden"},null,512)]),_:1}))}},Ta={class:"sm:flex sm:items-start"},Aa=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5m6 4.125l2.25 2.25m0 0l2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"})])],-1),La={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Oa={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Ha={class:"mt-2"},Ra={class:"flex text-sm text-gray-800 dark:text-gray-400"},za={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Ia=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),Fa=[Ia],ja={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Ua=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),Pa=[Ua],qa={class:"ml-1.5"},Ga={class:"my-1 text-sm text-gray-500"},Un={__name:"ModalUnarchive",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,s=e.ref(t.modal.data.items[0]),r=e.ref(""),c=e.ref([]),l=()=>{t.emitter.emit("vf-fetch",{params:{q:"unarchive",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{item:s.value.path},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("The file unarchived.")})},onError:i=>{r.value=n(i.message)}})};return(i,a)=>(e.openBlock(),e.createBlock(Be,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:l,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(n)("Unarchive")),1),e.createElementVNode("button",{type:"button",onClick:a[1]||(a[1]=u=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",Ta,[Aa,e.createElementVNode("div",La,[e.createElementVNode("h3",Oa,e.toDisplayString(e.unref(n)("Unarchive")),1),e.createElementVNode("div",Ha,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,u=>(e.openBlock(),e.createElementBlock("p",Ra,[u.type==="dir"?(e.openBlock(),e.createElementBlock("svg",za,Fa)):(e.openBlock(),e.createElementBlock("svg",ja,Pa)),e.createElementVNode("span",qa,e.toDisplayString(u.basename),1)]))),256)),e.createElementVNode("p",Ga,e.toDisplayString(e.unref(n)("The archive will be unarchived at"))+" ("+e.toDisplayString(e.unref(t).fs.data.dirname)+")",1),r.value.length?(e.openBlock(),e.createBlock(Ce,{key:0,onHidden:a[0]||(a[0]=u=>r.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}},Wa={class:"sm:flex sm:items-start"},Ka=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"})])],-1),Ya={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Ja={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Xa={class:"mt-2"},Qa={class:"text-gray-500 text-sm mb-1 overflow-auto vf-scrollbar",style:{"max-height":"200px"}},Za={class:"flex text-sm text-gray-800 dark:text-gray-400"},el={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},tl=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),ol=[tl],nl={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},rl=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),sl=[rl],al={class:"ml-1.5"},ll=["placeholder"],Pn={__name:"ModalArchive",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,s=e.ref(""),r=e.ref(""),c=e.ref(t.modal.data.items),l=()=>{c.value.length&&t.emitter.emit("vf-fetch",{params:{q:"archive",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{items:c.value.map(({path:i,type:a})=>({path:i,type:a})),name:s.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("The file(s) archived.")})},onError:i=>{r.value=n(i.message)}})};return(i,a)=>(e.openBlock(),e.createBlock(Be,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:l,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(n)("Archive")),1),e.createElementVNode("button",{type:"button",onClick:a[2]||(a[2]=u=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",Wa,[Ka,e.createElementVNode("div",Ya,[e.createElementVNode("h3",Ja,e.toDisplayString(e.unref(n)("Archive the files")),1),e.createElementVNode("div",Xa,[e.createElementVNode("div",Qa,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,u=>(e.openBlock(),e.createElementBlock("p",Za,[u.type==="dir"?(e.openBlock(),e.createElementBlock("svg",el,ol)):(e.openBlock(),e.createElementBlock("svg",nl,sl)),e.createElementVNode("span",al,e.toDisplayString(u.basename),1)]))),256))]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":a[0]||(a[0]=u=>s.value=u),onKeyup:e.withKeys(l,["enter"]),class:"my-1 px-2 py-1 border rounded dark:bg-gray-700/25 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:e.unref(n)("Archive name. (.zip file will be created)"),type:"text"},null,40,ll),[[e.vModelText,s.value]]),r.value.length?(e.openBlock(),e.createBlock(Ce,{key:0,onHidden:a[1]||(a[1]=u=>r.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}},cl={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"},il=e.createElementVNode("path",{d:"M12 10.5v6m3-3H9m4.06-7.19-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44z"},null,-1),dl=[il];function ul(o,t){return e.openBlock(),e.createElementBlock("svg",cl,[...dl])}const ml={render:ul},fl={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"},pl=e.createElementVNode("path",{d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9"},null,-1),hl=[pl];function vl(o,t){return e.openBlock(),e.createElementBlock("svg",fl,[...hl])}const gl={render:vl},kl={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"},bl=e.createElementVNode("path",{d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"},null,-1),yl=[bl];function xl(o,t){return e.openBlock(),e.createElementBlock("svg",kl,[...yl])}const wl={render:xl},_l={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"},El=e.createElementVNode("path",{d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21q.512.078 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48 48 0 0 0-3.478-.397m-12 .562q.51-.089 1.022-.165m0 0a48 48 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a52 52 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a49 49 0 0 0-7.5 0"},null,-1),Vl=[El];function Nl(o,t){return e.openBlock(),e.createElementBlock("svg",_l,[...Vl])}const Sl={render:Nl},$l={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"},Bl=e.createElementVNode("path",{d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"},null,-1),Cl=[Bl];function Dl(o,t){return e.openBlock(),e.createElementBlock("svg",$l,[...Cl])}const Ml={render:Dl},Tl={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"},Al=e.createElementVNode("path",{d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125"},null,-1),Ll=[Al];function Ol(o,t){return e.openBlock(),e.createElementBlock("svg",Tl,[...Ll])}const Hl={render:Ol},Rl={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"},zl=e.createElementVNode("path",{d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5m6 4.125 2.25 2.25m0 0 2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125"},null,-1),Il=[zl];function Fl(o,t){return e.openBlock(),e.createElementBlock("svg",Rl,[...Il])}const jl={render:Fl},Ul={xmlns:"http://www.w3.org/2000/svg",fill:"none",class:"animate-spin p-0.5 h-5 w-5 text-white ml-auto",viewBox:"0 0 24 24"},Pl=e.createElementVNode("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",class:"opacity-25 stroke-blue-900 dark:stroke-blue-100"},null,-1),ql=e.createElementVNode("path",{fill:"currentColor",d:"M4 12a8 8 0 0 1 8-8V0C5.373 0 0 5.373 0 12zm2 5.291A7.96 7.96 0 0 1 4 12H0c0 3.042 1.135 5.824 3 7.938z",class:"opacity-75"},null,-1),Gl=[Pl,ql];function Wl(o,t){return e.openBlock(),e.createElementBlock("svg",Ul,[...Gl])}const qn={render:Wl},Kl={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"},Yl=e.createElementVNode("path",{d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"},null,-1),Jl=[Yl];function Xl(o,t){return e.openBlock(),e.createElementBlock("svg",Kl,[...Jl])}const Ql={render:Xl},Zl={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"},ec=e.createElementVNode("path",{d:"M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5 5.25 5.25"},null,-1),tc=[ec];function oc(o,t){return e.openBlock(),e.createElementBlock("svg",Zl,[...tc])}const nc={render:oc},rc={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"},sc=e.createElementVNode("path",{d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25zm0 9.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18zM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25zm0 9.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18z"},null,-1),ac=[sc];function lc(o,t){return e.openBlock(),e.createElementBlock("svg",rc,[...ac])}const cc={render:lc},ic={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"},dc=e.createElementVNode("path",{d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75"},null,-1),uc=[dc];function mc(o,t){return e.openBlock(),e.createElementBlock("svg",ic,[...uc])}const fc={render:mc},pc={class:"border-neutral-300 flex justify-between items-center py-1 text-sm"},hc={key:0,class:"flex text-center"},vc=["aria-label"],gc=["aria-label"],kc=["aria-label"],bc=["aria-label"],yc=["aria-label"],xc=["aria-label"],wc=["aria-label"],_c={key:1,class:"flex text-center"},Ec={class:"pl-2"},Vc={class:"dark:bg-gray-700 bg-gray-200 text-xs px-2 py-1 rounded"},Nc={class:"flex text-center items-center justify-end"},Sc=["aria-label"],$c=["aria-label"],Bc={__name:"Toolbar",setup(o){const t=e.inject("ServiceContainer"),{setStore:n}=t.storage,{t:s}=t.i18n,r=t.dragSelect,c=e.ref("");t.emitter.on("vf-search-query",({newQuery:a})=>{c.value=a});const l=()=>{t.fullScreen=!t.fullScreen,n("full-screen",t.fullScreen),t.emitter.emit("vf-fullscreen-toggle")},i=()=>{t.view=t.view==="list"?"grid":"list",r.refreshSelection(),n("viewport",t.view)};return(a,u)=>(e.openBlock(),e.createElementBlock("div",pc,[c.value.length?(e.openBlock(),e.createElementBlock("div",_c,[e.createElementVNode("div",Ec,[e.createTextVNode(e.toDisplayString(e.unref(s)("Search results for"))+" ",1),e.createElementVNode("span",Vc,e.toDisplayString(c.value),1)]),e.unref(t).fs.loading?(e.openBlock(),e.createBlock(e.unref(qn),{key:0})):e.createCommentVNode("",!0)])):(e.openBlock(),e.createElementBlock("div",hc,[e.unref(t).features.includes(e.unref(re).NEW_FOLDER)?(e.openBlock(),e.createElementBlock("div",{key:0,class:"mx-1.5","aria-label":e.unref(s)("New Folder"),"data-microtip-position":"bottom-right",role:"tooltip",onClick:u[0]||(u[0]=m=>e.unref(t).modal.open(In,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(ml))],8,vc)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(re).NEW_FILE)?(e.openBlock(),e.createElementBlock("div",{key:1,class:"mx-1.5","aria-label":e.unref(s)("New File"),"data-microtip-position":"bottom",role:"tooltip",onClick:u[1]||(u[1]=m=>e.unref(t).modal.open(Ls,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(gl))],8,gc)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(re).RENAME)?(e.openBlock(),e.createElementBlock("div",{key:2,class:"mx-1.5","aria-label":e.unref(s)("Rename"),"data-microtip-position":"bottom",role:"tooltip",onClick:u[2]||(u[2]=m=>e.unref(r).getCount()!==1||e.unref(t).modal.open(Fn,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(wl),{class:e.normalizeClass(e.unref(r).getCount()===1?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,kc)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(re).DELETE)?(e.openBlock(),e.createElementBlock("div",{key:3,class:"mx-1.5","aria-label":e.unref(s)("Delete"),"data-microtip-position":"bottom",role:"tooltip",onClick:u[3]||(u[3]=m=>!e.unref(r).getCount()||e.unref(t).modal.open(jn,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(Sl),{class:e.normalizeClass(e.unref(r).getCount()?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,bc)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(re).UPLOAD)?(e.openBlock(),e.createElementBlock("div",{key:4,class:"mx-1.5","aria-label":e.unref(s)("Upload"),"data-microtip-position":"bottom",role:"tooltip",onClick:u[4]||(u[4]=m=>e.unref(t).modal.open(Ma,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(Ml))],8,yc)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(re).UNARCHIVE)&&e.unref(r).getCount()===1&&e.unref(r).getSelected()[0].mime_type==="application/zip"?(e.openBlock(),e.createElementBlock("div",{key:5,class:"mx-1.5","aria-label":e.unref(s)("Unarchive"),"data-microtip-position":"bottom",role:"tooltip",onClick:u[5]||(u[5]=m=>!e.unref(r).getCount()||e.unref(t).modal.open(Un,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(jl),{class:e.normalizeClass(e.unref(r).getCount()?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,xc)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(re).ARCHIVE)?(e.openBlock(),e.createElementBlock("div",{key:6,class:"mx-1.5","aria-label":e.unref(s)("Archive"),"data-microtip-position":"bottom",role:"tooltip",onClick:u[6]||(u[6]=m=>!e.unref(r).getCount()||e.unref(t).modal.open(Pn,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(Hl),{class:e.normalizeClass(e.unref(r).getCount()?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,wc)):e.createCommentVNode("",!0)])),e.createElementVNode("div",Nc,[e.unref(t).features.includes(e.unref(re).FULL_SCREEN)?(e.openBlock(),e.createElementBlock("div",{key:0,onClick:l,class:"mx-1.5","aria-label":e.unref(s)("Toggle Full Screen"),"data-microtip-position":"bottom-left",role:"tooltip"},[e.unref(t).fullScreen?(e.openBlock(),e.createBlock(e.unref(nc),{key:0})):(e.openBlock(),e.createBlock(e.unref(Ql),{key:1}))],8,Sc)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"mx-1.5","aria-label":e.unref(s)("Change View"),"data-microtip-position":"bottom-left",role:"tooltip",onClick:u[7]||(u[7]=m=>c.value.length||i())},[e.unref(t).view==="grid"?(e.openBlock(),e.createBlock(e.unref(cc),{key:0,class:e.normalizeClass(c.value.length?"vf-toolbar-icon-disabled":"vf-toolbar-icon")},null,8,["class"])):e.createCommentVNode("",!0),e.unref(t).view==="list"?(e.openBlock(),e.createBlock(e.unref(fc),{key:1,class:e.normalizeClass(c.value.length?"vf-toolbar-icon-disabled":"vf-toolbar-icon")},null,8,["class"])):e.createCommentVNode("",!0)],8,$c)])]))}},Cc=(o,t=0,n=!1)=>{let s;return(...r)=>{n&&!s&&o(...r),clearTimeout(s),s=setTimeout(()=>{o(...r)},t)}},Ko=(o,t,n)=>{const s=e.ref(o);return e.customRef((r,c)=>({get(){return r(),s.value},set:Cc(l=>{s.value=l,c()},t,n)}))},Dc={class:"sm:flex sm:items-start"},Mc=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1),Tc={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Ac={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Lc={class:"text-sm text-gray-500 pb-1"},Oc={class:"max-h-[200px] overflow-y-auto vf-scrollbar text-left"},Hc={class:"flex text-sm text-gray-800 dark:text-gray-400"},Rc={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},zc=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),Ic=[zc],Fc={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},jc=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),Uc=[jc],Pc={class:"ml-1.5"},qc={class:"font-bold text-xs text-gray-700 dark:text-gray-500 mt-3 tracking-wider"},Gc={class:"flex text-sm text-gray-800 dark:text-gray-400 border dark:border-gray-700 p-1 rounded"},Wc=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})],-1),Kc={class:"ml-1.5 overflow-auto"},Yc={class:"m-1 mr-auto font-bold text-gray-500 text-sm dark:text-gray-200 self-center"},po={__name:"ModalMove",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,s=e.ref(t.modal.data.items.from),r=e.ref(""),c=()=>{s.value.length&&t.emitter.emit("vf-fetch",{params:{q:"move",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{items:s.value.map(({path:l,type:i})=>({path:l,type:i})),item:t.modal.data.items.to.path},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("Files moved.",t.modal.data.items.to.name)})},onError:l=>{r.value=n(l.message)}})};return(l,i)=>(e.openBlock(),e.createBlock(Be,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:c,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(n)("Yes, Move!")),1),e.createElementVNode("button",{type:"button",onClick:i[1]||(i[1]=a=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Cancel")),1),e.createElementVNode("div",Yc,e.toDisplayString(e.unref(n)("%s item(s) selected.",s.value.length)),1)]),default:e.withCtx(()=>[e.createElementVNode("div",Dc,[Mc,e.createElementVNode("div",Tc,[e.createElementVNode("h3",Ac,e.toDisplayString(e.unref(n)("Move files")),1),e.createElementVNode("p",Lc,e.toDisplayString(e.unref(n)("Are you sure you want to move these files?")),1),e.createElementVNode("div",Oc,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,a=>(e.openBlock(),e.createElementBlock("div",Hc,[e.createElementVNode("div",null,[a.type==="dir"?(e.openBlock(),e.createElementBlock("svg",Rc,Ic)):(e.openBlock(),e.createElementBlock("svg",Fc,Uc))]),e.createElementVNode("div",Pc,e.toDisplayString(a.path),1)]))),256))]),e.createElementVNode("h4",qc,e.toDisplayString(e.unref(n)("Target Directory")),1),e.createElementVNode("p",Gc,[Wc,e.createElementVNode("span",Kc,e.toDisplayString(e.unref(t).modal.data.items.to.path),1)]),r.value.length?(e.openBlock(),e.createBlock(Ce,{key:0,onHidden:i[0]||(i[0]=a=>r.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.value),1)]),_:1})):e.createCommentVNode("",!0)])])]),_:1}))}},Jc={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer",viewBox:"-40 -40 580 580"},Xc=e.createElementVNode("path",{d:"M463.5 224h8.5c13.3 0 24-10.7 24-24V72c0-9.7-5.8-18.5-14.8-22.2S461.9 48.1 455 55l-41.6 41.6c-87.6-86.5-228.7-86.2-315.8 1-87.5 87.5-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2S334.3 224 344 224z"},null,-1),Qc=[Xc];function Zc(o,t){return e.openBlock(),e.createElementBlock("svg",Jc,[...Qc])}const ei={render:Zc},ti={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-0.5 rounded",viewBox:"0 0 20 20"},oi=e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 9.707a1 1 0 0 1 0-1.414l4-4a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1-1.414 1.414L11 7.414V15a1 1 0 1 1-2 0V7.414L6.707 9.707a1 1 0 0 1-1.414 0",class:"pointer-events-none","clip-rule":"evenodd"},null,-1),ni=[oi];function ri(o,t){return e.openBlock(),e.createElementBlock("svg",ti,[...ni])}const si={render:ri},ai={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer",viewBox:"0 0 24 24"},li=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"},null,-1),ci=[li];function ii(o,t){return e.openBlock(),e.createElementBlock("svg",ai,[...ci])}const di={render:ii},ui={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-gray-800 cursor-pointer",viewBox:"0 0 20 20"},mi=e.createElementVNode("path",{d:"M10.707 2.293a1 1 0 0 0-1.414 0l-7 7a1 1 0 0 0 1.414 1.414L4 10.414V17a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-6.586l.293.293a1 1 0 0 0 1.414-1.414z",class:"pointer-events-none"},null,-1),fi=[mi];function pi(o,t){return e.openBlock(),e.createElementBlock("svg",ui,[...fi])}const hi={render:pi},vi={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-1 m-auto stroke-gray-400 fill-gray-100 dark:stroke-gray-400 dark:fill-gray-400/20",viewBox:"0 0 20 20"},gi=e.createElementVNode("path",{d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607"},null,-1),ki=[gi];function bi(o,t){return e.openBlock(),e.createElementBlock("svg",vi,[...ki])}const yi={render:bi},xi={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"w-6 h-6 cursor-pointer",viewBox:"0 0 24 24"},wi=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"},null,-1),_i=[wi];function Ei(o,t){return e.openBlock(),e.createElementBlock("svg",xi,[..._i])}const Vi={render:Ei},Ni={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",viewBox:"0 0 24 24"},Si=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-6l-2-2H5a2 2 0 0 0-2 2"},null,-1),$i=[Si];function Bi(o,t){return e.openBlock(),e.createElementBlock("svg",Ni,[...$i])}const Gn={render:Bi},Ci={xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 rounded text-slate-700 hover:bg-neutral-100 dark:fill-neutral-300 dark:hover:bg-gray-800 cursor-pointer",viewBox:"0 0 448 512"},Di=e.createElementVNode("path",{d:"M8 256a56 56 0 1 1 112 0 56 56 0 1 1-112 0m160 0a56 56 0 1 1 112 0 56 56 0 1 1-112 0m216-56a56 56 0 1 1 0 112 56 56 0 1 1 0-112"},null,-1),Mi=[Di];function Ti(o,t){return e.openBlock(),e.createElementBlock("svg",Ci,[...Mi])}const Ai={render:Ti},Li={class:"flex p-1.5 bg-neutral-100 dark:bg-gray-800 border-t border-b border-neutral-300 dark:border-gray-700/50 items-center select-none text-sm"},Oi=["aria-label"],Hi=["aria-label"],Ri=["aria-label"],zi={class:"flex leading-6"},Ii={key:0,class:"flex"},Fi=e.createElementVNode("div",{class:"text-neutral-300 dark:text-gray-600 mx-0.5"},"/",-1),ji={class:"relative"},Ui=e.createElementVNode("span",{class:"text-neutral-300 dark:text-gray-600 mx-0.5"},"/",-1),Pi=["onDragover","onDragleave","onDrop","title","onClick"],qi={class:"relative flex bg-white dark:bg-gray-700 justify-between items-center rounded p-1 ml-2 w-full"},Gi=["placeholder"],Wi={class:"z-30 absolute top-[65px] md:top-[75px] left-[90px] rounded -mx-1.5 mt-1 bg-neutral-50 dark:bg-gray-800 max-w-80 max-h-50 shadow overflow-y-auto text-gray-700 dark:text-gray-200 border border-neutral-300 dark:border-gray-600"},Ki=["onDrop","onClick"],Yi={class:"flex pointer-events-none"},Ji={class:"inline-block w-full text-ellipsis overflow-hidden"},Xi={__name:"Breadcrumb",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,s=t.dragSelect,r=e.ref(null),c=Ko(0,100);e.watch(c,N=>{const y=r.value.children;let $=0,T=0,A=5,O=1;t.fs.limitBreadcrumbItems(A),e.nextTick(()=>{for(let M=y.length-1;M>=0&&!($+y[M].offsetWidth>c.value-40);M--)$+=parseInt(y[M].offsetWidth,10),T++;T<O&&(T=O),T>A&&(T=A),t.fs.limitBreadcrumbItems(T)})});const l=()=>{c.value=r.value.offsetWidth};e.onMounted(()=>{new ResizeObserver(l).observe(r.value)});const i=(N,y=null)=>{N.preventDefault(),s.isDraggingRef.value=!1,m(N),y??(y=t.fs.hiddenBreadcrumbs.length-1);let $=JSON.parse(N.dataTransfer.getData("items"));if($.find(T=>T.storage!==t.fs.adapter)){alert("Moving items between different storages is not supported yet.");return}t.modal.open(po,{items:{from:$,to:t.fs.hiddenBreadcrumbs[y]??{path:t.fs.adapter+"://"}}})},a=(N,y=null)=>{N.preventDefault(),s.isDraggingRef.value=!1,m(N),y??(y=t.fs.breadcrumbs.length-2);let $=JSON.parse(N.dataTransfer.getData("items"));if($.find(T=>T.storage!==t.fs.adapter)){alert("Moving items between different storages is not supported yet.");return}t.modal.open(po,{items:{from:$,to:t.fs.breadcrumbs[y]??{path:t.fs.adapter+"://"}}})},u=N=>{N.preventDefault(),t.fs.isGoUpAvailable()?(N.dataTransfer.dropEffect="copy",N.currentTarget.classList.add("bg-blue-200","dark:bg-slate-600")):(N.dataTransfer.dropEffect="none",N.dataTransfer.effectAllowed="none")},m=N=>{N.preventDefault(),N.currentTarget.classList.remove("bg-blue-200","dark:bg-slate-600"),t.fs.isGoUpAvailable()&&N.currentTarget.classList.remove("bg-blue-200","dark:bg-slate-600")},p=()=>{h(),t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:t.fs.data.dirname}})},d=()=>{h(),!t.fs.isGoUpAvailable()||t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:t.fs.parentFolderPath}})},f=N=>{t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:N.path}}),t.fs.toggleHiddenBreadcrumbs(!1)},v=()=>{t.fs.showHiddenBreadcrumbs&&t.fs.toggleHiddenBreadcrumbs(!1)},x={mounted(N,y,$,T){N.clickOutsideEvent=function(A){N===A.target||N.contains(A.target)||y.value()},document.body.addEventListener("click",N.clickOutsideEvent)},beforeUnmount(N,y,$,T){document.body.removeEventListener("click",N.clickOutsideEvent)}},b=e.ref(null),E=()=>{t.features.includes(re.SEARCH)&&(t.fs.searchMode=!0,e.nextTick(()=>b.value.focus()))},g=Ko("",400);e.watch(g,N=>{t.emitter.emit("vf-toast-clear"),t.emitter.emit("vf-search-query",{newQuery:N})});const h=()=>{t.fs.searchMode=!1,g.value=""};t.emitter.on("vf-search-exit",()=>{h()});const D=()=>{g.value===""&&h()};return(N,y)=>(e.openBlock(),e.createElementBlock("div",Li,[e.createElementVNode("span",{"aria-label":e.unref(n)("Go up a directory"),"data-microtip-position":"bottom-right",role:"tooltip"},[e.createVNode(e.unref(si),{onDragover:y[0]||(y[0]=$=>u($)),onDragleave:y[1]||(y[1]=$=>m($)),onDrop:y[2]||(y[2]=$=>a($)),onClick:d,class:e.normalizeClass(e.unref(t).fs.isGoUpAvailable()?"text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer":"text-gray-400 dark:text-neutral-500")},null,8,["class"])],8,Oi),e.unref(t).fs.loading?(e.openBlock(),e.createElementBlock("span",{key:1,"aria-label":e.unref(n)("Cancel"),"data-microtip-position":"bottom-right",role:"tooltip"},[e.createVNode(e.unref(di),{onClick:y[3]||(y[3]=$=>e.unref(t).emitter.emit("vf-fetch-abort"))})],8,Ri)):(e.openBlock(),e.createElementBlock("span",{key:0,"aria-label":e.unref(n)("Refresh"),"data-microtip-position":"bottom-right",role:"tooltip"},[e.createVNode(e.unref(ei),{onClick:p})],8,Hi)),e.withDirectives(e.createElementVNode("div",{onClick:e.withModifiers(E,["self"]),class:"group flex bg-white dark:bg-gray-700 items-center rounded p-1 ml-2 w-full overflow-hidden"},[e.createElementVNode("div",null,[e.createVNode(e.unref(hi),{onDragover:y[4]||(y[4]=$=>u($)),onDragleave:y[5]||(y[5]=$=>m($)),onDrop:y[6]||(y[6]=$=>a($,-1)),onClick:y[7]||(y[7]=$=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index",adapter:e.unref(t).fs.adapter}}))})]),e.createElementVNode("div",zi,[e.unref(t).fs.hiddenBreadcrumbs.length?e.withDirectives((e.openBlock(),e.createElementBlock("div",Ii,[Fi,e.createElementVNode("div",ji,[e.createElementVNode("span",{onDragenter:y[8]||(y[8]=$=>e.unref(t).fs.toggleHiddenBreadcrumbs(!0)),onClick:y[9]||(y[9]=$=>e.unref(t).fs.toggleHiddenBreadcrumbs()),class:"text-slate-700 dark:text-slate-200 hover:bg-neutral-100 dark:hover:bg-gray-800 rounded cursor-pointer"},[e.createVNode(e.unref(Ai),{class:"px-1 pointer-events-none"})],32)])])),[[x,v]]):e.createCommentVNode("",!0)]),e.createElementVNode("div",{ref_key:"breadcrumbContainer",ref:r,class:"flex leading-6 w-full overflow-hidden",onClick:e.withModifiers(E,["self"])},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(t).fs.breadcrumbs,($,T)=>(e.openBlock(),e.createElementBlock("div",{key:T},[Ui,e.createElementVNode("span",{onDragover:A=>T===e.unref(t).fs.breadcrumbs.length-1||u(A),onDragleave:A=>T===e.unref(t).fs.breadcrumbs.length-1||m(A),onDrop:A=>T===e.unref(t).fs.breadcrumbs.length-1||a(A,T),class:"px-1.5 py-1 text-slate-700 dark:text-slate-200 hover:bg-neutral-100 dark:hover:bg-gray-800 rounded cursor-pointer whitespace-nowrap",title:$.basename,onClick:A=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index",adapter:e.unref(t).fs.adapter,path:$.path}})},e.toDisplayString($.name),41,Pi)]))),128))],512),e.unref(t).fs.loading?(e.openBlock(),e.createBlock(e.unref(qn),{key:0})):e.createCommentVNode("",!0)],512),[[e.vShow,!e.unref(t).fs.searchMode]]),e.withDirectives(e.createElementVNode("div",qi,[e.createElementVNode("div",null,[e.createVNode(e.unref(yi))]),e.withDirectives(e.createElementVNode("input",{ref_key:"searchInput",ref:b,onKeydown:e.withKeys(h,["esc"]),onBlur:D,"onUpdate:modelValue":y[10]||(y[10]=$=>e.isRef(g)?g.value=$:null),placeholder:e.unref(n)("Search anything.."),class:"w-full pb-0 px-1 border-0 text-base ring-0 outline-0 text-gray-600 focus:ring-transparent focus:border-transparent dark:focus:ring-transparent dark:focus:border-transparent dark:text-gray-300 bg-transparent",type:"text"},null,40,Gi),[[e.vModelText,e.unref(g)]]),e.createVNode(e.unref(Vi),{onClick:h})],512),[[e.vShow,e.unref(t).fs.searchMode]]),e.withDirectives(e.createElementVNode("div",Wi,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(t).fs.hiddenBreadcrumbs,($,T)=>(e.openBlock(),e.createElementBlock("div",{key:T,onDragover:y[11]||(y[11]=A=>u(A)),onDragleave:y[12]||(y[12]=A=>m(A)),onDrop:A=>i(A,T),onClick:A=>f($),class:"px-2 py-0.5 hover:bg-gray-400/20 cursor-pointer items-center whitespace-nowrap"},[e.createElementVNode("div",Yi,[e.createElementVNode("span",null,[e.createVNode(e.unref(Gn),{class:"h-5 w-5"})]),e.createTextVNode(),e.createElementVNode("span",Ji,e.toDisplayString($.name),1)])],40,Ki))),128))],512),[[e.vShow,e.unref(t).fs.showHiddenBreadcrumbs]])]))}},Wn=(o,t=null)=>new Date(o*1e3).toLocaleString(t??navigator.language??"en-US"),Qi=["onClick"],Zi={__name:"Toast",setup(o){const t=e.inject("ServiceContainer"),{getStore:n}=t.storage,s=e.ref(n("full-screen",!1)),r=e.ref([]),c=a=>a==="error"?"text-red-400 border-red-400 dark:text-red-300 dark:border-red-300":"text-lime-600 border-lime-600 dark:text-lime-300 dark:border-lime-1300",l=a=>{r.value.splice(a,1)},i=a=>{let u=r.value.findIndex(m=>m.id===a);u!==-1&&l(u)};return t.emitter.on("vf-toast-clear",()=>{r.value=[]}),t.emitter.on("vf-toast-push",a=>{let u=new Date().getTime().toString(36).concat(performance.now().toString(),Math.random().toString()).replace(/\./g,"");a.id=u,r.value.push(a),setTimeout(()=>{i(u)},5e3)}),(a,u)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass([s.value.value?"fixed":"absolute","max-w-fit flex flex-col bottom-0 left-1/2 -translate-x-1/2"])},[e.createVNode(e.TransitionGroup,{name:"vf-toast-item","leave-active-class":"transition-all duration-1000","leave-to-class":"opacity-0"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,(m,p)=>(e.openBlock(),e.createElementBlock("div",{onClick:d=>l(p),key:m,class:e.normalizeClass([c(m.type),"inline-block mx-auto my-0.5 py-0.5 px-2 min-w-max bg-gray-50 dark:bg-gray-600 border text-xs sm:text-sm rounded cursor-pointer"])},e.toDisplayString(m.label),11,Qi))),128))]),_:1})],2))}},ed={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 20 20"},td=e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 0 1 1.414 0L10 10.586l3.293-3.293a1 1 0 1 1 1.414 1.414l-4 4a1 1 0 0 1-1.414 0l-4-4a1 1 0 0 1 0-1.414","clip-rule":"evenodd"},null,-1),od=[td];function nd(o,t){return e.openBlock(),e.createElementBlock("svg",ed,[...od])}const rd={render:nd},sd={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 20 20"},ad=e.createElementVNode("path",{"fill-rule":"evenodd",d:"M14.707 12.707a1 1 0 0 1-1.414 0L10 9.414l-3.293 3.293a1 1 0 0 1-1.414-1.414l4-4a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1 0 1.414","clip-rule":"evenodd"},null,-1),ld=[ad];function cd(o,t){return e.openBlock(),e.createElementBlock("svg",sd,[...ld])}const id={render:cd},bt={__name:"SortIcon",props:{direction:String},setup(o){return(t,n)=>(e.openBlock(),e.createElementBlock("div",null,[o.direction==="asc"?(e.openBlock(),e.createBlock(e.unref(rd),{key:0})):e.createCommentVNode("",!0),o.direction==="desc"?(e.openBlock(),e.createBlock(e.unref(id),{key:1})):e.createCommentVNode("",!0)]))}},dd={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"text-neutral-500",viewBox:"0 0 24 24"},ud=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 0 0 2-2V9.414a1 1 0 0 0-.293-.707l-5.414-5.414A1 1 0 0 0 12.586 3H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2"},null,-1),md=[ud];function fd(o,t){return e.openBlock(),e.createElementBlock("svg",dd,[...md])}const pd={render:fd},Jt={__name:"ItemIcon",props:{type:{type:String,required:!0},small:{type:Boolean,default:!1}},setup(o){return(t,n)=>(e.openBlock(),e.createElementBlock("span",null,[o.type==="dir"?(e.openBlock(),e.createBlock(e.unref(Gn),{key:0,class:e.normalizeClass({"h-5 w-5":o.small,"h-10 w-10 md:h-12 md:w-12 m-auto":!o.small})},null,8,["class"])):(e.openBlock(),e.createBlock(e.unref(pd),{key:1,class:e.normalizeClass({"h-5 w-5":o.small,"h-10 w-10 md:h-12 md:w-12 m-auto":!o.small})},null,8,["class"]))]))}},hd={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"absolute h-6 w-6 md:h-12 md:w-12 m-auto stroke-neutral-500 fill-white dark:fill-gray-700 dark:stroke-gray-600 z-10",viewBox:"0 0 24 24"},vd=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 0 0 2-2V9.414a1 1 0 0 0-.293-.707l-5.414-5.414A1 1 0 0 0 12.586 3H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2"},null,-1),gd=[vd];function kd(o,t){return e.openBlock(),e.createElementBlock("svg",hd,[...gd])}const bd={render:kd},yd={class:"absolute -z-50 -top-96"},xd={class:"text-neutral-700 dark:text-neutral-300 p-1 absolute text-center top-4 right-[-2rem] md:top-5 md:right-[-2.4rem] z-20 text-xs"},wd={__name:"DragItem",props:{count:{type:Number,default:0}},setup(o){const t=o;return(n,s)=>(e.openBlock(),e.createElementBlock("div",yd,[e.createVNode(e.unref(bd)),e.createElementVNode("div",xd,e.toDisplayString(t.count),1)]))}},_d={class:"flex"},Ed=["aria-label"],Vd={class:"ml-auto mb-2"},Nd={key:0,class:"p-2 border font-normal whitespace-pre-wrap border-gray-200 dark:border-gray-700/50 dark:text-gray-200 rounded min-h-[200px] max-h-[60vh] text-xs overflow-auto"},Sd={key:1},$d={__name:"Text",emits:["success"],setup(o,{emit:t}){const n=t,s=e.ref(""),r=e.ref(""),c=e.ref(null),l=e.ref(!1),i=e.ref(""),a=e.ref(!1),u=e.inject("ServiceContainer"),{t:m}=u.i18n;e.onMounted(()=>{u.requester.send({url:"",method:"get",params:{q:"preview",adapter:u.modal.data.adapter,path:u.modal.data.item.path},responseType:"text"}).then(f=>{s.value=f,n("success")})});const p=()=>{l.value=!l.value,r.value=s.value},d=()=>{i.value="",a.value=!1,u.requester.send({url:"",method:"post",params:{q:"save",adapter:u.modal.data.adapter,path:u.modal.data.item.path},body:{content:r.value},responseType:"text"}).then(f=>{i.value=m("Updated."),s.value=f,n("success"),l.value=!l.value}).catch(f=>{i.value=m(f.message),a.value=!0})};return(f,v)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",_d,[e.createElementVNode("div",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":e.unref(u).modal.data.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(e.unref(u).modal.data.item.basename),9,Ed),e.createElementVNode("div",Vd,[l.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:d,class:"ml-1 px-2 py-1 rounded border border-transparent shadow-sm bg-blue-700/75 hover:bg-blue-700 dark:bg-gray-700 dark:hover:bg-gray-700/50 text-base font-medium text-white sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(m)("Save")),1)):e.createCommentVNode("",!0),e.unref(u).features.includes(e.unref(re).EDIT)?(e.openBlock(),e.createElementBlock("button",{key:1,class:"ml-1 px-2 py-1 text-blue-500",onClick:v[0]||(v[0]=x=>p())},e.toDisplayString(l.value?e.unref(m)("Cancel"):e.unref(m)("Edit")),1)):e.createCommentVNode("",!0)])]),e.createElementVNode("div",null,[l.value?(e.openBlock(),e.createElementBlock("div",Sd,[e.withDirectives(e.createElementVNode("textarea",{ref_key:"editInput",ref:c,"onUpdate:modelValue":v[1]||(v[1]=x=>r.value=x),class:"w-full p-2 rounded dark:bg-gray-700 dark:text-gray-200 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:selection:bg-gray-500 min-h-[200px] max-h-[60vh]",name:"text",id:"",cols:"30",rows:"10"},null,512),[[e.vModelText,r.value]])])):(e.openBlock(),e.createElementBlock("pre",Nd,e.toDisplayString(s.value),1)),i.value.length?(e.openBlock(),e.createBlock(Ce,{key:2,onHidden:v[2]||(v[2]=x=>i.value=""),error:a.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(i.value),1)]),_:1},8,["error"])):e.createCommentVNode("",!0)])],64))}},Bd={class:"flex"},Cd=["aria-label"],Dd={class:"ml-auto mb-2"},Md={class:"w-full flex justify-center"},Td=["src"],Ad={__name:"Image",emits:["success"],setup(o,{emit:t}){const n=t,s=e.inject("ServiceContainer"),{t:r}=s.i18n,c=e.ref(null),l=e.ref(null),i=e.ref(!1),a=e.ref(""),u=e.ref(!1),m=()=>{i.value=!i.value,i.value?l.value=new or(c.value,{crop(d){}}):l.value.destroy()},p=()=>{l.value.getCroppedCanvas({width:795,height:341}).toBlob(d=>{a.value="",u.value=!1;const f=new FormData;f.set("file",d),s.requester.send({url:"",method:"post",params:{q:"upload",adapter:s.modal.data.adapter,path:s.modal.data.item.path},body:f}).then(v=>{a.value=r("Updated."),c.value.src=s.requester.getPreviewUrl(s.modal.data.adapter,s.modal.data.item),m(),n("success")}).catch(v=>{a.value=r(v.message),u.value=!0})})};return e.onMounted(()=>{n("success")}),(d,f)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",Bd,[e.createElementVNode("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":e.unref(s).modal.data.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(e.unref(s).modal.data.item.basename),9,Cd),e.createElementVNode("div",Dd,[i.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:p,class:"ml-1 px-2 py-1 rounded border border-transparent shadow-sm bg-blue-700/75 hover:bg-blue-700 dark:bg-gray-700 dark:hover:bg-gray-700/50 text-base font-medium text-white sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(r)("Crop")),1)):e.createCommentVNode("",!0),e.unref(s).features.includes(e.unref(re).EDIT)?(e.openBlock(),e.createElementBlock("button",{key:1,class:"ml-1 px-2 py-1 text-blue-500",onClick:f[0]||(f[0]=v=>m())},e.toDisplayString(i.value?e.unref(r)("Cancel"):e.unref(r)("Edit")),1)):e.createCommentVNode("",!0)])]),e.createElementVNode("div",Md,[e.createElementVNode("img",{ref_key:"image",ref:c,class:"max-w-[50vh] max-h-[50vh]",src:e.unref(s).requester.getPreviewUrl(e.unref(s).modal.data.adapter,e.unref(s).modal.data.item),alt:""},null,8,Td)]),a.value.length?(e.openBlock(),e.createBlock(Ce,{key:0,onHidden:f[1]||(f[1]=v=>a.value=""),error:u.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.value),1)]),_:1},8,["error"])):e.createCommentVNode("",!0)],64))}},Ld={class:"flex"},Od=["aria-label"],Hd=e.createElementVNode("div",null,null,-1),Rd={__name:"Default",emits:["success"],setup(o,{emit:t}){const n=e.inject("ServiceContainer"),s=t;return e.onMounted(()=>{s("success")}),(r,c)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",Ld,[e.createElementVNode("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":e.unref(n).modal.data.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(e.unref(n).modal.data.item.basename),9,Od)]),Hd],64))}},zd=["aria-label"],Id={class:"w-full aspect-video",preload:"",controls:""},Fd=["src"],jd={__name:"Video",emits:["success"],setup(o,{emit:t}){const n=e.inject("ServiceContainer"),s=t,r=()=>n.requester.getPreviewUrl(n.modal.data.adapter,n.modal.data.item);return e.onMounted(()=>{s("success")}),(c,l)=>(e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":e.unref(n).modal.data.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(e.unref(n).modal.data.item.basename),9,zd),e.createElementVNode("div",null,[e.createElementVNode("video",Id,[e.createElementVNode("source",{src:r(),type:"video/mp4"},null,8,Fd),e.createTextVNode(" Your browser does not support the video tag. ")])])]))}},Ud=["aria-label"],Pd={class:"w-full",controls:""},qd=["src"],Gd={__name:"Audio",emits:["success"],setup(o,{emit:t}){const n=t,s=e.inject("ServiceContainer"),r=()=>s.requester.getPreviewUrl(s.modal.data.adapter,s.modal.data.item);return e.onMounted(()=>{n("success")}),(c,l)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":e.unref(s).modal.data.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(e.unref(s).modal.data.item.basename),9,Ud),e.createElementVNode("div",null,[e.createElementVNode("audio",Pd,[e.createElementVNode("source",{src:r(),type:"audio/mpeg"},null,8,qd),e.createTextVNode(" Your browser does not support the audio element. ")])])],64))}},Wd=["aria-label"],Kd=["data"],Yd=["src"],Jd=e.createElementVNode("p",null,[e.createTextVNode(" Your browser does not support PDFs. "),e.createElementVNode("a",{href:"https://example.com/test.pdf"},"Download the PDF"),e.createTextVNode(" . ")],-1),Xd=[Jd],Qd={__name:"Pdf",emits:["success"],setup(o,{emit:t}){const n=e.inject("ServiceContainer"),s=t,r=()=>n.requester.getPreviewUrl(n.modal.data.adapter,n.modal.data.item);return e.onMounted(()=>{s("success")}),(c,l)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":e.unref(n).modal.data.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(e.unref(n).modal.data.item.basename),9,Wd),e.createElementVNode("div",null,[e.createElementVNode("object",{class:"h-[60vh]",data:r(),type:"application/pdf",width:"100%",height:"100%"},[e.createElementVNode("iframe",{class:"border-0",src:r(),width:"100%",height:"100%"},Xd,8,Yd)],8,Kd)])],64))}},Zd={class:"sm:flex sm:items-start"},eu={class:"mt-3 text-center sm:mt-0 sm:text-left w-full"},tu={key:0},ou={class:"text-gray-700 dark:text-gray-200 text-sm"},nu={key:0,class:"flex leading-5"},ru=e.createElementVNode("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e.createElementVNode("circle",{class:"opacity-25 stroke-blue-900 dark:stroke-blue-100",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e.createElementVNode("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),su={class:"py-2 flex font-normal break-all dark:text-gray-200 rounded text-xs"},au={class:"font-bold"},lu={class:"font-bold pl-2"},cu={key:0,class:"text-xs text-gray-600 dark:text-gray-400"},iu=["download","href"],Kn={__name:"ModalPreview",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,s=e.ref(!1),r=l=>(t.modal.data.item.mime_type??"").startsWith(l),c=t.features.includes(re.PREVIEW);return c||(s.value=!0),(l,i)=>(e.openBlock(),e.createBlock(Be,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:i[6]||(i[6]=a=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Close")),1),e.unref(t).features.includes(e.unref(re).DOWNLOAD)?(e.openBlock(),e.createElementBlock("a",{key:0,target:"_blank",class:"vf-btn vf-btn-primary",download:e.unref(t).requester.getDownloadUrl(e.unref(t).modal.data.adapter,e.unref(t).modal.data.item),href:e.unref(t).requester.getDownloadUrl(e.unref(t).modal.data.adapter,e.unref(t).modal.data.item)},e.toDisplayString(e.unref(n)("Download")),9,iu)):e.createCommentVNode("",!0)]),default:e.withCtx(()=>[e.createElementVNode("div",Zd,[e.createElementVNode("div",eu,[e.unref(c)?(e.openBlock(),e.createElementBlock("div",tu,[r("text")?(e.openBlock(),e.createBlock($d,{key:0,onSuccess:i[0]||(i[0]=a=>s.value=!0)})):r("image")?(e.openBlock(),e.createBlock(Ad,{key:1,onSuccess:i[1]||(i[1]=a=>s.value=!0)})):r("video")?(e.openBlock(),e.createBlock(jd,{key:2,onSuccess:i[2]||(i[2]=a=>s.value=!0)})):r("audio")?(e.openBlock(),e.createBlock(Gd,{key:3,onSuccess:i[3]||(i[3]=a=>s.value=!0)})):r("application/pdf")?(e.openBlock(),e.createBlock(Qd,{key:4,onSuccess:i[4]||(i[4]=a=>s.value=!0)})):(e.openBlock(),e.createBlock(Rd,{key:5,onSuccess:i[5]||(i[5]=a=>s.value=!0)}))])):e.createCommentVNode("",!0),e.createElementVNode("div",ou,[s.value===!1?(e.openBlock(),e.createElementBlock("div",nu,[ru,e.createElementVNode("span",null,e.toDisplayString(e.unref(n)("Loading")),1)])):e.createCommentVNode("",!0)])])]),e.createElementVNode("div",su,[e.createElementVNode("div",null,[e.createElementVNode("span",au,e.toDisplayString(e.unref(n)("File Size"))+": ",1),e.createTextVNode(e.toDisplayString(e.unref(t).filesize(e.unref(t).modal.data.item.file_size)),1)]),e.createElementVNode("div",null,[e.createElementVNode("span",lu,e.toDisplayString(e.unref(n)("Last Modified"))+": ",1),e.createTextVNode(" "+e.toDisplayString(e.unref(Wn)(e.unref(t).modal.data.item.last_modified)),1)])]),e.unref(t).features.includes(e.unref(re).DOWNLOAD)?(e.openBlock(),e.createElementBlock("div",cu,[e.createElementVNode("span",null,e.toDisplayString(e.unref(n)(`Download doesn't work? You can try right-click "Download" button, select "Save link as...".`)),1)])):e.createCommentVNode("",!0)]),_:1}))}},du=["data-type","data-item","data-index"],Xt={__name:"Item",props:{item:{type:Object},index:{type:Number},dragImage:{type:Object}},setup(o){const t=e.inject("ServiceContainer"),n=t.dragSelect,s=o,r=d=>{d.type==="dir"?(t.emitter.emit("vf-search-exit"),t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:d.path}})):t.modal.open(Kn,{adapter:t.fs.adapter,item:d})},c={mounted(d,f,v,x){v.props.draggable&&(d.addEventListener("dragstart",b=>l(b,f.value)),d.addEventListener("dragover",b=>a(b,f.value)),d.addEventListener("drop",b=>i(b,f.value)))},beforeUnmount(d,f,v,x){v.props.draggable&&(d.removeEventListener("dragstart",l),d.removeEventListener("dragover",a),d.removeEventListener("drop",i))}},l=(d,f)=>{if(d.altKey||d.ctrlKey||d.metaKey)return d.preventDefault(),!1;n.isDraggingRef.value=!0,d.dataTransfer.setDragImage(s.dragImage.$el,0,15),d.dataTransfer.effectAllowed="all",d.dataTransfer.dropEffect="copy",d.dataTransfer.setData("items",JSON.stringify(n.getSelected()))},i=(d,f)=>{d.preventDefault(),n.isDraggingRef.value=!1;let v=JSON.parse(d.dataTransfer.getData("items"));if(v.find(x=>x.storage!==t.fs.adapter)){alert("Moving items between different storages is not supported yet.");return}t.modal.open(po,{items:{from:v,to:f}})},a=(d,f)=>{d.preventDefault(),!f||f.type!=="dir"||n.getSelection().find(v=>v===d.currentTarget)?(d.dataTransfer.dropEffect="none",d.dataTransfer.effectAllowed="none"):d.dataTransfer.dropEffect="copy"};let u=null;const m=()=>{u&&clearTimeout(u)},p=d=>{u=setTimeout(()=>{const f=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!1,view:window,button:2,buttons:0,clientX:d.target.getBoundingClientRect().x,clientY:d.target.getBoundingClientRect().y});d.target.dispatchEvent(f)},500)};return(d,f)=>e.withDirectives((e.openBlock(),e.createElementBlock("div",{style:e.normalizeStyle({opacity:e.unref(n).isDraggingRef.value&&e.unref(n).getSelection().find(v=>d.$el===v)?"0.5 !important":""}),class:e.normalizeClass(["vf-item-"+e.unref(n).explorerId]),"data-type":o.item.type,key:o.item.path,"data-item":JSON.stringify(o.item),"data-index":o.index,onDblclick:f[0]||(f[0]=v=>r(o.item)),onTouchstart:f[1]||(f[1]=v=>p(v)),onTouchend:f[2]||(f[2]=v=>m()),onContextmenu:f[3]||(f[3]=e.withModifiers(v=>e.unref(t).emitter.emit("vf-contextmenu-show",{event:v,items:e.unref(n).getSelected(),target:o.item}),["prevent"]))},[e.renderSlot(d.$slots,"default")],46,du)),[[c,o.item]])}},uu={class:"relative flex-auto flex flex-col overflow-hidden"},mu={key:0,class:"grid grid-cols-12 px-1 bg-neutral-50 dark:bg-gray-800 border-b border-neutral-300 dark:border-gray-700 text-xs select-none divide-x"},fu={class:"relative"},pu={class:"grid grid-cols-12 items-center"},hu={class:"flex col-span-7 items-center"},vu={class:"overflow-ellipsis overflow-hidden whitespace-nowrap"},gu={class:"col-span-5 overflow-ellipsis overflow-hidden whitespace-nowrap"},ku={class:"grid grid-cols-12 items-center"},bu={class:"flex col-span-7 items-center"},yu={class:"overflow-ellipsis overflow-hidden whitespace-nowrap"},xu={class:"col-span-2 text-center"},wu={class:"col-span-3 overflow-ellipsis overflow-hidden whitespace-nowrap px-1 md:px-3"},_u={class:"relative"},Eu=["data-src","alt"],Vu={key:2,class:"absolute hidden md:block top-1/2 w-full text-center text-neutral-500"},Nu={class:"break-all"},Su={__name:"Explorer",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,s=p=>p==null?void 0:p.substring(0,3),r=e.ref(null),c=e.ref(""),l=t.dragSelect;let i;t.emitter.on("vf-fullscreen-toggle",()=>{l.area.value.style.height=null}),t.emitter.on("vf-search-query",({newQuery:p})=>{c.value=p,p?t.emitter.emit("vf-fetch",{params:{q:"search",adapter:t.fs.adapter,path:t.fs.data.dirname,filter:p},onSuccess:d=>{d.files.length||t.emitter.emit("vf-toast-push",{label:n("No search result found.")})}}):t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:t.fs.data.dirname}})});const a=e.reactive({active:!1,column:"",order:""}),u=(p=!0)=>{let d=[...t.fs.data.files],f=a.column,v=a.order==="asc"?1:-1;if(!p)return d;const x=(b,E)=>typeof b=="string"&&typeof E=="string"?b.toLowerCase().localeCompare(E.toLowerCase()):b<E?-1:b>E?1:0;return a.active&&(d=d.slice().sort((b,E)=>x(b[f],E[f])*v)),d},m=p=>{a.active&&a.column===p?(a.active=a.order==="asc",a.column=p,a.order="desc"):(a.active=!0,a.column=p,a.order="asc")};return e.onMounted(()=>{i=new tr(l.area.value)}),e.onUpdated(()=>{i.update()}),e.onBeforeUnmount(()=>{i.destroy()}),(p,d)=>(e.openBlock(),e.createElementBlock("div",uu,[e.unref(t).view==="list"||c.value.length?(e.openBlock(),e.createElementBlock("div",mu,[e.createElementVNode("div",{onClick:d[0]||(d[0]=f=>m("basename")),class:"col-span-7 vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(n)("Name"))+" ",1),e.withDirectives(e.createVNode(bt,{direction:a.order},null,8,["direction"]),[[e.vShow,a.active&&a.column==="basename"]])]),c.value.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,onClick:d[1]||(d[1]=f=>m("file_size")),class:"justify-center col-span-2 vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(n)("Size"))+" ",1),e.withDirectives(e.createVNode(bt,{direction:a.order},null,8,["direction"]),[[e.vShow,a.active&&a.column==="file_size"]])])),c.value.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:1,onClick:d[2]||(d[2]=f=>m("last_modified")),class:"justify-center col-span-3 vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(n)("Date"))+" ",1),e.withDirectives(e.createVNode(bt,{direction:a.order},null,8,["direction"]),[[e.vShow,a.active&&a.column==="last_modified"]])])),c.value.length?(e.openBlock(),e.createElementBlock("div",{key:2,onClick:d[3]||(d[3]=f=>m("path")),class:"justify-center col-span-5 vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(n)("Filepath"))+" ",1),e.withDirectives(e.createVNode(bt,{direction:a.order},null,8,["direction"]),[[e.vShow,a.active&&a.column==="path"]])])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),e.createElementVNode("div",fu,[e.createVNode(wd,{ref_key:"dragImage",ref:r,count:e.unref(l).getCount()},null,8,["count"])]),e.createElementVNode("div",{ref:e.unref(l).scrollBarContainer,class:e.normalizeClass(["vf-explorer-scrollbar-container",[{"grid-view":e.unref(t).view==="grid"}]])},[e.createElementVNode("div",{ref:e.unref(l).scrollBar,class:"w-5 bg-transparent pointer-events-none"},null,512)],2),e.createElementVNode("div",{ref:e.unref(l).area,class:e.normalizeClass([{"resize-y":!e.unref(t).fullScreen},"h-full w-full text-xs vf-explorer-scrollbar vf-selector-area min-h-[150px] z-0 overflow-y-auto"]),onContextmenu:d[4]||(d[4]=e.withModifiers(f=>e.unref(t).emitter.emit("vf-contextmenu-show",{event:f,items:e.unref(l).getSelected()}),["self","prevent"]))},[c.value.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(u(),(f,v)=>(e.openBlock(),e.createBlock(Xt,{item:f,index:v,dragImage:r.value,class:"vf-item vf-item-list"},{default:e.withCtx(()=>[e.createElementVNode("div",pu,[e.createElementVNode("div",hu,[e.createVNode(Jt,{type:f.type,small:e.unref(t).compactListView},null,8,["type","small"]),e.createElementVNode("span",vu,e.toDisplayString(f.basename),1)]),e.createElementVNode("div",gu,e.toDisplayString(f.path),1)])]),_:2},1032,["item","index","dragImage"]))),256)):e.createCommentVNode("",!0),e.unref(t).view==="list"&&!c.value.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(u(),(f,v)=>(e.openBlock(),e.createBlock(Xt,{item:f,index:v,dragImage:r.value,class:"vf-item vf-item-list",draggable:"true"},{default:e.withCtx(()=>[e.createElementVNode("div",ku,[e.createElementVNode("div",bu,[e.createVNode(Jt,{type:f.type,small:e.unref(t).compactListView},null,8,["type","small"]),e.createElementVNode("span",yu,e.toDisplayString(f.basename),1)]),e.createElementVNode("div",xu,e.toDisplayString(f.file_size?e.unref(t).filesize(f.file_size):""),1),e.createElementVNode("div",wu,e.toDisplayString(e.unref(Wn)(f.last_modified)),1)])]),_:2},1032,["item","index","dragImage"]))),256)):e.createCommentVNode("",!0),e.unref(t).view==="grid"&&!c.value.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:2},e.renderList(u(!1),(f,v)=>(e.openBlock(),e.createBlock(Xt,{item:f,index:v,dragImage:r.value,class:"vf-item vf-item-grid",draggable:"true"},{default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createElementVNode("div",_u,[(f.mime_type??"").startsWith("image")&&e.unref(t).showThumbnails?(e.openBlock(),e.createElementBlock("img",{src:"data:image/png;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",class:"lazy h-10 md:h-12 m-auto","data-src":e.unref(t).requester.getPreviewUrl(e.unref(t).fs.adapter,f),alt:f.basename,key:f.path},null,8,Eu)):(e.openBlock(),e.createBlock(Jt,{key:1,type:f.type},null,8,["type"])),!((f.mime_type??"").startsWith("image")&&e.unref(t).showThumbnails)&&f.type!=="dir"?(e.openBlock(),e.createElementBlock("div",Vu,e.toDisplayString(s(f.extension)),1)):e.createCommentVNode("",!0)]),e.createElementVNode("span",Nu,e.toDisplayString(e.unref(fo)(f.basename)),1)])]),_:2},1032,["item","index","dragImage"]))),256)):e.createCommentVNode("",!0)],34),e.createVNode(Zi)]))}},$u=["href","download"],Bu=["onClick"],Cu={__name:"ContextMenu",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,s=e.ref(null),r=e.ref([]),c=e.ref(""),l=e.reactive({active:!1,items:[],positions:{left:0,top:0}}),i=e.computed(()=>l.items.filter(p=>p.key==null||t.features.includes(p.key)));t.emitter.on("vf-context-selected",p=>{r.value=p});const a={newfolder:{key:re.NEW_FOLDER,title:()=>n("New Folder"),action:()=>t.modal.open(In)},delete:{key:re.DELETE,title:()=>n("Delete"),action:()=>{t.modal.open(jn,{items:r})}},refresh:{title:()=>n("Refresh"),action:()=>{t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:t.fs.data.dirname}})}},preview:{key:re.PREVIEW,title:()=>n("Preview"),action:()=>t.modal.open(Kn,{adapter:t.fs.adapter,item:r.value[0]})},open:{title:()=>n("Open"),action:()=>{t.emitter.emit("vf-search-exit"),t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:r.value[0].path}})}},openDir:{title:()=>n("Open containing folder"),action:()=>{t.emitter.emit("vf-search-exit"),t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:r.value[0].dir}})}},download:{key:re.DOWNLOAD,link:e.computed(()=>t.requester.getDownloadUrl(t.fs.adapter,r.value[0])),title:()=>n("Download"),action:()=>{}},archive:{key:re.ARCHIVE,title:()=>n("Archive"),action:()=>t.modal.open(Pn,{items:r})},unarchive:{key:re.UNARCHIVE,title:()=>n("Unarchive"),action:()=>t.modal.open(Un,{items:r})},rename:{key:re.RENAME,title:()=>n("Rename"),action:()=>t.modal.open(Fn,{items:r})}},u=p=>{t.emitter.emit("vf-contextmenu-hide"),p.action()};t.emitter.on("vf-search-query",({newQuery:p})=>{c.value=p}),t.emitter.on("vf-contextmenu-show",({event:p,items:d,target:f=null})=>{if(l.items=[],c.value)if(f)l.items.push(a.openDir),t.emitter.emit("vf-context-selected",[f]);else return;else!f&&!c.value?(l.items.push(a.refresh),l.items.push(a.newfolder),t.emitter.emit("vf-context-selected",[])):d.length>1&&d.some(v=>v.path===f.path)?(l.items.push(a.refresh),l.items.push(a.archive),l.items.push(a.delete),t.emitter.emit("vf-context-selected",d)):(f.type==="dir"?l.items.push(a.open):(l.items.push(a.preview),l.items.push(a.download)),l.items.push(a.rename),f.mime_type==="application/zip"?l.items.push(a.unarchive):l.items.push(a.archive),l.items.push(a.delete),t.emitter.emit("vf-context-selected",[f]));m(p)}),t.emitter.on("vf-contextmenu-hide",()=>{l.active=!1});const m=p=>{const d=t.dragSelect.area.value,f=t.root.getBoundingClientRect(),v=d.getBoundingClientRect();let x=p.clientX-f.left,b=p.clientY-f.top;l.active=!0,e.nextTick(()=>{var D;const E=(D=s.value)==null?void 0:D.getBoundingClientRect();let g=(E==null?void 0:E.height)??0,h=(E==null?void 0:E.width)??0;x=v.right-p.pageX+window.scrollX<h?x-h:x,b=v.bottom-p.pageY+window.scrollY<g?b-g:b,l.positions={left:x+"px",top:b+"px"}})};return(p,d)=>e.withDirectives((e.openBlock(),e.createElementBlock("ul",{ref_key:"contextmenu",ref:s,style:e.normalizeStyle(l.positions),class:"z-30 absolute text-xs bg-neutral-50 dark:bg-gray-800 text-gray-700 dark:text-gray-200 border border-neutral-300 dark:border-gray-600 shadow rounded-sm select-none"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,f=>(e.openBlock(),e.createElementBlock("li",{class:"cursor-pointer hover:bg-neutral-200 dark:hover:bg-gray-700",key:f.title},[f.link?(e.openBlock(),e.createElementBlock("a",{key:0,class:"block pl-2 pr-3 py-2",target:"_blank",href:f.link,download:f.link,onClick:d[0]||(d[0]=v=>e.unref(t).emitter.emit("vf-contextmenu-hide"))},[e.createElementVNode("span",null,e.toDisplayString(f.title()),1)],8,$u)):(e.openBlock(),e.createElementBlock("div",{key:1,class:"pl-2 pr-3 py-1.5",onClick:v=>u(f)},[e.createElementVNode("span",null,e.toDisplayString(f.title()),1)],8,Bu))]))),128))],4)),[[e.vShow,l.active]])}},Du=(o,t)=>{const n=o.__vccOpts||o;for(const[s,r]of t)n[s]=r;return n},Mu={props:{on:{type:String,required:!0}},setup(o,{emit:t,slots:n}){const s=e.inject("ServiceContainer"),r=e.ref(!1),{t:c}=s.i18n;let l=null;const i=()=>{clearTimeout(l),r.value=!0,l=setTimeout(()=>{r.value=!1},2e3)};return e.onMounted(()=>{s.emitter.on(o.on,i)}),e.onUnmounted(()=>{clearTimeout(l)}),{shown:r,t:c}}},Tu={key:1};function Au(o,t,n,s,r,c){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["text-sm text-green-600 dark:text-green-600 transition-opacity duration-500 ease-out",[{"opacity-0":!s.shown}]])},[o.$slots.default?e.renderSlot(o.$slots,"default",{key:0}):(e.openBlock(),e.createElementBlock("span",Tu,e.toDisplayString(s.t("Saved.")),1))],2)}const Ke=Du(Mu,[["render",Au]]),Lu={class:"sm:flex sm:items-start"},Ou=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])],-1),Hu={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Ru={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},zu={class:"mt-2"},Iu={class:"text-sm text-gray-500"},Fu={class:"text-sm font-semibold mt-5 text-gray-900 dark:text-gray-400 tracking-wider"},ju={class:"mt-3 text-left"},Uu={class:"space-y-2"},Pu={class:"flex relative gap-x-3"},qu={class:"h-6 items-center"},Gu={class:"flex-1 block text-sm"},Wu={for:"metric_unit",class:"flex w-full font-medium text-gray-900 dark:text-gray-400"},Ku={class:"flex relative gap-x-3"},Yu={class:"h-6 items-center"},Ju={class:"flex-1 block text-sm"},Xu={for:"large_icons",class:"flex w-full font-medium text-gray-900 dark:text-gray-400"},Qu={class:"flex relative gap-x-3"},Zu={class:"h-6 items-center"},em={class:"flex-1 block text-sm"},tm={for:"persist_path",class:"flex w-full font-medium text-gray-900 dark:text-gray-400"},om={class:"flex relative gap-x-3"},nm={class:"h-6 items-center"},rm={class:"flex-1 block text-sm"},sm={for:"show_thumbnails",class:"flex w-full font-medium text-gray-900 dark:text-gray-400"},am={class:"flex relative gap-x-3"},lm={class:"h-6 items-center"},cm={for:"theme",class:"flex w-full font-medium text-gray-900 dark:text-gray-400 text-sm"},im={class:"flex text-sm"},dm=["label"],um=["value"],mm={key:0,class:"flex relative gap-x-3"},fm={class:"h-6 items-center"},pm={for:"language",class:"flex w-full font-medium text-gray-900 dark:text-gray-400 text-sm text-nowrap"},hm={class:"flex text-sm"},vm=["label"],gm=["value"],km={__name:"ModalAbout",setup(o){const t=e.inject("ServiceContainer"),{setStore:n,clearStore:s}=t.storage,{t:r,changeLocale:c,locale:l}=t.i18n,i=async()=>{s(),location.reload()},a=E=>{t.theme.set(E),t.emitter.emit("vf-theme-saved")},u=()=>{t.metricUnits=!t.metricUnits,t.filesize=t.metricUnits?Xo:Jo,n("metricUnits",t.metricUnits),t.emitter.emit("vf-metric-units-saved")},m=()=>{t.compactListView=!t.compactListView,n("compactListView",t.compactListView),t.emitter.emit("vf-compact-view-saved")},p=()=>{t.showThumbnails=!t.showThumbnails,n("show-thumbnails",t.showThumbnails),t.emitter.emit("vf-show-thumbnails-saved")},d=()=>{t.persist=!t.persist,n("persist-path",t.persist),t.emitter.emit("vf-persist-path-saved")},{i18n:f}=e.inject("VueFinderOptions"),x=Object.fromEntries(Object.entries({en:"English",fr:"French (Français)",de:"German (Deutsch)",fa:"Persian (فارسی)",he:"Hebrew (עִברִית)",hi:"Hindi (हिंदी)",ru:"Russian (Pусский)",sv:"Swedish (Svenska)",tr:"Turkish (Türkçe)",zhCN:"Simplified Chinese (简体中文)",zhTW:"Traditional Chinese (繁體中文)"}).filter(([E])=>Object.keys(f).includes(E))),b=e.computed(()=>({system:r("System"),light:r("Light"),dark:r("Dark")}));return(E,g)=>(e.openBlock(),e.createBlock(Be,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:g[8]||(g[8]=h=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(r)("Close")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",Lu,[Ou,e.createElementVNode("div",Hu,[e.createElementVNode("h3",Ru,e.toDisplayString(e.unref(r)("About %s","Vuefinder "+e.unref(t).version)),1),e.createElementVNode("div",zu,[e.createElementVNode("p",Iu,e.toDisplayString(e.unref(r)("Vuefinder is a file manager component for vue 3.")),1),e.createElementVNode("div",null,[e.createElementVNode("h3",Fu,e.toDisplayString(e.unref(r)("Settings")),1)]),e.createElementVNode("div",ju,[e.createElementVNode("fieldset",null,[e.createElementVNode("div",Uu,[e.createElementVNode("div",Pu,[e.createElementVNode("div",qu,[e.withDirectives(e.createElementVNode("input",{id:"metric_unit",name:"metric_unit",type:"checkbox","onUpdate:modelValue":g[0]||(g[0]=h=>e.unref(t).metricUnits=h),onClick:u,class:"h-4 w-4 rounded border-gray-300 text-indigo-600 dark:accent-slate-400 focus:ring-indigo-600"},null,512),[[e.vModelCheckbox,e.unref(t).metricUnits]])]),e.createElementVNode("div",Gu,[e.createElementVNode("label",Wu,[e.createTextVNode(e.toDisplayString(e.unref(r)("Use Metric Units"))+" ",1),e.createVNode(Ke,{class:"ms-3",on:"vf-metric-units-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(r)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",Ku,[e.createElementVNode("div",Yu,[e.withDirectives(e.createElementVNode("input",{id:"large_icons",name:"large_icons",type:"checkbox","onUpdate:modelValue":g[1]||(g[1]=h=>e.unref(t).compactListView=h),onClick:m,class:"h-4 w-4 rounded border-gray-300 text-indigo-600 dark:accent-slate-400 focus:ring-indigo-600"},null,512),[[e.vModelCheckbox,e.unref(t).compactListView]])]),e.createElementVNode("div",Ju,[e.createElementVNode("label",Xu,[e.createTextVNode(e.toDisplayString(e.unref(r)("Compact list view"))+" ",1),e.createVNode(Ke,{class:"ms-3",on:"vf-compact-view-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(r)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",Qu,[e.createElementVNode("div",Zu,[e.withDirectives(e.createElementVNode("input",{id:"persist_path",name:"persist_path",type:"checkbox","onUpdate:modelValue":g[2]||(g[2]=h=>e.unref(t).persist=h),onClick:d,class:"h-4 w-4 rounded border-gray-300 text-indigo-600 dark:accent-slate-400 focus:ring-indigo-600"},null,512),[[e.vModelCheckbox,e.unref(t).persist]])]),e.createElementVNode("div",em,[e.createElementVNode("label",tm,[e.createTextVNode(e.toDisplayString(e.unref(r)("Persist path on reload"))+" ",1),e.createVNode(Ke,{class:"ms-3",on:"vf-persist-path-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(r)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",om,[e.createElementVNode("div",nm,[e.withDirectives(e.createElementVNode("input",{id:"show_thumbnails",name:"show_thumbnails",type:"checkbox","onUpdate:modelValue":g[3]||(g[3]=h=>e.unref(t).showThumbnails=h),onClick:p,class:"h-4 w-4 rounded border-gray-300 text-indigo-600 dark:accent-slate-400 focus:ring-indigo-600"},null,512),[[e.vModelCheckbox,e.unref(t).showThumbnails]])]),e.createElementVNode("div",rm,[e.createElementVNode("label",sm,[e.createTextVNode(e.toDisplayString(e.unref(r)("Show thumbnails"))+" ",1),e.createVNode(Ke,{class:"ms-3",on:"vf-show-thumbnails-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(r)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",am,[e.createElementVNode("div",lm,[e.createElementVNode("label",cm,e.toDisplayString(e.unref(r)("Theme")),1)]),e.createElementVNode("div",im,[e.withDirectives(e.createElementVNode("select",{id:"theme","onUpdate:modelValue":g[4]||(g[4]=h=>e.unref(t).theme.value=h),onChange:g[5]||(g[5]=h=>a(h.target.value)),class:"flex-shrink-0 w-full text-sm text-slate-500 border dark:border-gray-600 dark:text-neutral-50 dark:bg-gray-700 rounded"},[e.createElementVNode("optgroup",{label:e.unref(r)("Theme")},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(b.value,(h,D)=>(e.openBlock(),e.createElementBlock("option",{value:D},e.toDisplayString(h),9,um))),256))],8,dm)],544),[[e.vModelSelect,e.unref(t).theme.value]]),e.createVNode(Ke,{class:"ms-3 flex-shrink-0 flex-grow basis-full",on:"vf-theme-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(r)("Saved.")),1)]),_:1})])]),e.unref(t).features.includes(e.unref(re).LANGUAGE)&&Object.keys(e.unref(x)).length>1?(e.openBlock(),e.createElementBlock("div",mm,[e.createElementVNode("div",fm,[e.createElementVNode("label",pm,e.toDisplayString(e.unref(r)("Language")),1)]),e.createElementVNode("div",hm,[e.withDirectives(e.createElementVNode("select",{id:"language","onUpdate:modelValue":g[6]||(g[6]=h=>e.isRef(l)?l.value=h:null),onChange:g[7]||(g[7]=h=>e.unref(c)(h.target.value)),class:"flex-shrink-0 w-1/2 sm:w-full text-sm text-slate-500 border dark:border-gray-600 dark:text-neutral-50 dark:bg-gray-700 rounded"},[e.createElementVNode("optgroup",{label:e.unref(r)("Language")},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(x),(h,D)=>(e.openBlock(),e.createElementBlock("option",{value:D},e.toDisplayString(h),9,gm))),256))],8,vm)],544),[[e.vModelSelect,e.unref(l)]]),e.createVNode(Ke,{class:"ms-3 flex-shrink-0 flex-grow basis-full",on:"vf-language-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(r)("Saved.")),1)]),_:1})])])):e.createCommentVNode("",!0),e.createElementVNode("button",{onClick:i,type:"button",class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(r)("Reset Settings")),1)])])])])])])]),_:1}))}},bm={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"h-5 w-5",viewBox:"0 0 24 24"},ym=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"},null,-1),xm=[ym];function wm(o,t){return e.openBlock(),e.createElementBlock("svg",bm,[...xm])}const _m={render:wm},Em={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"2",class:"h-5 w-5 stroke-slate-500 cursor-pointer",viewBox:"0 0 24 24"},Vm=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0"},null,-1),Nm=[Vm];function Sm(o,t){return e.openBlock(),e.createElementBlock("svg",Em,[...Nm])}const $m={render:Sm},Bm={class:"p-1 text-xs border-t border-neutral-300 dark:border-gray-700/50 flex justify-between select-none"},Cm={class:"flex leading-5 items-center"},Dm=["aria-label"],Mm=["value"],Tm={class:"ml-3"},Am={key:0},Lm={class:"ml-1"},Om={class:"flex leading-5 items-center justify-end"},Hm=["disabled"],Rm=["aria-label"],zm={__name:"Statusbar",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,{setStore:s}=t.storage,r=t.dragSelect,c=()=>{t.emitter.emit("vf-search-exit"),t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter}}),s("adapter",t.fs.adapter)},l=e.ref("");t.emitter.on("vf-search-query",({newQuery:a})=>{l.value=a});const i=e.computed(()=>{const a=t.selectButton.multiple?r.getSelected().length>0:r.getSelected().length===1;return t.selectButton.active&&a});return(a,u)=>(e.openBlock(),e.createElementBlock("div",Bm,[e.createElementVNode("div",Cm,[e.createElementVNode("div",{class:"mx-2","aria-label":e.unref(n)("Storage"),"data-microtip-position":"top-right",role:"tooltip"},[e.createVNode(e.unref(_m))],8,Dm),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":u[0]||(u[0]=m=>e.unref(t).fs.adapter=m),onChange:c,class:"py-0.5 text-sm text-slate-500 border dark:border-gray-600 dark:text-neutral-50 dark:bg-gray-700 rounded pl-2 pr-8"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(t).fs.data.storages,m=>(e.openBlock(),e.createElementBlock("option",{value:m},e.toDisplayString(m),9,Mm))),256))],544),[[e.vModelSelect,e.unref(t).fs.adapter]]),e.createElementVNode("div",Tm,[l.value.length?(e.openBlock(),e.createElementBlock("span",Am,e.toDisplayString(e.unref(t).fs.data.files.length)+" items found. ",1)):e.createCommentVNode("",!0),e.createElementVNode("span",Lm,e.toDisplayString(e.unref(t).dragSelect.getCount()>0?e.unref(n)("%s item(s) selected.",e.unref(t).dragSelect.getCount()):""),1)])]),e.createElementVNode("div",Om,[e.unref(t).selectButton.active?(e.openBlock(),e.createElementBlock("button",{key:0,class:e.normalizeClass(["vf-btn py-0 vf-btn-primary",{disabled:!i.value}]),disabled:!i.value,onClick:u[1]||(u[1]=m=>e.unref(t).selectButton.click(e.unref(r).getSelected(),m))},e.toDisplayString(e.unref(n)("Select")),11,Hm)):e.createCommentVNode("",!0),e.createElementVNode("span",{class:"mr-1","aria-label":e.unref(n)("About"),"data-microtip-position":"top-left",role:"tooltip",onClick:u[2]||(u[2]=m=>e.unref(t).modal.open(km))},[e.createVNode(e.unref($m))],8,Rm)])]))}},Im={__name:"VueFinder",props:{id:{type:String,default:"vf"},request:{type:[String,Object],required:!0},persist:{type:Boolean,default:!1},path:{type:String,default:""},features:{type:[Array,Boolean],default:!0},debug:{type:Boolean,default:!1},theme:{type:String,default:"system"},locale:{type:String,default:null},maxHeight:{type:String,default:"600px"},maxFileSize:{type:String,default:"10mb"},fullScreen:{type:Boolean,default:!1},showThumbnails:{type:Boolean,default:!0},selectButton:{type:Object,default(o){return{active:!1,multiple:!1,click:t=>{},...o}}}},emits:["select"],setup(o,{emit:t}){const n=t,r=fs(o,e.inject("VueFinderOptions"));e.provide("ServiceContainer",r);const{setStore:c}=r.storage,l=e.ref(null);r.root=l;const i=r.dragSelect,a=m=>{Object.assign(r.fs.data,m),i.clearSelection(),i.refreshSelection()};let u;return r.emitter.on("vf-fetch-abort",()=>{u.abort(),r.fs.loading=!1}),r.emitter.on("vf-fetch",({params:m,body:p=null,onSuccess:d=null,onError:f=null,noCloseModal:v=!1})=>{["index","search"].includes(m.q)&&(u&&u.abort(),r.fs.loading=!0),u=new AbortController;const x=u.signal;r.requester.send({url:"",method:m.m||"get",params:m,body:p,abortSignal:x}).then(b=>{r.fs.adapter=b.adapter,r.persist&&(r.fs.path=b.dirname,c("path",r.fs.path)),["index","search"].includes(m.q)&&(r.fs.loading=!1),v||r.modal.close(),a(b),d&&d(b)}).catch(b=>{console.error(b),f&&f(b)})}),e.onMounted(()=>{let m={};r.fs.path.includes("://")&&(m={adapter:r.fs.path.split("://")[0],path:r.fs.path}),r.emitter.emit("vf-fetch",{params:{q:"index",adapter:r.fs.adapter,...m}}),i.onSelect(p=>{n("select",p)})}),(m,p)=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder",ref_key:"root",ref:l},[e.createElementVNode("div",{class:e.normalizeClass(e.unref(r).theme.actualValue)},[e.createElementVNode("div",{class:e.normalizeClass([e.unref(r).fullScreen?"fixed w-screen inset-0 z-20":"relative rounded","border flex flex-col bg-white dark:bg-gray-800 text-gray-700 dark:text-neutral-400 border-neutral-300 dark:border-gray-900 select-none"]),style:e.normalizeStyle(e.unref(r).fullScreen?"":"max-height: "+o.maxHeight),onMousedown:p[0]||(p[0]=d=>e.unref(r).emitter.emit("vf-contextmenu-hide")),onTouchstart:p[1]||(p[1]=d=>e.unref(r).emitter.emit("vf-contextmenu-hide"))},[e.createVNode(Bc),e.createVNode(Xi),e.createVNode(Su),e.createVNode(zm)],38),e.createVNode(e.Transition,{name:"fade"},{default:e.withCtx(()=>[e.unref(r).modal.visible?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(r).modal.type),{key:0})):e.createCommentVNode("",!0)]),_:1}),e.createVNode(Cu)],2)],512))}},Fm={install(o,t={}){t.i18n=t.i18n??{};let[n]=Object.keys(t.i18n);t.locale=t.locale??n??"en",o.provide("VueFinderOptions",t),o.component("VueFinder",Im)}};module.exports=Fm;
